(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function pv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vd={exports:{}},bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function fb(){if(v0)return bl;v0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return bl.Fragment=e,bl.jsx=n,bl.jsxs=n,bl}var E0;function db(){return E0||(E0=1,vd.exports=fb()),vd.exports}var _=db(),Ed={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function mb(){if(T0)return ke;T0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.iterator;function N(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,F={};function Q(D,W,oe){this.props=D,this.context=W,this.refs=F,this.updater=oe||B}Q.prototype.isReactComponent={},Q.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},Q.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function he(){}he.prototype=Q.prototype;function ye(D,W,oe){this.props=D,this.context=W,this.refs=F,this.updater=oe||B}var ae=ye.prototype=new he;ae.constructor=ye,H(ae,Q.prototype),ae.isPureReactComponent=!0;var ve=Array.isArray,ge={H:null,A:null,T:null,S:null,V:null},Ie=Object.prototype.hasOwnProperty;function x(D,W,oe,ne,ce,Oe){return oe=Oe.ref,{$$typeof:s,type:D,key:W,ref:oe!==void 0?oe:null,props:Oe}}function A(D,W){return x(D.type,W,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function k(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return W[oe]})}var M=/\/+/g;function V(D,W){return typeof D=="object"&&D!==null&&D.key!=null?k(""+D.key):W.toString(36)}function C(){}function Xe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(W){D.status==="pending"&&(D.status="fulfilled",D.value=W)},function(W){D.status==="pending"&&(D.status="rejected",D.reason=W)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Ye(D,W,oe,ne,ce){var Oe=typeof D;(Oe==="undefined"||Oe==="boolean")&&(D=null);var Ee=!1;if(D===null)Ee=!0;else switch(Oe){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(D.$$typeof){case s:case e:Ee=!0;break;case T:return Ee=D._init,Ye(Ee(D._payload),W,oe,ne,ce)}}if(Ee)return ce=ce(D),Ee=ne===""?"."+V(D,0):ne,ve(ce)?(oe="",Ee!=null&&(oe=Ee.replace(M,"$&/")+"/"),Ye(ce,W,oe,"",function(Dt){return Dt})):ce!=null&&(I(ce)&&(ce=A(ce,oe+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(M,"$&/")+"/")+Ee)),W.push(ce)),1;Ee=0;var tt=ne===""?".":ne+":";if(ve(D))for(var Fe=0;Fe<D.length;Fe++)ne=D[Fe],Oe=tt+V(ne,Fe),Ee+=Ye(ne,W,oe,Oe,ce);else if(Fe=N(D),typeof Fe=="function")for(D=Fe.call(D),Fe=0;!(ne=D.next()).done;)ne=ne.value,Oe=tt+V(ne,Fe++),Ee+=Ye(ne,W,oe,Oe,ce);else if(Oe==="object"){if(typeof D.then=="function")return Ye(Xe(D),W,oe,ne,ce);throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function Y(D,W,oe){if(D==null)return D;var ne=[],ce=0;return Ye(D,ne,"","",function(Oe){return W.call(oe,Oe,ce++)}),ne}function re(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var me=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function je(){}return ke.Children={map:Y,forEach:function(D,W,oe){Y(D,function(){W.apply(this,arguments)},oe)},count:function(D){var W=0;return Y(D,function(){W++}),W},toArray:function(D){return Y(D,function(W){return W})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ke.Component=Q,ke.Fragment=n,ke.Profiler=o,ke.PureComponent=ye,ke.StrictMode=r,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ge,ke.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ge.H.useMemoCache(D)}},ke.cache=function(D){return function(){return D.apply(null,arguments)}},ke.cloneElement=function(D,W,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ne=H({},D.props),ce=D.key,Oe=void 0;if(W!=null)for(Ee in W.ref!==void 0&&(Oe=void 0),W.key!==void 0&&(ce=""+W.key),W)!Ie.call(W,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&W.ref===void 0||(ne[Ee]=W[Ee]);var Ee=arguments.length-2;if(Ee===1)ne.children=oe;else if(1<Ee){for(var tt=Array(Ee),Fe=0;Fe<Ee;Fe++)tt[Fe]=arguments[Fe+2];ne.children=tt}return x(D.type,ce,void 0,void 0,Oe,ne)},ke.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},ke.createElement=function(D,W,oe){var ne,ce={},Oe=null;if(W!=null)for(ne in W.key!==void 0&&(Oe=""+W.key),W)Ie.call(W,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ce[ne]=W[ne]);var Ee=arguments.length-2;if(Ee===1)ce.children=oe;else if(1<Ee){for(var tt=Array(Ee),Fe=0;Fe<Ee;Fe++)tt[Fe]=arguments[Fe+2];ce.children=tt}if(D&&D.defaultProps)for(ne in Ee=D.defaultProps,Ee)ce[ne]===void 0&&(ce[ne]=Ee[ne]);return x(D,Oe,void 0,void 0,null,ce)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(D){return{$$typeof:g,render:D}},ke.isValidElement=I,ke.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:re}},ke.memo=function(D,W){return{$$typeof:y,type:D,compare:W===void 0?null:W}},ke.startTransition=function(D){var W=ge.T,oe={};ge.T=oe;try{var ne=D(),ce=ge.S;ce!==null&&ce(oe,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(je,me)}catch(Oe){me(Oe)}finally{ge.T=W}},ke.unstable_useCacheRefresh=function(){return ge.H.useCacheRefresh()},ke.use=function(D){return ge.H.use(D)},ke.useActionState=function(D,W,oe){return ge.H.useActionState(D,W,oe)},ke.useCallback=function(D,W){return ge.H.useCallback(D,W)},ke.useContext=function(D){return ge.H.useContext(D)},ke.useDebugValue=function(){},ke.useDeferredValue=function(D,W){return ge.H.useDeferredValue(D,W)},ke.useEffect=function(D,W,oe){var ne=ge.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(D,W)},ke.useId=function(){return ge.H.useId()},ke.useImperativeHandle=function(D,W,oe){return ge.H.useImperativeHandle(D,W,oe)},ke.useInsertionEffect=function(D,W){return ge.H.useInsertionEffect(D,W)},ke.useLayoutEffect=function(D,W){return ge.H.useLayoutEffect(D,W)},ke.useMemo=function(D,W){return ge.H.useMemo(D,W)},ke.useOptimistic=function(D,W){return ge.H.useOptimistic(D,W)},ke.useReducer=function(D,W,oe){return ge.H.useReducer(D,W,oe)},ke.useRef=function(D){return ge.H.useRef(D)},ke.useState=function(D){return ge.H.useState(D)},ke.useSyncExternalStore=function(D,W,oe){return ge.H.useSyncExternalStore(D,W,oe)},ke.useTransition=function(){return ge.H.useTransition()},ke.version="19.1.1",ke}var b0;function dm(){return b0||(b0=1,Ed.exports=mb()),Ed.exports}var J=dm();const gb=pv(J);var Td={exports:{}},wl={},bd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function pb(){return w0||(w0=1,(function(s){function e(Y,re){var me=Y.length;Y.push(re);e:for(;0<me;){var je=me-1>>>1,D=Y[je];if(0<o(D,re))Y[je]=re,Y[me]=D,me=je;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var re=Y[0],me=Y.pop();if(me!==re){Y[0]=me;e:for(var je=0,D=Y.length,W=D>>>1;je<W;){var oe=2*(je+1)-1,ne=Y[oe],ce=oe+1,Oe=Y[ce];if(0>o(ne,me))ce<D&&0>o(Oe,ne)?(Y[je]=Oe,Y[ce]=me,je=ce):(Y[je]=ne,Y[oe]=me,je=oe);else if(ce<D&&0>o(Oe,me))Y[je]=Oe,Y[ce]=me,je=ce;else break e}}return re}function o(Y,re){var me=Y.sortIndex-re.sortIndex;return me!==0?me:Y.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var p=[],y=[],T=1,S=null,N=3,B=!1,H=!1,F=!1,Q=!1,he=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function ve(Y){for(var re=n(y);re!==null;){if(re.callback===null)r(y);else if(re.startTime<=Y)r(y),re.sortIndex=re.expirationTime,e(p,re);else break;re=n(y)}}function ge(Y){if(F=!1,ve(Y),!H)if(n(p)!==null)H=!0,Ie||(Ie=!0,V());else{var re=n(y);re!==null&&Ye(ge,re.startTime-Y)}}var Ie=!1,x=-1,A=5,I=-1;function k(){return Q?!0:!(s.unstable_now()-I<A)}function M(){if(Q=!1,Ie){var Y=s.unstable_now();I=Y;var re=!0;try{e:{H=!1,F&&(F=!1,ye(x),x=-1),B=!0;var me=N;try{t:{for(ve(Y),S=n(p);S!==null&&!(S.expirationTime>Y&&k());){var je=S.callback;if(typeof je=="function"){S.callback=null,N=S.priorityLevel;var D=je(S.expirationTime<=Y);if(Y=s.unstable_now(),typeof D=="function"){S.callback=D,ve(Y),re=!0;break t}S===n(p)&&r(p),ve(Y)}else r(p);S=n(p)}if(S!==null)re=!0;else{var W=n(y);W!==null&&Ye(ge,W.startTime-Y),re=!1}}break e}finally{S=null,N=me,B=!1}re=void 0}}finally{re?V():Ie=!1}}}var V;if(typeof ae=="function")V=function(){ae(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Xe=C.port2;C.port1.onmessage=M,V=function(){Xe.postMessage(null)}}else V=function(){he(M,0)};function Ye(Y,re){x=he(function(){Y(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var re=3;break;default:re=N}var me=N;N=re;try{return Y()}finally{N=me}},s.unstable_requestPaint=function(){Q=!0},s.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var me=N;N=Y;try{return re()}finally{N=me}},s.unstable_scheduleCallback=function(Y,re,me){var je=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?je+me:je):me=je,Y){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=me+D,Y={id:T++,callback:re,priorityLevel:Y,startTime:me,expirationTime:D,sortIndex:-1},me>je?(Y.sortIndex=me,e(y,Y),n(p)===null&&Y===n(y)&&(F?(ye(x),x=-1):F=!0,Ye(ge,me-je))):(Y.sortIndex=D,e(p,Y),H||B||(H=!0,Ie||(Ie=!0,V()))),Y},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(Y){var re=N;return function(){var me=N;N=re;try{return Y.apply(this,arguments)}finally{N=me}}}})(wd)),wd}var S0;function yb(){return S0||(S0=1,bd.exports=pb()),bd.exports}var Sd={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function _b(){if(A0)return rn;A0=1;var s=dm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:y,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,T)},rn.flushSync=function(p){var y=f.T,T=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=y,r.p=T,r.d.f()}},rn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},rn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},rn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,S=g(T,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:N,fetchPriority:B}):T==="script"&&r.d.X(p,{crossOrigin:S,integrity:N,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},rn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,S=g(T,y.crossOrigin);r.d.L(p,T,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rn.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},rn.requestFormReset=function(p){r.d.r(p)},rn.unstable_batchedUpdates=function(p,y){return p(y)},rn.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},rn.useFormStatus=function(){return f.H.useHostTransitionStatus()},rn.version="19.1.1",rn}var x0;function vb(){if(x0)return Sd.exports;x0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Sd.exports=_b(),Sd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function Eb(){if(R0)return wl;R0=1;var s=yb(),e=dm(),n=vb();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,b=h.child;b;){if(b===a){E=!0,a=h,l=d;break}if(b===l){E=!0,l=h,a=d;break}b=b.sibling}if(!E){for(b=d.child;b;){if(b===a){E=!0,a=d,l=h;break}if(b===l){E=!0,l=d,a=h;break}b=b.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),ye=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case Q:return"Profiler";case F:return"StrictMode";case ge:return"Suspense";case Ie:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case ae:return(t.displayName||"Context")+".Provider";case ye:return(t._context.displayName||"Context")+".Consumer";case ve:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return i=t.displayName||null,i!==null?i:Xe(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Xe(t(i))}catch{}}return null}var Ye=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},je=[],D=-1;function W(t){return{current:t}}function oe(t){0>D||(t.current=je[D],je[D]=null,D--)}function ne(t,i){D++,je[D]=t.current,t.current=i}var ce=W(null),Oe=W(null),Ee=W(null),tt=W(null);function Fe(t,i){switch(ne(Ee,i),ne(Oe,t),ne(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Yy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Yy(i),t=Ky(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(ce),ne(ce,t)}function Dt(){oe(ce),oe(Oe),oe(Ee)}function Hn(t){t.memoizedState!==null&&ne(tt,t);var i=ce.current,a=Ky(i,t.type);i!==a&&(ne(Oe,t),ne(ce,a))}function qn(t){Oe.current===t&&(oe(ce),oe(Oe)),tt.current===t&&(oe(tt),yl._currentValue=me)}var en=Object.prototype.hasOwnProperty,Ft=s.unstable_scheduleCallback,Gt=s.unstable_cancelCallback,tn=s.unstable_shouldYield,Di=s.unstable_requestPaint,Mt=s.unstable_now,rs=s.unstable_getCurrentPriorityLevel,dt=s.unstable_ImmediatePriority,yt=s.unstable_UserBlockingPriority,En=s.unstable_NormalPriority,lr=s.unstable_LowPriority,te=s.unstable_IdlePriority,Ne=s.log,ie=s.unstable_setDisableYieldValue,fe=null,le=null;function Ae(t){if(typeof Ne=="function"&&ie(t),le&&typeof le.setStrictMode=="function")try{le.setStrictMode(fe,t)}catch{}}var Pe=Math.clz32?Math.clz32:ra,mn=Math.log,sa=Math.LN2;function ra(t){return t>>>=0,t===0?32:31-(mn(t)/sa|0)|0}var si=256,as=4194304;function Fn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Nn(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=Fn(l):(E&=b,E!==0?h=Fn(E):a||(a=b&~t,a!==0&&(h=Fn(a))))):(b=l&~d,b!==0?h=Fn(b):E!==0?h=Fn(E):a||(a=l&~t,a!==0&&(h=Fn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function os(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function aa(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vo(){var t=si;return si<<=1,(si&4194048)===0&&(si=256),t}function ls(){var t=as;return as<<=1,(as&62914560)===0&&(as=4194304),t}function oa(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Et(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jl(t,i,a,l,h,d){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,R=t.expirationTimes,L=t.hiddenUpdates;for(a=E&~a;0<a;){var K=31-Pe(a),$=1<<K;b[K]=0,R[K]=-1;var z=L[K];if(z!==null)for(L[K]=null,K=0;K<z.length;K++){var q=z[K];q!==null&&(q.lane&=-536870913)}a&=~$}l!==0&&us(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~i))}function us(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Pe(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function cs(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Pe(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Eo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function To(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Mi(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:d0(t.type))}function wh(t,i){var a=re.p;try{return re.p=t,i()}finally{re.p=a}}var ri=Math.random().toString(36).slice(2),Tt="__reactFiber$"+ri,Qt="__reactProps$"+ri,Oi="__reactContainer$"+ri,ur="__reactEvents$"+ri,cr="__reactListeners$"+ri,Sh="__reactHandles$"+ri,Gn="__reactResources$"+ri,hs="__reactMarker$"+ri;function la(t){delete t[Tt],delete t[Qt],delete t[ur],delete t[cr],delete t[Sh]}function ai(t){var i=t[Tt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Oi]||a[Tt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Wy(t);t!==null;){if(a=t[Tt])return a;t=Wy(t)}return i}t=a,a=t.parentNode}return null}function oi(t){if(t=t[Tt]||t[Oi]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function fs(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function ds(t){var i=t[Gn];return i||(i=t[Gn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bt(t){t[hs]=!0}var eu=new Set,hr={};function li(t,i){ui(t,i),ui(t+"Capture",i)}function ui(t,i){for(hr[t]=i,t=0;t<i.length;t++)eu.add(i[t])}var fr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ci={},ua={};function Ah(t){return en.call(ua,t)?!0:en.call(ci,t)?!1:fr.test(t)?ua[t]=!0:(ci[t]=!0,!1)}function dr(t,i,a){if(Ah(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function mr(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Dn(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var gr,ca;function ki(t){if(gr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);gr=i&&i[1]||"",ca=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+t+ca}var ha=!1;function fa(t,i){if(!t||ha)return"";ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(q){var z=q}Reflect.construct(t,[],$)}else{try{$.call()}catch(q){z=q}t.call($.prototype)}}else{try{throw Error()}catch(q){z=q}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(q){if(q&&z&&typeof q.stack=="string")return[q.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],b=d[1];if(E&&b){var R=E.split(`
`),L=b.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===L.length)for(l=R.length-1,h=L.length-1;1<=l&&0<=h&&R[l]!==L[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==L[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==L[h]){var K=`
`+R[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=h);break}}}finally{ha=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ki(a):""}function xh(t){switch(t.tag){case 26:case 27:case 5:return ki(t.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 15:return fa(t.type,!1);case 11:return fa(t.type.render,!1);case 1:return fa(t.type,!0);case 31:return ki("Activity");default:return""}}function Qn(t){try{var i="";do i+=xh(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ms(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function pr(t){var i=ms(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function gs(t){t._valueTracker||(t._valueTracker=pr(t))}function nt(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=ms(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Vi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var yr=/[\n"\\]/g;function Lt(t){return t.replace(yr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function bo(t,i,a,l,h,d,E,b){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+mt(i)):t.value!==""+mt(i)&&(t.value=""+mt(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?So(t,E,mt(i)):a!=null?So(t,E,mt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+mt(b):t.removeAttribute("name")}function wo(t,i,a,l,h,d,E,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+mt(a):"",i=i!=null?""+mt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function So(t,i,a){i==="number"&&Vi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ps(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function tu(t,i,a){if(i!=null&&(i=""+mt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+mt(a):""}function nu(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ye(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=mt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Mn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ao(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ji.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function xo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Ao(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Ao(t,d,i[d])}function da(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),su=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yn(t){return su.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ro=null;function Io(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ys=null,cn=null;function ru(t){var i=oi(t);if(i&&(t=i.stateNode)){var a=t[Qt]||null;e:switch(t=i.stateNode,i.type){case"input":if(bo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Lt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Qt]||null;if(!h)throw Error(r(90));bo(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&nt(l)}break e;case"textarea":tu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ps(t,!!a.multiple,i,!1)}}}var _r=!1;function vr(t,i,a){if(_r)return t(i,a);_r=!0;try{var l=t(i);return l}finally{if(_r=!1,(ys!==null||cn!==null)&&(Ku(),ys&&(i=ys,t=cn,cn=ys=null,ru(i),t)))for(i=0;i<t.length;i++)ru(t[i])}}function _s(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Qt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(hn)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{Pi=!1}var On=null,ot=null,ma=null;function au(){if(ma)return ma;var t,i=ot,a=i.length,l,h="value"in On?On.value:On.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&i[a-l]===h[d-l];l++);return ma=h.slice(t,1<l?1-l:void 0)}function Er(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Tr(){return!0}function Co(){return!1}function Ot(t){function i(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Tr:Co,this.isPropagationStopped=Co,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),i}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},br=Ot(nn),wr=T({},nn,{view:0,detail:0}),Sr=Ot(wr),ga,Ar,hi,xr=T({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_a,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hi&&(hi&&t.type==="mousemove"?(ga=t.screenX-hi.screenX,Ar=t.screenY-hi.screenY):Ar=ga=0,hi=t),ga)},movementY:function(t){return"movementY"in t?t.movementY:Ar}}),Rr=Ot(xr),Rh=T({},xr,{dataTransfer:0}),ou=Ot(Rh),Ir=T({},wr,{relatedTarget:0}),pa=Ot(Ir),lu=T({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),No=Ot(lu),Do=T({},nn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uu=Ot(Do),ya=T({},nn,{data:0}),Mo=Ot(ya),cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ui={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=hu[t])?!!i[t]:!1}function _a(){return fu}var du=T({},wr,{key:function(t){if(t.key){var i=cu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Er(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ui[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_a,charCode:function(t){return t.type==="keypress"?Er(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Er(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),va=Ot(du),fn=T({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=Ot(fn),mu=T({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_a}),Es=Ot(mu),c=T({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Ot(c),v=T({},xr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w=Ot(v),U=T({},nn,{newState:0,oldState:0}),G=Ot(U),se=[9,13,27,32],De=hn&&"CompositionEvent"in window,ut=null;hn&&"documentMode"in document&&(ut=document.documentMode);var We=hn&&"TextEvent"in window&&!ut,wt=hn&&(!De||ut&&8<ut&&11>=ut),Tn=" ",fi=!1;function Kn(t,i){switch(t){case"keyup":return se.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xn(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $n=!1;function ko(t,i){switch(t){case"compositionend":return Xn(i);case"keypress":return i.which!==32?null:(fi=!0,Tn);case"textInput":return t=i.data,t===Tn&&fi?null:t;default:return null}}function LE(t,i){if($n)return t==="compositionend"||!De&&Kn(t,i)?(t=au(),ma=ot=On=null,$n=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wt&&i.locale!=="ko"?null:i.data;default:return null}}var zE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function og(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!zE[t.type]:i==="textarea"}function lg(t,i,a,l){ys?cn?cn.push(l):cn=[l]:ys=l,i=ec(i,"onChange"),0<i.length&&(a=new br("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Vo=null,jo=null;function BE(t){Hy(t,0)}function gu(t){var i=fs(t);if(nt(i))return t}function ug(t,i){if(t==="change")return i}var cg=!1;if(hn){var Ih;if(hn){var Ch="oninput"in document;if(!Ch){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),Ch=typeof hg.oninput=="function"}Ih=Ch}else Ih=!1;cg=Ih&&(!document.documentMode||9<document.documentMode)}function fg(){Vo&&(Vo.detachEvent("onpropertychange",dg),jo=Vo=null)}function dg(t){if(t.propertyName==="value"&&gu(jo)){var i=[];lg(i,jo,t,Io(t)),vr(BE,i)}}function HE(t,i,a){t==="focusin"?(fg(),Vo=i,jo=a,Vo.attachEvent("onpropertychange",dg)):t==="focusout"&&fg()}function qE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(jo)}function FE(t,i){if(t==="click")return gu(i)}function GE(t,i){if(t==="input"||t==="change")return gu(i)}function QE(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var bn=typeof Object.is=="function"?Object.is:QE;function Po(t,i){if(bn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!en.call(i,h)||!bn(t[h],i[h]))return!1}return!0}function mg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,i){var a=mg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mg(a)}}function pg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?pg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function yg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Vi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Vi(t.document)}return i}function Nh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var YE=hn&&"documentMode"in document&&11>=document.documentMode,Ea=null,Dh=null,Uo=null,Mh=!1;function _g(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mh||Ea==null||Ea!==Vi(l)||(l=Ea,"selectionStart"in l&&Nh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Uo&&Po(Uo,l)||(Uo=l,l=ec(Dh,"onSelect"),0<l.length&&(i=new br("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ea)))}function Cr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ta={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionrun:Cr("Transition","TransitionRun"),transitionstart:Cr("Transition","TransitionStart"),transitioncancel:Cr("Transition","TransitionCancel"),transitionend:Cr("Transition","TransitionEnd")},Oh={},vg={};hn&&(vg=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Nr(t){if(Oh[t])return Oh[t];if(!Ta[t])return t;var i=Ta[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in vg)return Oh[t]=i[a];return t}var Eg=Nr("animationend"),Tg=Nr("animationiteration"),bg=Nr("animationstart"),KE=Nr("transitionrun"),XE=Nr("transitionstart"),$E=Nr("transitioncancel"),wg=Nr("transitionend"),Sg=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function Zn(t,i){Sg.set(t,i),li(i,[t])}var Ag=new WeakMap;function kn(t,i){if(typeof t=="object"&&t!==null){var a=Ag.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Qn(i)},Ag.set(t,i),i)}return{value:t,source:i,stack:Qn(i)}}var Vn=[],ba=0,Vh=0;function pu(){for(var t=ba,i=Vh=ba=0;i<t;){var a=Vn[i];Vn[i++]=null;var l=Vn[i];Vn[i++]=null;var h=Vn[i];Vn[i++]=null;var d=Vn[i];if(Vn[i++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&xg(a,h,d)}}function yu(t,i,a,l){Vn[ba++]=t,Vn[ba++]=i,Vn[ba++]=a,Vn[ba++]=l,Vh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function jh(t,i,a,l){return yu(t,i,a,l),_u(t)}function wa(t,i){return yu(t,null,null,i),_u(t)}function xg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Pe(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function _u(t){if(50<ul)throw ul=0,qf=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Sa={};function ZE(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,i,a,l){return new ZE(t,i,a,l)}function Ph(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Li(t,i){var a=t.alternate;return a===null?(a=wn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Rg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function vu(t,i,a,l,h,d){var E=0;if(l=t,typeof t=="function")Ph(t)&&(E=1);else if(typeof t=="string")E=JT(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=wn(31,a,i,h),t.elementType=I,t.lanes=d,t;case H:return Dr(a.children,h,d,i);case F:E=8,h|=24;break;case Q:return t=wn(12,a,i,h|2),t.elementType=Q,t.lanes=d,t;case ge:return t=wn(13,a,i,h),t.elementType=ge,t.lanes=d,t;case Ie:return t=wn(19,a,i,h),t.elementType=Ie,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case he:case ae:E=10;break e;case ye:E=9;break e;case ve:E=11;break e;case x:E=14;break e;case A:E=16,l=null;break e}E=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=wn(E,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Dr(t,i,a,l){return t=wn(7,t,l,i),t.lanes=a,t}function Uh(t,i,a){return t=wn(6,t,null,i),t.lanes=a,t}function Lh(t,i,a){return i=wn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Aa=[],xa=0,Eu=null,Tu=0,jn=[],Pn=0,Mr=null,zi=1,Bi="";function Or(t,i){Aa[xa++]=Tu,Aa[xa++]=Eu,Eu=t,Tu=i}function Ig(t,i,a){jn[Pn++]=zi,jn[Pn++]=Bi,jn[Pn++]=Mr,Mr=t;var l=zi;t=Bi;var h=32-Pe(l)-1;l&=~(1<<h),a+=1;var d=32-Pe(i)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,zi=1<<32-Pe(i)+h|a<<h|l,Bi=d+t}else zi=1<<d|a<<h|l,Bi=t}function zh(t){t.return!==null&&(Or(t,1),Ig(t,1,0))}function Bh(t){for(;t===Eu;)Eu=Aa[--xa],Aa[xa]=null,Tu=Aa[--xa],Aa[xa]=null;for(;t===Mr;)Mr=jn[--Pn],jn[Pn]=null,Bi=jn[--Pn],jn[Pn]=null,zi=jn[--Pn],jn[Pn]=null}var dn=null,_t=null,$e=!1,kr=null,di=!1,Hh=Error(r(519));function Vr(t){var i=Error(r(418,""));throw Bo(kn(i,t)),Hh}function Cg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Tt]=t,i[Qt]=l,a){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(a=0;a<hl.length;a++)ze(hl[a],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":ze("invalid",i),wo(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),gs(i);break;case"select":ze("invalid",i);break;case"textarea":ze("invalid",i),nu(i,l.value,l.defaultValue,l.children),gs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Qy(i.textContent,a)?(l.popover!=null&&(ze("beforetoggle",i),ze("toggle",i)),l.onScroll!=null&&ze("scroll",i),l.onScrollEnd!=null&&ze("scrollend",i),l.onClick!=null&&(i.onclick=tc),i=!0):i=!1,i||Vr(t)}function Ng(t){for(dn=t.return;dn;)switch(dn.tag){case 5:case 13:di=!1;return;case 27:case 3:di=!0;return;default:dn=dn.return}}function Lo(t){if(t!==dn)return!1;if(!$e)return Ng(t),$e=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||rd(t.type,t.memoizedProps)),a=!a),a&&_t&&Vr(t),Ng(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){_t=Jn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}_t=null}}else i===27?(i=_t,js(t.type)?(t=ud,ud=null,_t=t):_t=i):_t=dn?Jn(t.stateNode.nextSibling):null;return!0}function zo(){_t=dn=null,$e=!1}function Dg(){var t=kr;return t!==null&&(yn===null?yn=t:yn.push.apply(yn,t),kr=null),t}function Bo(t){kr===null?kr=[t]:kr.push(t)}var qh=W(null),jr=null,Hi=null;function Ts(t,i,a){ne(qh,i._currentValue),i._currentValue=a}function qi(t){t._currentValue=qh.current,oe(qh)}function Fh(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Gh(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var R=0;R<i.length;R++)if(b.context===i[R]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Fh(d.return,a,t),l||(E=null);break e}d=b.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Fh(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Ho(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var b=h.type;bn(h.pendingProps.value,E.value)||(t!==null?t.push(b):t=[b])}}else if(h===tt.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(yl):t=[yl])}h=h.return}t!==null&&Gh(i,t,a,l),i.flags|=262144}function bu(t){for(t=t.firstContext;t!==null;){if(!bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Pr(t){jr=t,Hi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return Mg(jr,t)}function wu(t,i){return jr===null&&Pr(t),Mg(t,i)}function Mg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Hi===null){if(t===null)throw Error(r(308));Hi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Hi=Hi.next=i;return a}var WE=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},JE=s.unstable_scheduleCallback,eT=s.unstable_NormalPriority,kt={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qh(){return{controller:new WE,data:new Map,refCount:0}}function qo(t){t.refCount--,t.refCount===0&&JE(eT,function(){t.controller.abort()})}var Fo=null,Yh=0,Ra=0,Ia=null;function tT(t,i){if(Fo===null){var a=Fo=[];Yh=0,Ra=$f(),Ia={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yh++,i.then(Og,Og),i}function Og(){if(--Yh===0&&Fo!==null){Ia!==null&&(Ia.status="fulfilled");var t=Fo;Fo=null,Ra=0,Ia=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function nT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var kg=Y.S;Y.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&tT(t,i),kg!==null&&kg(t,i)};var Ur=W(null);function Kh(){var t=Ur.current;return t!==null?t:lt.pooledCache}function Su(t,i){i===null?ne(Ur,Ur.current):ne(Ur,i.pool)}function Vg(){var t=Kh();return t===null?null:{parent:kt._currentValue,pool:t}}var Go=Error(r(460)),jg=Error(r(474)),Au=Error(r(542)),Xh={then:function(){}};function Pg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xu(){}function Ug(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(xu,xu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,zg(t),t;default:if(typeof i.status=="string")i.then(xu,xu);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,zg(t),t}throw Qo=i,Go}}var Qo=null;function Lg(){if(Qo===null)throw Error(r(459));var t=Qo;return Qo=null,t}function zg(t){if(t===Go||t===Au)throw Error(r(483))}var bs=!1;function $h(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zh(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ws(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ss(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Je&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=_u(t),xg(t,null,a),i}return yu(t,l,i,a),_u(t)}function Yo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,cs(t,a)}}function Wh(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Jh=!1;function Ko(){if(Jh){var t=Ia;if(t!==null)throw t}}function Xo(t,i,a,l){Jh=!1;var h=t.updateQueue;bs=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var R=b,L=R.next;R.next=null,E===null?d=L:E.next=L,E=R;var K=t.alternate;K!==null&&(K=K.updateQueue,b=K.lastBaseUpdate,b!==E&&(b===null?K.firstBaseUpdate=L:b.next=L,K.lastBaseUpdate=R))}if(d!==null){var $=h.baseState;E=0,K=L=R=null,b=d;do{var z=b.lane&-536870913,q=z!==b.lane;if(q?(Ge&z)===z:(l&z)===z){z!==0&&z===Ra&&(Jh=!0),K!==null&&(K=K.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var xe=t,be=b;z=i;var rt=a;switch(be.tag){case 1:if(xe=be.payload,typeof xe=="function"){$=xe.call(rt,$,z);break e}$=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=be.payload,z=typeof xe=="function"?xe.call(rt,$,z):xe,z==null)break e;$=T({},$,z);break e;case 2:bs=!0}}z=b.callback,z!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[z]:q.push(z))}else q={lane:z,tag:b.tag,payload:b.payload,callback:b.callback,next:null},K===null?(L=K=q,R=$):K=K.next=q,E|=z;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;q=b,b=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);K===null&&(R=$),h.baseState=R,h.firstBaseUpdate=L,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),Ms|=E,t.lanes=E,t.memoizedState=$}}function Bg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Hg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Bg(a[t],i)}var Ca=W(null),Ru=W(0);function qg(t,i){t=$i,ne(Ru,t),ne(Ca,i),$i=t|i.baseLanes}function ef(){ne(Ru,$i),ne(Ca,Ca.current)}function tf(){$i=Ru.current,oe(Ca),oe(Ru)}var As=0,Ve=null,it=null,Rt=null,Iu=!1,Na=!1,Lr=!1,Cu=0,$o=0,Da=null,iT=0;function St(){throw Error(r(321))}function nf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!bn(t[a],i[a]))return!1;return!0}function sf(t,i,a,l,h,d){return As=d,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=t===null||t.memoizedState===null?xp:Rp,Lr=!1,d=a(l,h),Lr=!1,Na&&(d=Gg(i,a,l,h)),Fg(t),d}function Fg(t){Y.H=Vu;var i=it!==null&&it.next!==null;if(As=0,Rt=it=Ve=null,Iu=!1,$o=0,Da=null,i)throw Error(r(300));t===null||zt||(t=t.dependencies,t!==null&&bu(t)&&(zt=!0))}function Gg(t,i,a,l){Ve=t;var h=0;do{if(Na&&(Da=null),$o=0,Na=!1,25<=h)throw Error(r(301));if(h+=1,Rt=it=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=cT,d=i(a,l)}while(Na);return d}function sT(){var t=Y.H,i=t.useState()[0];return i=typeof i.then=="function"?Zo(i):i,t=t.useState()[0],(it!==null?it.memoizedState:null)!==t&&(Ve.flags|=1024),i}function rf(){var t=Cu!==0;return Cu=0,t}function af(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function of(t){if(Iu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Iu=!1}As=0,Rt=it=Ve=null,Na=!1,$o=Cu=0,Da=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ve.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function It(){if(it===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var i=Rt===null?Ve.memoizedState:Rt.next;if(i!==null)Rt=i,it=t;else{if(t===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Rt===null?Ve.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(t){var i=$o;return $o+=1,Da===null&&(Da=[]),t=Ug(Da,t,i),i=Ve,(Rt===null?i.memoizedState:Rt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?xp:Rp),t}function Nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Zo(t);if(t.$$typeof===ae)return sn(t)}throw Error(r(438,String(t)))}function uf(t){var i=null,a=Ve.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=lf(),Ve.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=k;return i.index++,a}function Fi(t,i){return typeof i=="function"?i(t):i}function Du(t){var i=It();return cf(i,it,t)}function cf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=E=null,R=null,L=i,K=!1;do{var $=L.lane&-536870913;if($!==L.lane?(Ge&$)===$:(As&$)===$){var z=L.revertLane;if(z===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),$===Ra&&(K=!0);else if((As&z)===z){L=L.next,z===Ra&&(K=!0);continue}else $={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(b=R=$,E=d):R=R.next=$,Ve.lanes|=z,Ms|=z;$=L.action,Lr&&a(d,$),d=L.hasEagerState?L.eagerState:a(d,$)}else z={lane:$,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(b=R=z,E=d):R=R.next=z,Ve.lanes|=$,Ms|=$;L=L.next}while(L!==null&&L!==i);if(R===null?E=d:R.next=b,!bn(d,t.memoizedState)&&(zt=!0,K&&(a=Ia,a!==null)))throw a;t.memoizedState=d,t.baseState=E,t.baseQueue=R,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function hf(t){var i=It(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=t(d,E.action),E=E.next;while(E!==h);bn(d,i.memoizedState)||(zt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Qg(t,i,a){var l=Ve,h=It(),d=$e;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var E=!bn((it||h).memoizedState,a);E&&(h.memoizedState=a,zt=!0),h=h.queue;var b=Xg.bind(null,l,h,t);if(Wo(2048,8,b,[t]),h.getSnapshot!==i||E||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,Ma(9,Mu(),Kg.bind(null,l,h,a,i),null),lt===null)throw Error(r(349));d||(As&124)!==0||Yg(l,i,a)}return a}function Yg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i=lf(),Ve.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Kg(t,i,a,l){i.value=a,i.getSnapshot=l,$g(i)&&Zg(t)}function Xg(t,i,a){return a(function(){$g(i)&&Zg(t)})}function $g(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!bn(t,a)}catch{return!0}}function Zg(t){var i=wa(t,2);i!==null&&In(i,t,2)}function ff(t){var i=gn();if(typeof t=="function"){var a=t;if(t=a(),Lr){Ae(!0);try{a()}finally{Ae(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:t},i}function Wg(t,i,a,l){return t.baseState=a,cf(t,it,typeof l=="function"?l:Fi)}function rT(t,i,a,l,h){if(ku(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};Y.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Jg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Jg(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=Y.T,E={};Y.T=E;try{var b=a(h,l),R=Y.S;R!==null&&R(E,b),ep(t,i,b)}catch(L){df(t,i,L)}finally{Y.T=d}}else try{d=a(h,l),ep(t,i,d)}catch(L){df(t,i,L)}}function ep(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){tp(t,i,l)},function(l){return df(t,i,l)}):tp(t,i,a)}function tp(t,i,a){i.status="fulfilled",i.value=a,np(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Jg(t,a)))}function df(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,np(i),i=i.next;while(i!==l)}t.action=null}function np(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ip(t,i){return i}function sp(t,i){if($e){var a=lt.formState;if(a!==null){e:{var l=Ve;if($e){if(_t){t:{for(var h=_t,d=di;h.nodeType!==8;){if(!d){h=null;break t}if(h=Jn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){_t=Jn(h.nextSibling),l=h.data==="F!";break e}}Vr(l)}l=!1}l&&(i=a[0])}}return a=gn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ip,lastRenderedState:i},a.queue=l,a=wp.bind(null,Ve,l),l.dispatch=a,l=ff(!1),d=_f.bind(null,Ve,!1,l.queue),l=gn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=rT.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function rp(t){var i=It();return ap(i,it,t)}function ap(t,i,a){if(i=cf(t,i,ip)[0],t=Du(Fi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Zo(i)}catch(E){throw E===Go?Au:E}else l=i;i=It();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ve.flags|=2048,Ma(9,Mu(),aT.bind(null,h,a),null)),[l,d,t]}function aT(t,i){t.action=i}function op(t){var i=It(),a=it;if(a!==null)return ap(i,a,t);It(),i=i.memoizedState,a=It();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ma(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=lf(),Ve.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Mu(){return{destroy:void 0,resource:void 0}}function lp(){return It().memoizedState}function Ou(t,i,a,l){var h=gn();l=l===void 0?null:l,Ve.flags|=t,h.memoizedState=Ma(1|i,Mu(),a,l)}function Wo(t,i,a,l){var h=It();l=l===void 0?null:l;var d=h.memoizedState.inst;it!==null&&l!==null&&nf(l,it.memoizedState.deps)?h.memoizedState=Ma(i,d,a,l):(Ve.flags|=t,h.memoizedState=Ma(1|i,d,a,l))}function up(t,i){Ou(8390656,8,t,i)}function cp(t,i){Wo(2048,8,t,i)}function hp(t,i){return Wo(4,2,t,i)}function fp(t,i){return Wo(4,4,t,i)}function dp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function mp(t,i,a){a=a!=null?a.concat([t]):null,Wo(4,4,dp.bind(null,i,t),a)}function mf(){}function gp(t,i){var a=It();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&nf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function pp(t,i){var a=It();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&nf(i,l[1]))return l[0];if(l=t(),Lr){Ae(!0);try{t()}finally{Ae(!1)}}return a.memoizedState=[l,i],l}function gf(t,i,a){return a===void 0||(As&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=vy(),Ve.lanes|=t,Ms|=t,a)}function yp(t,i,a,l){return bn(a,i)?a:Ca.current!==null?(t=gf(t,a,l),bn(t,i)||(zt=!0),t):(As&42)===0?(zt=!0,t.memoizedState=a):(t=vy(),Ve.lanes|=t,Ms|=t,i)}function _p(t,i,a,l,h){var d=re.p;re.p=d!==0&&8>d?d:8;var E=Y.T,b={};Y.T=b,_f(t,!1,i,a);try{var R=h(),L=Y.S;if(L!==null&&L(b,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=nT(R,l);Jo(t,i,K,Rn(t))}else Jo(t,i,l,Rn(t))}catch($){Jo(t,i,{then:function(){},status:"rejected",reason:$},Rn())}finally{re.p=d,Y.T=E}}function oT(){}function pf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=vp(t).queue;_p(t,h,i,me,a===null?oT:function(){return Ep(t),a(l)})}function vp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ep(t){var i=vp(t).next.queue;Jo(t,i,{},Rn())}function yf(){return sn(yl)}function Tp(){return It().memoizedState}function bp(){return It().memoizedState}function lT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();t=ws(a);var l=Ss(i,t,a);l!==null&&(In(l,i,a),Yo(l,i,a)),i={cache:Qh()},t.payload=i;return}i=i.return}}function uT(t,i,a){var l=Rn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ku(t)?Sp(i,a):(a=jh(t,i,a,l),a!==null&&(In(a,t,l),Ap(a,i,l)))}function wp(t,i,a){var l=Rn();Jo(t,i,a,l)}function Jo(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ku(t))Sp(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var E=i.lastRenderedState,b=d(E,a);if(h.hasEagerState=!0,h.eagerState=b,bn(b,E))return yu(t,i,h,0),lt===null&&pu(),!1}catch{}finally{}if(a=jh(t,i,h,l),a!==null)return In(a,t,l),Ap(a,i,l),!0}return!1}function _f(t,i,a,l){if(l={lane:2,revertLane:$f(),action:l,hasEagerState:!1,eagerState:null,next:null},ku(t)){if(i)throw Error(r(479))}else i=jh(t,a,l,2),i!==null&&In(i,t,2)}function ku(t){var i=t.alternate;return t===Ve||i!==null&&i===Ve}function Sp(t,i){Na=Iu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Ap(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,cs(t,a)}}var Vu={readContext:sn,use:Nu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},xp={readContext:sn,use:Nu,useCallback:function(t,i){return gn().memoizedState=[t,i===void 0?null:i],t},useContext:sn,useEffect:up,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Ou(4194308,4,dp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Ou(4194308,4,t,i)},useInsertionEffect:function(t,i){Ou(4,2,t,i)},useMemo:function(t,i){var a=gn();i=i===void 0?null:i;var l=t();if(Lr){Ae(!0);try{t()}finally{Ae(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=gn();if(a!==void 0){var h=a(i);if(Lr){Ae(!0);try{a(i)}finally{Ae(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=uT.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var i=gn();return t={current:t},i.memoizedState=t},useState:function(t){t=ff(t);var i=t.queue,a=wp.bind(null,Ve,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:mf,useDeferredValue:function(t,i){var a=gn();return gf(a,t,i)},useTransition:function(){var t=ff(!1);return t=_p.bind(null,Ve,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ve,h=gn();if($e){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),lt===null)throw Error(r(349));(Ge&124)!==0||Yg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,up(Xg.bind(null,l,d,t),[t]),l.flags|=2048,Ma(9,Mu(),Kg.bind(null,l,d,a,i),null),a},useId:function(){var t=gn(),i=lt.identifierPrefix;if($e){var a=Bi,l=zi;a=(l&~(1<<32-Pe(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Cu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=iT++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:yf,useFormState:sp,useActionState:sp,useOptimistic:function(t){var i=gn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=_f.bind(null,Ve,!0,a),a.dispatch=i,[t,i]},useMemoCache:uf,useCacheRefresh:function(){return gn().memoizedState=lT.bind(null,Ve)}},Rp={readContext:sn,use:Nu,useCallback:gp,useContext:sn,useEffect:cp,useImperativeHandle:mp,useInsertionEffect:hp,useLayoutEffect:fp,useMemo:pp,useReducer:Du,useRef:lp,useState:function(){return Du(Fi)},useDebugValue:mf,useDeferredValue:function(t,i){var a=It();return yp(a,it.memoizedState,t,i)},useTransition:function(){var t=Du(Fi)[0],i=It().memoizedState;return[typeof t=="boolean"?t:Zo(t),i]},useSyncExternalStore:Qg,useId:Tp,useHostTransitionStatus:yf,useFormState:rp,useActionState:rp,useOptimistic:function(t,i){var a=It();return Wg(a,it,t,i)},useMemoCache:uf,useCacheRefresh:bp},cT={readContext:sn,use:Nu,useCallback:gp,useContext:sn,useEffect:cp,useImperativeHandle:mp,useInsertionEffect:hp,useLayoutEffect:fp,useMemo:pp,useReducer:hf,useRef:lp,useState:function(){return hf(Fi)},useDebugValue:mf,useDeferredValue:function(t,i){var a=It();return it===null?gf(a,t,i):yp(a,it.memoizedState,t,i)},useTransition:function(){var t=hf(Fi)[0],i=It().memoizedState;return[typeof t=="boolean"?t:Zo(t),i]},useSyncExternalStore:Qg,useId:Tp,useHostTransitionStatus:yf,useFormState:op,useActionState:op,useOptimistic:function(t,i){var a=It();return it!==null?Wg(a,it,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:uf,useCacheRefresh:bp},Oa=null,el=0;function ju(t){var i=el;return el+=1,Oa===null&&(Oa=[]),Ug(Oa,t,i)}function tl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Pu(t,i){throw i.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Ip(t){var i=t._init;return i(t._payload)}function Cp(t){function i(j,O){if(t){var P=j.deletions;P===null?(j.deletions=[O],j.flags|=16):P.push(O)}}function a(j,O){if(!t)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function l(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function h(j,O){return j=Li(j,O),j.index=0,j.sibling=null,j}function d(j,O,P){return j.index=P,t?(P=j.alternate,P!==null?(P=P.index,P<O?(j.flags|=67108866,O):P):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function E(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function b(j,O,P,X){return O===null||O.tag!==6?(O=Uh(P,j.mode,X),O.return=j,O):(O=h(O,P),O.return=j,O)}function R(j,O,P,X){var de=P.type;return de===H?K(j,O,P.props.children,X,P.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===A&&Ip(de)===O.type)?(O=h(O,P.props),tl(O,P),O.return=j,O):(O=vu(P.type,P.key,P.props,null,j.mode,X),tl(O,P),O.return=j,O)}function L(j,O,P,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=Lh(P,j.mode,X),O.return=j,O):(O=h(O,P.children||[]),O.return=j,O)}function K(j,O,P,X,de){return O===null||O.tag!==7?(O=Dr(P,j.mode,X,de),O.return=j,O):(O=h(O,P),O.return=j,O)}function $(j,O,P){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Uh(""+O,j.mode,P),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case N:return P=vu(O.type,O.key,O.props,null,j.mode,P),tl(P,O),P.return=j,P;case B:return O=Lh(O,j.mode,P),O.return=j,O;case A:var X=O._init;return O=X(O._payload),$(j,O,P)}if(Ye(O)||V(O))return O=Dr(O,j.mode,P,null),O.return=j,O;if(typeof O.then=="function")return $(j,ju(O),P);if(O.$$typeof===ae)return $(j,wu(j,O),P);Pu(j,O)}return null}function z(j,O,P,X){var de=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return de!==null?null:b(j,O,""+P,X);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case N:return P.key===de?R(j,O,P,X):null;case B:return P.key===de?L(j,O,P,X):null;case A:return de=P._init,P=de(P._payload),z(j,O,P,X)}if(Ye(P)||V(P))return de!==null?null:K(j,O,P,X,null);if(typeof P.then=="function")return z(j,O,ju(P),X);if(P.$$typeof===ae)return z(j,O,wu(j,P),X);Pu(j,P)}return null}function q(j,O,P,X,de){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return j=j.get(P)||null,b(O,j,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case N:return j=j.get(X.key===null?P:X.key)||null,R(O,j,X,de);case B:return j=j.get(X.key===null?P:X.key)||null,L(O,j,X,de);case A:var Ue=X._init;return X=Ue(X._payload),q(j,O,P,X,de)}if(Ye(X)||V(X))return j=j.get(P)||null,K(O,j,X,de,null);if(typeof X.then=="function")return q(j,O,P,ju(X),de);if(X.$$typeof===ae)return q(j,O,P,wu(O,X),de);Pu(O,X)}return null}function xe(j,O,P,X){for(var de=null,Ue=null,_e=O,we=O=0,Ht=null;_e!==null&&we<P.length;we++){_e.index>we?(Ht=_e,_e=null):Ht=_e.sibling;var Ke=z(j,_e,P[we],X);if(Ke===null){_e===null&&(_e=Ht);break}t&&_e&&Ke.alternate===null&&i(j,_e),O=d(Ke,O,we),Ue===null?de=Ke:Ue.sibling=Ke,Ue=Ke,_e=Ht}if(we===P.length)return a(j,_e),$e&&Or(j,we),de;if(_e===null){for(;we<P.length;we++)_e=$(j,P[we],X),_e!==null&&(O=d(_e,O,we),Ue===null?de=_e:Ue.sibling=_e,Ue=_e);return $e&&Or(j,we),de}for(_e=l(_e);we<P.length;we++)Ht=q(_e,j,we,P[we],X),Ht!==null&&(t&&Ht.alternate!==null&&_e.delete(Ht.key===null?we:Ht.key),O=d(Ht,O,we),Ue===null?de=Ht:Ue.sibling=Ht,Ue=Ht);return t&&_e.forEach(function(Bs){return i(j,Bs)}),$e&&Or(j,we),de}function be(j,O,P,X){if(P==null)throw Error(r(151));for(var de=null,Ue=null,_e=O,we=O=0,Ht=null,Ke=P.next();_e!==null&&!Ke.done;we++,Ke=P.next()){_e.index>we?(Ht=_e,_e=null):Ht=_e.sibling;var Bs=z(j,_e,Ke.value,X);if(Bs===null){_e===null&&(_e=Ht);break}t&&_e&&Bs.alternate===null&&i(j,_e),O=d(Bs,O,we),Ue===null?de=Bs:Ue.sibling=Bs,Ue=Bs,_e=Ht}if(Ke.done)return a(j,_e),$e&&Or(j,we),de;if(_e===null){for(;!Ke.done;we++,Ke=P.next())Ke=$(j,Ke.value,X),Ke!==null&&(O=d(Ke,O,we),Ue===null?de=Ke:Ue.sibling=Ke,Ue=Ke);return $e&&Or(j,we),de}for(_e=l(_e);!Ke.done;we++,Ke=P.next())Ke=q(_e,j,we,Ke.value,X),Ke!==null&&(t&&Ke.alternate!==null&&_e.delete(Ke.key===null?we:Ke.key),O=d(Ke,O,we),Ue===null?de=Ke:Ue.sibling=Ke,Ue=Ke);return t&&_e.forEach(function(hb){return i(j,hb)}),$e&&Or(j,we),de}function rt(j,O,P,X){if(typeof P=="object"&&P!==null&&P.type===H&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case N:e:{for(var de=P.key;O!==null;){if(O.key===de){if(de=P.type,de===H){if(O.tag===7){a(j,O.sibling),X=h(O,P.props.children),X.return=j,j=X;break e}}else if(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===A&&Ip(de)===O.type){a(j,O.sibling),X=h(O,P.props),tl(X,P),X.return=j,j=X;break e}a(j,O);break}else i(j,O);O=O.sibling}P.type===H?(X=Dr(P.props.children,j.mode,X,P.key),X.return=j,j=X):(X=vu(P.type,P.key,P.props,null,j.mode,X),tl(X,P),X.return=j,j=X)}return E(j);case B:e:{for(de=P.key;O!==null;){if(O.key===de)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){a(j,O.sibling),X=h(O,P.children||[]),X.return=j,j=X;break e}else{a(j,O);break}else i(j,O);O=O.sibling}X=Lh(P,j.mode,X),X.return=j,j=X}return E(j);case A:return de=P._init,P=de(P._payload),rt(j,O,P,X)}if(Ye(P))return xe(j,O,P,X);if(V(P)){if(de=V(P),typeof de!="function")throw Error(r(150));return P=de.call(P),be(j,O,P,X)}if(typeof P.then=="function")return rt(j,O,ju(P),X);if(P.$$typeof===ae)return rt(j,O,wu(j,P),X);Pu(j,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,O!==null&&O.tag===6?(a(j,O.sibling),X=h(O,P),X.return=j,j=X):(a(j,O),X=Uh(P,j.mode,X),X.return=j,j=X),E(j)):a(j,O)}return function(j,O,P,X){try{el=0;var de=rt(j,O,P,X);return Oa=null,de}catch(_e){if(_e===Go||_e===Au)throw _e;var Ue=wn(29,_e,null,j.mode);return Ue.lanes=X,Ue.return=j,Ue}finally{}}}var ka=Cp(!0),Np=Cp(!1),Un=W(null),mi=null;function xs(t){var i=t.alternate;ne(Vt,Vt.current&1),ne(Un,t),mi===null&&(i===null||Ca.current!==null||i.memoizedState!==null)&&(mi=t)}function Dp(t){if(t.tag===22){if(ne(Vt,Vt.current),ne(Un,t),mi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(mi=t)}}else Rs()}function Rs(){ne(Vt,Vt.current),ne(Un,Un.current)}function Gi(t){oe(Un),mi===t&&(mi=null),oe(Vt)}var Vt=W(0);function Uu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ld(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function vf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ef={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Rn(),h=ws(l);h.payload=i,a!=null&&(h.callback=a),i=Ss(t,h,l),i!==null&&(In(i,t,l),Yo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Rn(),h=ws(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ss(t,h,l),i!==null&&(In(i,t,l),Yo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Rn(),l=ws(a);l.tag=2,i!=null&&(l.callback=i),i=Ss(t,l,a),i!==null&&(In(i,t,a),Yo(i,t,a))}};function Mp(t,i,a,l,h,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):i.prototype&&i.prototype.isPureReactComponent?!Po(a,l)||!Po(h,d):!0}function Op(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Ef.enqueueReplaceState(i,i.state,null)}function zr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function kp(t){Lu(t)}function Vp(t){console.error(t)}function jp(t){Lu(t)}function zu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Pp(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Tf(t,i,a){return a=ws(a),a.tag=3,a.payload={element:null},a.callback=function(){zu(t,i)},a}function Up(t){return t=ws(t),t.tag=3,t}function Lp(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Pp(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){Pp(i,a,l),typeof h!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function hT(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ho(i,a,h,!0),a=Un.current,a!==null){switch(a.tag){case 13:return mi===null?Gf():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Xh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Yf(t,l,h)),!1;case 22:return a.flags|=65536,l===Xh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Yf(t,l,h)),!1}throw Error(r(435,a.tag))}return Yf(t,l,h),Gf(),!1}if($e)return i=Un.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Hh&&(t=Error(r(422),{cause:l}),Bo(kn(t,a)))):(l!==Hh&&(i=Error(r(423),{cause:l}),Bo(kn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=kn(l,a),h=Tf(t.stateNode,l,h),Wh(t,h),vt!==4&&(vt=2)),!1;var d=Error(r(520),{cause:l});if(d=kn(d,a),ll===null?ll=[d]:ll.push(d),vt!==4&&(vt=2),i===null)return!0;l=kn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Tf(a.stateNode,l,t),Wh(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Os===null||!Os.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Up(h),Lp(h,t,a,l),Wh(a,h),!1}a=a.return}while(a!==null);return!1}var zp=Error(r(461)),zt=!1;function Yt(t,i,a,l){i.child=t===null?Np(i,null,a,l):ka(i,t.child,a,l)}function Bp(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return Pr(i),l=sf(t,i,a,E,d,h),b=rf(),t!==null&&!zt?(af(t,i,h),Qi(t,i,h)):($e&&b&&zh(i),i.flags|=1,Yt(t,i,l,h),i.child)}function Hp(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Ph(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,qp(t,i,d,l,h)):(t=vu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Cf(t,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Po,a(E,l)&&t.ref===i.ref)return Qi(t,i,h)}return i.flags|=1,t=Li(d,l),t.ref=i.ref,t.return=i,i.child=t}function qp(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Po(d,l)&&t.ref===i.ref)if(zt=!1,i.pendingProps=l=d,Cf(t,h))(t.flags&131072)!==0&&(zt=!0);else return i.lanes=t.lanes,Qi(t,i,h)}return bf(t,i,a,l,h)}function Fp(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Gp(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Su(i,d!==null?d.cachePool:null),d!==null?qg(i,d):ef(),Dp(i);else return i.lanes=i.childLanes=536870912,Gp(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Su(i,d.cachePool),qg(i,d),Rs(),i.memoizedState=null):(t!==null&&Su(i,null),ef(),Rs());return Yt(t,i,h,a),i.child}function Gp(t,i,a,l){var h=Kh();return h=h===null?null:{parent:kt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Su(i,null),ef(),Dp(i),t!==null&&Ho(t,i,l,!0),null}function Bu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function bf(t,i,a,l,h){return Pr(i),a=sf(t,i,a,l,void 0,h),l=rf(),t!==null&&!zt?(af(t,i,h),Qi(t,i,h)):($e&&l&&zh(i),i.flags|=1,Yt(t,i,a,h),i.child)}function Qp(t,i,a,l,h,d){return Pr(i),i.updateQueue=null,a=Gg(i,l,a,h),Fg(t),l=rf(),t!==null&&!zt?(af(t,i,d),Qi(t,i,d)):($e&&l&&zh(i),i.flags|=1,Yt(t,i,a,d),i.child)}function Yp(t,i,a,l,h){if(Pr(i),i.stateNode===null){var d=Sa,E=a.contextType;typeof E=="object"&&E!==null&&(d=sn(E)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ef,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},$h(i),E=a.contextType,d.context=typeof E=="object"&&E!==null?sn(E):Sa,d.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(vf(i,a,E,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&Ef.enqueueReplaceState(d,d.state,null),Xo(i,l,d,h),Ko(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,R=zr(a,b);d.props=R;var L=d.context,K=a.contextType;E=Sa,typeof K=="object"&&K!==null&&(E=sn(K));var $=a.getDerivedStateFromProps;K=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||L!==E)&&Op(i,d,l,E),bs=!1;var z=i.memoizedState;d.state=z,Xo(i,l,d,h),Ko(),L=i.memoizedState,b||z!==L||bs?(typeof $=="function"&&(vf(i,a,$,l),L=i.memoizedState),(R=bs||Mp(i,a,R,l,z,L,E))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=L),d.props=l,d.state=L,d.context=E,l=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Zh(t,i),E=i.memoizedProps,K=zr(a,E),d.props=K,$=i.pendingProps,z=d.context,L=a.contextType,R=Sa,typeof L=="object"&&L!==null&&(R=sn(L)),b=a.getDerivedStateFromProps,(L=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==$||z!==R)&&Op(i,d,l,R),bs=!1,z=i.memoizedState,d.state=z,Xo(i,l,d,h),Ko();var q=i.memoizedState;E!==$||z!==q||bs||t!==null&&t.dependencies!==null&&bu(t.dependencies)?(typeof b=="function"&&(vf(i,a,b,l),q=i.memoizedState),(K=bs||Mp(i,a,K,l,z,q,R)||t!==null&&t.dependencies!==null&&bu(t.dependencies))?(L||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,q,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,q,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=R,l=K):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Bu(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=ka(i,t.child,null,h),i.child=ka(i,null,a,h)):Yt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Qi(t,i,h),t}function Kp(t,i,a,l){return zo(),i.flags|=256,Yt(t,i,a,l),i.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(t){return{baseLanes:t,cachePool:Vg()}}function Af(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Ln),t}function Xp(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),E&&(h=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if($e){if(h?xs(i):Rs(),$e){var b=_t,R;if(R=b){e:{for(R=b,b=di;R.nodeType!==8;){if(!b){b=null;break e}if(R=Jn(R.nextSibling),R===null){b=null;break e}}b=R}b!==null?(i.memoizedState={dehydrated:b,treeContext:Mr!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},R=wn(18,null,null,0),R.stateNode=b,R.return=i,i.child=R,dn=i,_t=null,R=!0):R=!1}R||Vr(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return ld(b)?i.lanes=32:i.lanes=536870912,null;Gi(i)}return b=l.children,l=l.fallback,h?(Rs(),h=i.mode,b=Hu({mode:"hidden",children:b},h),l=Dr(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,h=i.child,h.memoizedState=Sf(a),h.childLanes=Af(t,E,a),i.memoizedState=wf,l):(xs(i),xf(i,b))}if(R=t.memoizedState,R!==null&&(b=R.dehydrated,b!==null)){if(d)i.flags&256?(xs(i),i.flags&=-257,i=Rf(t,i,a)):i.memoizedState!==null?(Rs(),i.child=t.child,i.flags|=128,i=null):(Rs(),h=l.fallback,b=i.mode,l=Hu({mode:"visible",children:l.children},b),h=Dr(h,b,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,ka(i,t.child,null,a),l=i.child,l.memoizedState=Sf(a),l.childLanes=Af(t,E,a),i.memoizedState=wf,i=h);else if(xs(i),ld(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var L=E.dgst;E=L,l=Error(r(419)),l.stack="",l.digest=E,Bo({value:l,source:null,stack:null}),i=Rf(t,i,a)}else if(zt||Ho(t,i,a,!1),E=(a&t.childLanes)!==0,zt||E){if(E=lt,E!==null&&(l=a&-a,l=(l&42)!==0?1:Eo(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,wa(t,l),In(E,t,l),zp;b.data==="$?"||Gf(),i=Rf(t,i,a)}else b.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=R.treeContext,_t=Jn(b.nextSibling),dn=i,$e=!0,kr=null,di=!1,t!==null&&(jn[Pn++]=zi,jn[Pn++]=Bi,jn[Pn++]=Mr,zi=t.id,Bi=t.overflow,Mr=i),i=xf(i,l.children),i.flags|=4096);return i}return h?(Rs(),h=l.fallback,b=i.mode,R=t.child,L=R.sibling,l=Li(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,L!==null?h=Li(L,h):(h=Dr(h,b,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,b=t.child.memoizedState,b===null?b=Sf(a):(R=b.cachePool,R!==null?(L=kt._currentValue,R=R.parent!==L?{parent:L,pool:L}:R):R=Vg(),b={baseLanes:b.baseLanes|a,cachePool:R}),h.memoizedState=b,h.childLanes=Af(t,E,a),i.memoizedState=wf,l):(xs(i),a=t.child,t=a.sibling,a=Li(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function xf(t,i){return i=Hu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Hu(t,i){return t=wn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Rf(t,i,a){return ka(i,t.child,null,a),t=xf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function $p(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Fh(t.return,i,a)}function If(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Zp(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Yt(t,i,l.children,a),l=Vt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$p(t,a,i);else if(t.tag===19)$p(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ne(Vt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Uu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),If(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Uu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}If(i,!0,a,null,d);break;case"together":If(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Qi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ms|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ho(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Li(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Li(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Cf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&bu(t)))}function fT(t,i,a){switch(i.tag){case 3:Fe(i,i.stateNode.containerInfo),Ts(i,kt,t.memoizedState.cache),zo();break;case 27:case 5:Hn(i);break;case 4:Fe(i,i.stateNode.containerInfo);break;case 10:Ts(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(xs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Xp(t,i,a):(xs(i),t=Qi(t,i,a),t!==null?t.sibling:null);xs(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ho(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Zp(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ne(Vt,Vt.current),l)break;return null;case 22:case 23:return i.lanes=0,Fp(t,i,a);case 24:Ts(i,kt,t.memoizedState.cache)}return Qi(t,i,a)}function Wp(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)zt=!0;else{if(!Cf(t,a)&&(i.flags&128)===0)return zt=!1,fT(t,i,a);zt=(t.flags&131072)!==0}else zt=!1,$e&&(i.flags&1048576)!==0&&Ig(i,Tu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Ph(l)?(t=zr(l,t),i.tag=1,i=Yp(null,i,l,t,a)):(i.tag=0,i=bf(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ve){i.tag=11,i=Bp(null,i,l,t,a);break e}else if(h===x){i.tag=14,i=Hp(null,i,l,t,a);break e}}throw i=Xe(l)||l,Error(r(306,i,""))}}return i;case 0:return bf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=zr(l,i.pendingProps),Yp(t,i,l,h,a);case 3:e:{if(Fe(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Zh(t,i),Xo(i,l,null,a);var E=i.memoizedState;if(l=E.cache,Ts(i,kt,l),l!==d.cache&&Gh(i,[kt],a,!0),Ko(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Kp(t,i,l,a);break e}else if(l!==h){h=kn(Error(r(424)),i),Bo(h),i=Kp(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=Jn(t.firstChild),dn=i,$e=!0,kr=null,di=!0,a=Np(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zo(),l===h){i=Qi(t,i,a);break e}Yt(t,i,l,a)}i=i.child}return i;case 26:return Bu(t,i),t===null?(a=n0(i.type,null,i.pendingProps,null))?i.memoizedState=a:$e||(a=i.type,t=i.pendingProps,l=nc(Ee.current).createElement(a),l[Tt]=i,l[Qt]=t,Xt(l,a,t),bt(l),i.stateNode=l):i.memoizedState=n0(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Hn(i),t===null&&$e&&(l=i.stateNode=Jy(i.type,i.pendingProps,Ee.current),dn=i,di=!0,h=_t,js(i.type)?(ud=h,_t=Jn(l.firstChild)):_t=h),Yt(t,i,i.pendingProps.children,a),Bu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&$e&&((h=l=_t)&&(l=zT(l,i.type,i.pendingProps,di),l!==null?(i.stateNode=l,dn=i,_t=Jn(l.firstChild),di=!1,h=!0):h=!1),h||Vr(i)),Hn(i),h=i.type,d=i.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,rd(h,d)?l=null:E!==null&&rd(h,E)&&(i.flags|=32),i.memoizedState!==null&&(h=sf(t,i,sT,null,null,a),yl._currentValue=h),Bu(t,i),Yt(t,i,l,a),i.child;case 6:return t===null&&$e&&((t=a=_t)&&(a=BT(a,i.pendingProps,di),a!==null?(i.stateNode=a,dn=i,_t=null,t=!0):t=!1),t||Vr(i)),null;case 13:return Xp(t,i,a);case 4:return Fe(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=ka(i,null,l,a):Yt(t,i,l,a),i.child;case 11:return Bp(t,i,i.type,i.pendingProps,a);case 7:return Yt(t,i,i.pendingProps,a),i.child;case 8:return Yt(t,i,i.pendingProps.children,a),i.child;case 12:return Yt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ts(i,i.type,l.value),Yt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Pr(i),h=sn(h),l=l(h),i.flags|=1,Yt(t,i,l,a),i.child;case 14:return Hp(t,i,i.type,i.pendingProps,a);case 15:return qp(t,i,i.type,i.pendingProps,a);case 19:return Zp(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Hu(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Li(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Fp(t,i,a);case 24:return Pr(i),l=sn(kt),t===null?(h=Kh(),h===null&&(h=lt,d=Qh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},$h(i),Ts(i,kt,h)):((t.lanes&a)!==0&&(Zh(t,i),Xo(i,null,null,a),Ko()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ts(i,kt,l)):(l=d.cache,Ts(i,kt,l),l!==h.cache&&Gh(i,[kt],a,!0))),Yt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Yi(t){t.flags|=4}function Jp(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!o0(i)){if(i=Un.current,i!==null&&((Ge&4194048)===Ge?mi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||i!==mi))throw Qo=Xh,jg;t.flags|=8192}}function qu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?ls():536870912,t.lanes|=i,Ua|=i)}function nl(t,i){if(!$e)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function gt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function dT(t,i,a){var l=i.pendingProps;switch(Bh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(i),null;case 1:return gt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),qi(kt),Dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Lo(i)?Yi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dg())),gt(i),null;case 26:return a=i.memoizedState,t===null?(Yi(i),a!==null?(gt(i),Jp(i,a)):(gt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Yi(i),gt(i),Jp(i,a)):(gt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Yi(i),gt(i),i.flags&=-16777217),null;case 27:qn(i),a=Ee.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Yi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return gt(i),null}t=ce.current,Lo(i)?Cg(i):(t=Jy(h,l,a),i.stateNode=t,Yi(i))}return gt(i),null;case 5:if(qn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Yi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return gt(i),null}if(t=ce.current,Lo(i))Cg(i);else{switch(h=nc(Ee.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Tt]=i,t[Qt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Xt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Yi(i)}}return gt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Yi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=Ee.current,Lo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=dn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Tt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Qy(t.nodeValue,a)),t||Vr(i)}else t=nc(t).createTextNode(l),t[Tt]=i,i.stateNode=t}return gt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Lo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Tt]=i}else zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gt(i),h=!1}else h=Dg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Gi(i),i):(Gi(i),null)}if(Gi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),qu(i,i.updateQueue),gt(i),null;case 4:return Dt(),t===null&&ed(i.stateNode.containerInfo),gt(i),null;case 10:return qi(i.type),gt(i),null;case 19:if(oe(Vt),h=i.memoizedState,h===null)return gt(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)nl(h,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Uu(t),d!==null){for(i.flags|=128,nl(h,!1),t=d.updateQueue,i.updateQueue=t,qu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Rg(a,t),a=a.sibling;return ne(Vt,Vt.current&1|2),i.child}t=t.sibling}h.tail!==null&&Mt()>Qu&&(i.flags|=128,l=!0,nl(h,!1),i.lanes=4194304)}else{if(!l)if(t=Uu(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,qu(i,t),nl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!$e)return gt(i),null}else 2*Mt()-h.renderingStartTime>Qu&&a!==536870912&&(i.flags|=128,l=!0,nl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Mt(),i.sibling=null,t=Vt.current,ne(Vt,l?t&1|2:t&1),i):(gt(i),null);case 22:case 23:return Gi(i),tf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(gt(i),i.subtreeFlags&6&&(i.flags|=8192)):gt(i),a=i.updateQueue,a!==null&&qu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&oe(Ur),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),qi(kt),gt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function mT(t,i){switch(Bh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return qi(kt),Dt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return qn(i),null;case 13:if(Gi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));zo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return oe(Vt),null;case 4:return Dt(),null;case 10:return qi(i.type),null;case 22:case 23:return Gi(i),tf(),t!==null&&oe(Ur),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return qi(kt),null;case 25:return null;default:return null}}function ey(t,i){switch(Bh(i),i.tag){case 3:qi(kt),Dt();break;case 26:case 27:case 5:qn(i);break;case 4:Dt();break;case 13:Gi(i);break;case 19:oe(Vt);break;case 10:qi(i.type);break;case 22:case 23:Gi(i),tf(),t!==null&&oe(Ur);break;case 24:qi(kt)}}function il(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(b){at(i,i.return,b)}}function Is(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,h=i;var R=a,L=b;try{L()}catch(K){at(h,R,K)}}}l=l.next}while(l!==d)}}catch(K){at(i,i.return,K)}}function ty(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Hg(i,a)}catch(l){at(t,t.return,l)}}}function ny(t,i,a){a.props=zr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){at(t,i,l)}}function sl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){at(t,i,h)}}function gi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){at(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){at(t,i,h)}else a.current=null}function iy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){at(t,t.return,h)}}function Nf(t,i,a){try{var l=t.stateNode;VT(l,t.type,a,i),l[Qt]=i}catch(h){at(t,t.return,h)}}function sy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&js(t.type)||t.tag===4}function Df(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=tc));else if(l!==4&&(l===27&&js(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Mf(t,i,a),t=t.sibling;t!==null;)Mf(t,i,a),t=t.sibling}function Fu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&js(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Fu(t,i,a),t=t.sibling;t!==null;)Fu(t,i,a),t=t.sibling}function ry(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Xt(i,l,a),i[Tt]=t,i[Qt]=a}catch(d){at(t,t.return,d)}}var Ki=!1,At=!1,Of=!1,ay=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function gT(t,i){if(t=t.containerInfo,id=lc,t=yg(t),Nh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var E=0,b=-1,R=-1,L=0,K=0,$=t,z=null;t:for(;;){for(var q;$!==a||h!==0&&$.nodeType!==3||(b=E+h),$!==d||l!==0&&$.nodeType!==3||(R=E+l),$.nodeType===3&&(E+=$.nodeValue.length),(q=$.firstChild)!==null;)z=$,$=q;for(;;){if($===t)break t;if(z===a&&++L===h&&(b=E),z===d&&++K===l&&(R=E),(q=$.nextSibling)!==null)break;$=z,z=$.parentNode}$=q}a=b===-1||R===-1?null:{start:b,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(sd={focusedElem:t,selectionRange:a},lc=!1,Bt=i;Bt!==null;)if(i=Bt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Bt=t;else for(;Bt!==null;){switch(i=Bt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var xe=zr(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(xe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){at(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)od(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":od(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Bt=t;break}Bt=i.return}}function oy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Cs(t,a),l&4&&il(5,a);break;case 1:if(Cs(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){at(a,a.return,E)}else{var h=zr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){at(a,a.return,E)}}l&64&&ty(a),l&512&&sl(a,a.return);break;case 3:if(Cs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Hg(t,i)}catch(E){at(a,a.return,E)}}break;case 27:i===null&&l&4&&ry(a);case 26:case 5:Cs(t,a),i===null&&l&4&&iy(a),l&512&&sl(a,a.return);break;case 12:Cs(t,a);break;case 13:Cs(t,a),l&4&&cy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ST.bind(null,a),HT(t,a))));break;case 22:if(l=a.memoizedState!==null||Ki,!l){i=i!==null&&i.memoizedState!==null||At,h=Ki;var d=At;Ki=l,(At=i)&&!d?Ns(t,a,(a.subtreeFlags&8772)!==0):Cs(t,a),Ki=h,At=d}break;case 30:break;default:Cs(t,a)}}function ly(t){var i=t.alternate;i!==null&&(t.alternate=null,ly(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&la(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ft=null,pn=!1;function Xi(t,i,a){for(a=a.child;a!==null;)uy(t,i,a),a=a.sibling}function uy(t,i,a){if(le&&typeof le.onCommitFiberUnmount=="function")try{le.onCommitFiberUnmount(fe,a)}catch{}switch(a.tag){case 26:At||gi(a,i),Xi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||gi(a,i);var l=ft,h=pn;js(a.type)&&(ft=a.stateNode,pn=!1),Xi(t,i,a),dl(a.stateNode),ft=l,pn=h;break;case 5:At||gi(a,i);case 6:if(l=ft,h=pn,ft=null,Xi(t,i,a),ft=l,pn=h,ft!==null)if(pn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(d){at(a,i,d)}else try{ft.removeChild(a.stateNode)}catch(d){at(a,i,d)}break;case 18:ft!==null&&(pn?(t=ft,Zy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Tl(t)):Zy(ft,a.stateNode));break;case 4:l=ft,h=pn,ft=a.stateNode.containerInfo,pn=!0,Xi(t,i,a),ft=l,pn=h;break;case 0:case 11:case 14:case 15:At||Is(2,a,i),At||Is(4,a,i),Xi(t,i,a);break;case 1:At||(gi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ny(a,i,l)),Xi(t,i,a);break;case 21:Xi(t,i,a);break;case 22:At=(l=At)||a.memoizedState!==null,Xi(t,i,a),At=l;break;default:Xi(t,i,a)}}function cy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Tl(t)}catch(a){at(i,i.return,a)}}function pT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ay),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ay),i;default:throw Error(r(435,t.tag))}}function kf(t,i){var a=pT(t);i.forEach(function(l){var h=AT.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Sn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,E=i,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(js(b.type)){ft=b.stateNode,pn=!1;break e}break;case 5:ft=b.stateNode,pn=!1;break e;case 3:case 4:ft=b.stateNode.containerInfo,pn=!0;break e}b=b.return}if(ft===null)throw Error(r(160));uy(d,E,h),ft=null,pn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)hy(i,t),i=i.sibling}var Wn=null;function hy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(i,t),An(t),l&4&&(Is(3,t,t.return),il(3,t),Is(5,t,t.return));break;case 1:Sn(i,t),An(t),l&512&&(At||a===null||gi(a,a.return)),l&64&&Ki&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Wn;if(Sn(i,t),An(t),l&512&&(At||a===null||gi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[hs]||d[Tt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Xt(d,l,a),d[Tt]=t,bt(d),l=d;break e;case"link":var E=r0("link","href",h).get(l+(a.href||""));if(E){for(var b=0;b<E.length;b++)if(d=E[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(b,1);break t}}d=h.createElement(l),Xt(d,l,a),h.head.appendChild(d);break;case"meta":if(E=r0("meta","content",h).get(l+(a.content||""))){for(b=0;b<E.length;b++)if(d=E[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(b,1);break t}}d=h.createElement(l),Xt(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Tt]=t,bt(d),l=d}t.stateNode=l}else a0(h,t.type,t.stateNode);else t.stateNode=s0(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?a0(h,t.type,t.stateNode):s0(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Sn(i,t),An(t),l&512&&(At||a===null||gi(a,a.return)),a!==null&&l&4&&Nf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Sn(i,t),An(t),l&512&&(At||a===null||gi(a,a.return)),t.flags&32){h=t.stateNode;try{Mn(h,"")}catch(q){at(t,t.return,q)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Nf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Of=!0);break;case 6:if(Sn(i,t),An(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(q){at(t,t.return,q)}}break;case 3:if(rc=null,h=Wn,Wn=ic(i.containerInfo),Sn(i,t),Wn=h,An(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Tl(i.containerInfo)}catch(q){at(t,t.return,q)}Of&&(Of=!1,fy(t));break;case 4:l=Wn,Wn=ic(t.stateNode.containerInfo),Sn(i,t),An(t),Wn=l;break;case 12:Sn(i,t),An(t);break;case 13:Sn(i,t),An(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zf=Mt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,kf(t,l)));break;case 22:h=t.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,L=Ki,K=At;if(Ki=L||h,At=K||R,Sn(i,t),At=K,Ki=L,An(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||Ki||At||Br(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(d=R.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=R.stateNode;var $=R.memoizedProps.style,z=$!=null&&$.hasOwnProperty("display")?$.display:null;b.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(q){at(R,R.return,q)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(q){at(R,R.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,kf(t,a))));break;case 19:Sn(i,t),An(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,kf(t,l)));break;case 30:break;case 21:break;default:Sn(i,t),An(t)}}function An(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(sy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Df(t);Fu(t,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(Mn(E,""),a.flags&=-33);var b=Df(t);Fu(t,b,E);break;case 3:case 4:var R=a.stateNode.containerInfo,L=Df(t);Mf(t,L,R);break;default:throw Error(r(161))}}catch(K){at(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;fy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Cs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)oy(t,i.alternate,i),i=i.sibling}function Br(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Is(4,i,i.return),Br(i);break;case 1:gi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ny(i,i.return,a),Br(i);break;case 27:dl(i.stateNode);case 26:case 5:gi(i,i.return),Br(i);break;case 22:i.memoizedState===null&&Br(i);break;case 30:Br(i);break;default:Br(i)}t=t.sibling}}function Ns(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,E=d.flags;switch(d.tag){case 0:case 11:case 15:Ns(h,d,a),il(4,d);break;case 1:if(Ns(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){at(l,l.return,L)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Bg(R[h],b)}catch(L){at(l,l.return,L)}}a&&E&64&&ty(d),sl(d,d.return);break;case 27:ry(d);case 26:case 5:Ns(h,d,a),a&&l===null&&E&4&&iy(d),sl(d,d.return);break;case 12:Ns(h,d,a);break;case 13:Ns(h,d,a),a&&E&4&&cy(h,d);break;case 22:d.memoizedState===null&&Ns(h,d,a),sl(d,d.return);break;case 30:break;default:Ns(h,d,a)}i=i.sibling}}function Vf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&qo(a))}function jf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t))}function pi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dy(t,i,a,l),i=i.sibling}function dy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:pi(t,i,a,l),h&2048&&il(9,i);break;case 1:pi(t,i,a,l);break;case 3:pi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&qo(t)));break;case 12:if(h&2048){pi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,E=d.id,b=d.onPostCommit;typeof b=="function"&&b(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){at(i,i.return,R)}}else pi(t,i,a,l);break;case 13:pi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,E=i.alternate,i.memoizedState!==null?d._visibility&2?pi(t,i,a,l):rl(t,i):d._visibility&2?pi(t,i,a,l):(d._visibility|=2,Va(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Vf(E,i);break;case 24:pi(t,i,a,l),h&2048&&jf(i.alternate,i);break;default:pi(t,i,a,l)}}function Va(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,E=i,b=a,R=l,L=E.flags;switch(E.tag){case 0:case 11:case 15:Va(d,E,b,R,h),il(8,E);break;case 23:break;case 22:var K=E.stateNode;E.memoizedState!==null?K._visibility&2?Va(d,E,b,R,h):rl(d,E):(K._visibility|=2,Va(d,E,b,R,h)),h&&L&2048&&Vf(E.alternate,E);break;case 24:Va(d,E,b,R,h),h&&L&2048&&jf(E.alternate,E);break;default:Va(d,E,b,R,h)}i=i.sibling}}function rl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:rl(a,l),h&2048&&Vf(l.alternate,l);break;case 24:rl(a,l),h&2048&&jf(l.alternate,l);break;default:rl(a,l)}i=i.sibling}}var al=8192;function ja(t){if(t.subtreeFlags&al)for(t=t.child;t!==null;)my(t),t=t.sibling}function my(t){switch(t.tag){case 26:ja(t),t.flags&al&&t.memoizedState!==null&&tb(Wn,t.memoizedState,t.memoizedProps);break;case 5:ja(t);break;case 3:case 4:var i=Wn;Wn=ic(t.stateNode.containerInfo),ja(t),Wn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=al,al=16777216,ja(t),al=i):ja(t));break;default:ja(t)}}function gy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function ol(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Bt=l,yy(l,t)}gy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)py(t),t=t.sibling}function py(t){switch(t.tag){case 0:case 11:case 15:ol(t),t.flags&2048&&Is(9,t,t.return);break;case 3:ol(t);break;case 12:ol(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Gu(t)):ol(t);break;default:ol(t)}}function Gu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Bt=l,yy(l,t)}gy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Is(8,i,i.return),Gu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Gu(i));break;default:Gu(i)}t=t.sibling}}function yy(t,i){for(;Bt!==null;){var a=Bt;switch(a.tag){case 0:case 11:case 15:Is(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:qo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Bt=l;else e:for(a=t;Bt!==null;){l=Bt;var h=l.sibling,d=l.return;if(ly(l),l===a){Bt=null;break e}if(h!==null){h.return=d,Bt=h;break e}Bt=d}}}var yT={getCacheForType:function(t){var i=sn(kt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},_T=typeof WeakMap=="function"?WeakMap:Map,Je=0,lt=null,Le=null,Ge=0,et=0,xn=null,Ds=!1,Pa=!1,Pf=!1,$i=0,vt=0,Ms=0,Hr=0,Uf=0,Ln=0,Ua=0,ll=null,yn=null,Lf=!1,zf=0,Qu=1/0,Yu=null,Os=null,Kt=0,ks=null,La=null,za=0,Bf=0,Hf=null,_y=null,ul=0,qf=null;function Rn(){if((Je&2)!==0&&Ge!==0)return Ge&-Ge;if(Y.T!==null){var t=Ra;return t!==0?t:$f()}return Mi()}function vy(){Ln===0&&(Ln=(Ge&536870912)===0||$e?vo():536870912);var t=Un.current;return t!==null&&(t.flags|=32),Ln}function In(t,i,a){(t===lt&&(et===2||et===9)||t.cancelPendingCommit!==null)&&(Ba(t,0),Vs(t,Ge,Ln,!1)),Et(t,a),((Je&2)===0||t!==lt)&&(t===lt&&((Je&2)===0&&(Hr|=a),vt===4&&Vs(t,Ge,Ln,!1)),yi(t))}function Ey(t,i,a){if((Je&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||os(t,i),h=l?TT(t,i):Qf(t,i,!0),d=l;do{if(h===0){Pa&&!l&&Vs(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!vT(a)){h=Qf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var b=t;h=ll;var R=b.current.memoizedState.isDehydrated;if(R&&(Ba(b,E).flags|=256),E=Qf(b,E,!1),E!==2){if(Pf&&!R){b.errorRecoveryDisabledLanes|=d,Hr|=d,h=4;break e}d=yn,yn=h,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Ba(t,0),Vs(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Vs(l,i,Ln,!Ds);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=zf+300-Mt(),10<h)){if(Vs(l,i,Ln,!Ds),Nn(l,0,!0)!==0)break e;l.timeoutHandle=Xy(Ty.bind(null,l,a,yn,Yu,Lf,i,Ln,Hr,Ua,Ds,d,2,-0,0),h);break e}Ty(l,a,yn,Yu,Lf,i,Ln,Hr,Ua,Ds,d,0,-0,0)}}break}while(!0);yi(t)}function Ty(t,i,a,l,h,d,E,b,R,L,K,$,z,q){if(t.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:eb},my(i),$=nb(),$!==null)){t.cancelPendingCommit=$(Iy.bind(null,t,i,d,a,l,h,E,b,R,K,1,z,q)),Vs(t,d,E,!L);return}Iy(t,i,d,a,l,h,E,b,R)}function vT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!bn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vs(t,i,a,l){i&=~Uf,i&=~Hr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Pe(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&us(t,a,i)}function Ku(){return(Je&6)===0?(cl(0),!1):!0}function Ff(){if(Le!==null){if(et===0)var t=Le.return;else t=Le,Hi=jr=null,of(t),Oa=null,el=0,t=Le;for(;t!==null;)ey(t.alternate,t),t=t.return;Le=null}}function Ba(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,PT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ff(),lt=t,Le=a=Li(t.current,null),Ge=i,et=0,xn=null,Ds=!1,Pa=os(t,i),Pf=!1,Ua=Ln=Uf=Hr=Ms=vt=0,yn=ll=null,Lf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Pe(l),d=1<<h;i|=t[h],l&=~d}return $i=i,pu(),a}function by(t,i){Ve=null,Y.H=Vu,i===Go||i===Au?(i=Lg(),et=3):i===jg?(i=Lg(),et=4):et=i===zp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,xn=i,Le===null&&(vt=1,zu(t,kn(i,t.current)))}function wy(){var t=Y.H;return Y.H=Vu,t===null?Vu:t}function Sy(){var t=Y.A;return Y.A=yT,t}function Gf(){vt=4,Ds||(Ge&4194048)!==Ge&&Un.current!==null||(Pa=!0),(Ms&134217727)===0&&(Hr&134217727)===0||lt===null||Vs(lt,Ge,Ln,!1)}function Qf(t,i,a){var l=Je;Je|=2;var h=wy(),d=Sy();(lt!==t||Ge!==i)&&(Yu=null,Ba(t,i)),i=!1;var E=vt;e:do try{if(et!==0&&Le!==null){var b=Le,R=xn;switch(et){case 8:Ff(),E=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(i=!0);var L=et;if(et=0,xn=null,Ha(t,b,R,L),a&&Pa){E=0;break e}break;default:L=et,et=0,xn=null,Ha(t,b,R,L)}}ET(),E=vt;break}catch(K){by(t,K)}while(!0);return i&&t.shellSuspendCounter++,Hi=jr=null,Je=l,Y.H=h,Y.A=d,Le===null&&(lt=null,Ge=0,pu()),E}function ET(){for(;Le!==null;)Ay(Le)}function TT(t,i){var a=Je;Je|=2;var l=wy(),h=Sy();lt!==t||Ge!==i?(Yu=null,Qu=Mt()+500,Ba(t,i)):Pa=os(t,i);e:do try{if(et!==0&&Le!==null){i=Le;var d=xn;t:switch(et){case 1:et=0,xn=null,Ha(t,i,d,1);break;case 2:case 9:if(Pg(d)){et=0,xn=null,xy(i);break}i=function(){et!==2&&et!==9||lt!==t||(et=7),yi(t)},d.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:Pg(d)?(et=0,xn=null,xy(i)):(et=0,xn=null,Ha(t,i,d,7));break;case 5:var E=null;switch(Le.tag){case 26:E=Le.memoizedState;case 5:case 27:var b=Le;if(!E||o0(E)){et=0,xn=null;var R=b.sibling;if(R!==null)Le=R;else{var L=b.return;L!==null?(Le=L,Xu(L)):Le=null}break t}}et=0,xn=null,Ha(t,i,d,5);break;case 6:et=0,xn=null,Ha(t,i,d,6);break;case 8:Ff(),vt=6;break e;default:throw Error(r(462))}}bT();break}catch(K){by(t,K)}while(!0);return Hi=jr=null,Y.H=l,Y.A=h,Je=a,Le!==null?0:(lt=null,Ge=0,pu(),vt)}function bT(){for(;Le!==null&&!tn();)Ay(Le)}function Ay(t){var i=Wp(t.alternate,t,$i);t.memoizedProps=t.pendingProps,i===null?Xu(t):Le=i}function xy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Qp(a,i,i.pendingProps,i.type,void 0,Ge);break;case 11:i=Qp(a,i,i.pendingProps,i.type.render,i.ref,Ge);break;case 5:of(i);default:ey(a,i),i=Le=Rg(i,$i),i=Wp(a,i,$i)}t.memoizedProps=t.pendingProps,i===null?Xu(t):Le=i}function Ha(t,i,a,l){Hi=jr=null,of(i),Oa=null,el=0;var h=i.return;try{if(hT(t,h,i,a,Ge)){vt=1,zu(t,kn(a,t.current)),Le=null;return}}catch(d){if(h!==null)throw Le=h,d;vt=1,zu(t,kn(a,t.current)),Le=null;return}i.flags&32768?($e||l===1?t=!0:Pa||(Ge&536870912)!==0?t=!1:(Ds=t=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ry(i,t)):Xu(i)}function Xu(t){var i=t;do{if((i.flags&32768)!==0){Ry(i,Ds);return}t=i.return;var a=dT(i.alternate,i,$i);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);vt===0&&(vt=5)}function Ry(t,i){do{var a=mT(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);vt=6,Le=null}function Iy(t,i,a,l,h,d,E,b,R){t.cancelPendingCommit=null;do $u();while(Kt!==0);if((Je&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Vh,Jl(t,a,d,E,b,R),t===lt&&(Le=lt=null,Ge=0),La=i,ks=t,za=a,Bf=d,Hf=h,_y=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,xT(En,function(){return Oy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,h=re.p,re.p=2,E=Je,Je|=4;try{gT(t,i,a)}finally{Je=E,re.p=h,Y.T=l}}Kt=1,Cy(),Ny(),Dy()}}function Cy(){if(Kt===1){Kt=0;var t=ks,i=La,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=re.p;re.p=2;var h=Je;Je|=4;try{hy(i,t);var d=sd,E=yg(t.containerInfo),b=d.focusedElem,R=d.selectionRange;if(E!==b&&b&&b.ownerDocument&&pg(b.ownerDocument.documentElement,b)){if(R!==null&&Nh(b)){var L=R.start,K=R.end;if(K===void 0&&(K=L),"selectionStart"in b)b.selectionStart=L,b.selectionEnd=Math.min(K,b.value.length);else{var $=b.ownerDocument||document,z=$&&$.defaultView||window;if(z.getSelection){var q=z.getSelection(),xe=b.textContent.length,be=Math.min(R.start,xe),rt=R.end===void 0?be:Math.min(R.end,xe);!q.extend&&be>rt&&(E=rt,rt=be,be=E);var j=gg(b,be),O=gg(b,rt);if(j&&O&&(q.rangeCount!==1||q.anchorNode!==j.node||q.anchorOffset!==j.offset||q.focusNode!==O.node||q.focusOffset!==O.offset)){var P=$.createRange();P.setStart(j.node,j.offset),q.removeAllRanges(),be>rt?(q.addRange(P),q.extend(O.node,O.offset)):(P.setEnd(O.node,O.offset),q.addRange(P))}}}}for($=[],q=b;q=q.parentNode;)q.nodeType===1&&$.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<$.length;b++){var X=$[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}lc=!!id,sd=id=null}finally{Je=h,re.p=l,Y.T=a}}t.current=i,Kt=2}}function Ny(){if(Kt===2){Kt=0;var t=ks,i=La,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=re.p;re.p=2;var h=Je;Je|=4;try{oy(t,i.alternate,i)}finally{Je=h,re.p=l,Y.T=a}}Kt=3}}function Dy(){if(Kt===4||Kt===3){Kt=0,Di();var t=ks,i=La,a=za,l=_y;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Kt=5:(Kt=0,La=ks=null,My(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Os=null),To(a),i=i.stateNode,le&&typeof le.onCommitFiberRoot=="function")try{le.onCommitFiberRoot(fe,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Y.T,h=re.p,re.p=2,Y.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var b=l[E];d(b.value,{componentStack:b.stack})}}finally{Y.T=i,re.p=h}}(za&3)!==0&&$u(),yi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===qf?ul++:(ul=0,qf=t):ul=0,cl(0)}}function My(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,qo(i)))}function $u(t){return Cy(),Ny(),Dy(),Oy()}function Oy(){if(Kt!==5)return!1;var t=ks,i=Bf;Bf=0;var a=To(za),l=Y.T,h=re.p;try{re.p=32>a?32:a,Y.T=null,a=Hf,Hf=null;var d=ks,E=za;if(Kt=0,La=ks=null,za=0,(Je&6)!==0)throw Error(r(331));var b=Je;if(Je|=4,py(d.current),dy(d,d.current,E,a),Je=b,cl(0,!1),le&&typeof le.onPostCommitFiberRoot=="function")try{le.onPostCommitFiberRoot(fe,d)}catch{}return!0}finally{re.p=h,Y.T=l,My(t,i)}}function ky(t,i,a){i=kn(a,i),i=Tf(t.stateNode,i,2),t=Ss(t,i,2),t!==null&&(Et(t,2),yi(t))}function at(t,i,a){if(t.tag===3)ky(t,t,a);else for(;i!==null;){if(i.tag===3){ky(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Os===null||!Os.has(l))){t=kn(a,t),a=Up(2),l=Ss(i,a,2),l!==null&&(Lp(a,l,i,t),Et(l,2),yi(l));break}}i=i.return}}function Yf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new _T;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Pf=!0,h.add(a),t=wT.bind(null,t,i,a),i.then(t,t))}function wT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(Ge&a)===a&&(vt===4||vt===3&&(Ge&62914560)===Ge&&300>Mt()-zf?(Je&2)===0&&Ba(t,0):Uf|=a,Ua===Ge&&(Ua=0)),yi(t)}function Vy(t,i){i===0&&(i=ls()),t=wa(t,i),t!==null&&(Et(t,i),yi(t))}function ST(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Vy(t,a)}function AT(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Vy(t,a)}function xT(t,i){return Ft(t,i)}var Zu=null,qa=null,Kf=!1,Wu=!1,Xf=!1,qr=0;function yi(t){t!==qa&&t.next===null&&(qa===null?Zu=qa=t:qa=qa.next=t),Wu=!0,Kf||(Kf=!0,IT())}function cl(t,i){if(!Xf&&Wu){Xf=!0;do for(var a=!1,l=Zu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Pe(42|t)+1)-1,d&=h&~(E&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Ly(l,d))}else d=Ge,d=Nn(l,l===lt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||os(l,d)||(a=!0,Ly(l,d));l=l.next}while(a);Xf=!1}}function RT(){jy()}function jy(){Wu=Kf=!1;var t=0;qr!==0&&(jT()&&(t=qr),qr=0);for(var i=Mt(),a=null,l=Zu;l!==null;){var h=l.next,d=Py(l,i);d===0?(l.next=null,a===null?Zu=h:a.next=h,h===null&&(qa=a)):(a=l,(t!==0||(d&3)!==0)&&(Wu=!0)),l=h}cl(t)}function Py(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-Pe(d),b=1<<E,R=h[E];R===-1?((b&a)===0||(b&l)!==0)&&(h[E]=aa(b,i)):R<=i&&(t.expiredLanes|=b),d&=~b}if(i=lt,a=Ge,a=Nn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(et===2||et===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Gt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||os(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Gt(l),To(a)){case 2:case 8:a=yt;break;case 32:a=En;break;case 268435456:a=te;break;default:a=En}return l=Uy.bind(null,t),a=Ft(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Gt(l),t.callbackPriority=2,t.callbackNode=null,2}function Uy(t,i){if(Kt!==0&&Kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if($u()&&t.callbackNode!==a)return null;var l=Ge;return l=Nn(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ey(t,l,i),Py(t,Mt()),t.callbackNode!=null&&t.callbackNode===a?Uy.bind(null,t):null)}function Ly(t,i){if($u())return null;Ey(t,i,!0)}function IT(){UT(function(){(Je&6)!==0?Ft(dt,RT):jy()})}function $f(){return qr===0&&(qr=vo()),qr}function zy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Yn(""+t)}function By(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function CT(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=zy((h[Qt]||null).action),E=l.submitter;E&&(i=(i=E[Qt]||null)?zy(i.formAction):E.getAttribute("formAction"),i!==null&&(d=i,E=null));var b=new br("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qr!==0){var R=E?By(h,E):new FormData(h);pf(a,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(b.preventDefault(),R=E?By(h,E):new FormData(h),pf(a,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var Zf=0;Zf<kh.length;Zf++){var Wf=kh[Zf],NT=Wf.toLowerCase(),DT=Wf[0].toUpperCase()+Wf.slice(1);Zn(NT,"on"+DT)}Zn(Eg,"onAnimationEnd"),Zn(Tg,"onAnimationIteration"),Zn(bg,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(KE,"onTransitionRun"),Zn(XE,"onTransitionStart"),Zn($E,"onTransitionCancel"),Zn(wg,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function Hy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var E=l.length-1;0<=E;E--){var b=l[E],R=b.instance,L=b.currentTarget;if(b=b.listener,R!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=L;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=R}else for(E=0;E<l.length;E++){if(b=l[E],R=b.instance,L=b.currentTarget,b=b.listener,R!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=L;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=R}}}}function ze(t,i){var a=i[ur];a===void 0&&(a=i[ur]=new Set);var l=t+"__bubble";a.has(l)||(qy(i,t,2,!1),a.add(l))}function Jf(t,i,a){var l=0;i&&(l|=4),qy(a,t,l,i)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function ed(t){if(!t[Ju]){t[Ju]=!0,eu.forEach(function(a){a!=="selectionchange"&&(MT.has(a)||Jf(a,!1,t),Jf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ju]||(i[Ju]=!0,Jf("selectionchange",!1,i))}}function qy(t,i,a,l){switch(d0(i)){case 2:var h=rb;break;case 8:h=ab;break;default:h=md}a=h.bind(null,i,a,t),h=void 0,!Pi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function td(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===h)break;if(E===4)for(E=l.return;E!==null;){var R=E.tag;if((R===3||R===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;b!==null;){if(E=ai(b),E===null)return;if(R=E.tag,R===5||R===6||R===26||R===27){l=d=E;continue e}b=b.parentNode}}l=l.return}vr(function(){var L=d,K=Io(a),$=[];e:{var z=Sg.get(t);if(z!==void 0){var q=br,xe=t;switch(t){case"keypress":if(Er(a)===0)break e;case"keydown":case"keyup":q=va;break;case"focusin":xe="focus",q=pa;break;case"focusout":xe="blur",q=pa;break;case"beforeblur":case"afterblur":q=pa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Es;break;case Eg:case Tg:case bg:q=No;break;case wg:q=m;break;case"scroll":case"scrollend":q=Sr;break;case"wheel":q=w;break;case"copy":case"cut":case"paste":q=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Oo;break;case"toggle":case"beforetoggle":q=G}var be=(i&4)!==0,rt=!be&&(t==="scroll"||t==="scrollend"),j=be?z!==null?z+"Capture":null:z;be=[];for(var O=L,P;O!==null;){var X=O;if(P=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||P===null||j===null||(X=_s(O,j),X!=null&&be.push(fl(O,X,P))),rt)break;O=O.return}0<be.length&&(z=new q(z,xe,null,a,K),$.push({event:z,listeners:be}))}}if((i&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",z&&a!==Ro&&(xe=a.relatedTarget||a.fromElement)&&(ai(xe)||xe[Oi]))break e;if((q||z)&&(z=K.window===K?K:(z=K.ownerDocument)?z.defaultView||z.parentWindow:window,q?(xe=a.relatedTarget||a.toElement,q=L,xe=xe?ai(xe):null,xe!==null&&(rt=u(xe),be=xe.tag,xe!==rt||be!==5&&be!==27&&be!==6)&&(xe=null)):(q=null,xe=L),q!==xe)){if(be=Rr,X="onMouseLeave",j="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(be=Oo,X="onPointerLeave",j="onPointerEnter",O="pointer"),rt=q==null?z:fs(q),P=xe==null?z:fs(xe),z=new be(X,O+"leave",q,a,K),z.target=rt,z.relatedTarget=P,X=null,ai(K)===L&&(be=new be(j,O+"enter",xe,a,K),be.target=P,be.relatedTarget=rt,X=be),rt=X,q&&xe)t:{for(be=q,j=xe,O=0,P=be;P;P=Fa(P))O++;for(P=0,X=j;X;X=Fa(X))P++;for(;0<O-P;)be=Fa(be),O--;for(;0<P-O;)j=Fa(j),P--;for(;O--;){if(be===j||j!==null&&be===j.alternate)break t;be=Fa(be),j=Fa(j)}be=null}else be=null;q!==null&&Fy($,z,q,be,!1),xe!==null&&rt!==null&&Fy($,rt,xe,be,!0)}}e:{if(z=L?fs(L):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var de=ug;else if(og(z))if(cg)de=GE;else{de=qE;var Ue=HE}else q=z.nodeName,!q||q.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&da(L.elementType)&&(de=ug):de=FE;if(de&&(de=de(t,L))){lg($,de,a,K);break e}Ue&&Ue(t,z,L),t==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&So(z,"number",z.value)}switch(Ue=L?fs(L):window,t){case"focusin":(og(Ue)||Ue.contentEditable==="true")&&(Ea=Ue,Dh=L,Uo=null);break;case"focusout":Uo=Dh=Ea=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,_g($,a,K);break;case"selectionchange":if(YE)break;case"keydown":case"keyup":_g($,a,K)}var _e;if(De)e:{switch(t){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else $n?Kn(t,a)&&(we="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(wt&&a.locale!=="ko"&&($n||we!=="onCompositionStart"?we==="onCompositionEnd"&&$n&&(_e=au()):(On=K,ot="value"in On?On.value:On.textContent,$n=!0)),Ue=ec(L,we),0<Ue.length&&(we=new Mo(we,t,null,a,K),$.push({event:we,listeners:Ue}),_e?we.data=_e:(_e=Xn(a),_e!==null&&(we.data=_e)))),(_e=We?ko(t,a):LE(t,a))&&(we=ec(L,"onBeforeInput"),0<we.length&&(Ue=new Mo("onBeforeInput","beforeinput",null,a,K),$.push({event:Ue,listeners:we}),Ue.data=_e)),CT($,t,L,a,K)}Hy($,i)})}function fl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function ec(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=_s(t,a),h!=null&&l.unshift(fl(t,h,d)),h=_s(t,i),h!=null&&l.push(fl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Fy(t,i,a,l,h){for(var d=i._reactName,E=[];a!==null&&a!==l;){var b=a,R=b.alternate,L=b.stateNode;if(b=b.tag,R!==null&&R===l)break;b!==5&&b!==26&&b!==27||L===null||(R=L,h?(L=_s(a,d),L!=null&&E.unshift(fl(a,L,R))):h||(L=_s(a,d),L!=null&&E.push(fl(a,L,R)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var OT=/\r\n?/g,kT=/\u0000|\uFFFD/g;function Gy(t){return(typeof t=="string"?t:""+t).replace(OT,`
`).replace(kT,"")}function Qy(t,i){return i=Gy(i),Gy(t)===i}function tc(){}function st(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Mn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Mn(t,""+l);break;case"className":mr(t,"class",l);break;case"tabIndex":mr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(t,a,l);break;case"style":xo(t,l,d);break;case"data":if(i!=="object"){mr(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Yn(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&st(t,i,"name",h.name,h,null),st(t,i,"formEncType",h.formEncType,h,null),st(t,i,"formMethod",h.formMethod,h,null),st(t,i,"formTarget",h.formTarget,h,null)):(st(t,i,"encType",h.encType,h,null),st(t,i,"method",h.method,h,null),st(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Yn(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=tc);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Yn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ze("beforetoggle",t),ze("toggle",t),dr(t,"popover",l);break;case"xlinkActuate":Dn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Dn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Dn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Dn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Dn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Dn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":dr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=iu.get(a)||a,dr(t,a,l))}}function nd(t,i,a,l,h,d){switch(a){case"style":xo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Mn(t,l):(typeof l=="number"||typeof l=="bigint")&&Mn(t,""+l);break;case"onScroll":l!=null&&ze("scroll",t);break;case"onScrollEnd":l!=null&&ze("scrollend",t);break;case"onClick":l!=null&&(t.onclick=tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Qt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):dr(t,a,l)}}}function Xt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",t),ze("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(t,i,d,E,a,null)}}h&&st(t,i,"srcSet",a.srcSet,a,null),l&&st(t,i,"src",a.src,a,null);return;case"input":ze("invalid",t);var b=d=E=h=null,R=null,L=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":E=K;break;case"checked":R=K;break;case"defaultChecked":L=K;break;case"value":d=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:st(t,i,l,K,a,null)}}wo(t,d,b,R,L,E,h,!1),gs(t);return;case"select":ze("invalid",t),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:st(t,i,h,b,a,null)}i=d,a=E,t.multiple=!!l,i!=null?ps(t,!!l,i,!1):a!=null&&ps(t,!!l,a,!0);return;case"textarea":ze("invalid",t),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(b=a[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:st(t,i,E,b,a,null)}nu(t,l,h,d),gs(t);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:st(t,i,R,l,a,null)}return;case"dialog":ze("beforetoggle",t),ze("toggle",t),ze("cancel",t),ze("close",t);break;case"iframe":case"object":ze("load",t);break;case"video":case"audio":for(l=0;l<hl.length;l++)ze(hl[l],t);break;case"image":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"embed":case"source":case"link":ze("error",t),ze("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(l=a[L],l!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(t,i,L,l,a,null)}return;default:if(da(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&nd(t,i,K,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&st(t,i,b,l,a,null))}function VT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,b=null,R=null,L=null,K=null;for(q in a){var $=a[q];if(a.hasOwnProperty(q)&&$!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=$;default:l.hasOwnProperty(q)||st(t,i,q,null,l,$)}}for(var z in l){var q=l[z];if($=a[z],l.hasOwnProperty(z)&&(q!=null||$!=null))switch(z){case"type":d=q;break;case"name":h=q;break;case"checked":L=q;break;case"defaultChecked":K=q;break;case"value":E=q;break;case"defaultValue":b=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:q!==$&&st(t,i,z,q,l,$)}}bo(t,E,b,R,L,K,d,h);return;case"select":q=E=b=z=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":q=R;default:l.hasOwnProperty(d)||st(t,i,d,null,l,R)}for(h in l)if(d=l[h],R=a[h],l.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":z=d;break;case"defaultValue":b=d;break;case"multiple":E=d;default:d!==R&&st(t,i,h,d,l,R)}i=b,a=E,l=q,z!=null?ps(t,!!a,z,!1):!!l!=!!a&&(i!=null?ps(t,!!a,i,!0):ps(t,!!a,a?[]:"",!1));return;case"textarea":q=z=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:st(t,i,b,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":z=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&st(t,i,E,h,l,d)}tu(t,z,q);return;case"option":for(var xe in a)if(z=a[xe],a.hasOwnProperty(xe)&&z!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":t.selected=!1;break;default:st(t,i,xe,null,l,z)}for(R in l)if(z=l[R],q=a[R],l.hasOwnProperty(R)&&z!==q&&(z!=null||q!=null))switch(R){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:st(t,i,R,z,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)z=a[be],a.hasOwnProperty(be)&&z!=null&&!l.hasOwnProperty(be)&&st(t,i,be,null,l,z);for(L in l)if(z=l[L],q=a[L],l.hasOwnProperty(L)&&z!==q&&(z!=null||q!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,i));break;default:st(t,i,L,z,l,q)}return;default:if(da(i)){for(var rt in a)z=a[rt],a.hasOwnProperty(rt)&&z!==void 0&&!l.hasOwnProperty(rt)&&nd(t,i,rt,void 0,l,z);for(K in l)z=l[K],q=a[K],!l.hasOwnProperty(K)||z===q||z===void 0&&q===void 0||nd(t,i,K,z,l,q);return}}for(var j in a)z=a[j],a.hasOwnProperty(j)&&z!=null&&!l.hasOwnProperty(j)&&st(t,i,j,null,l,z);for($ in l)z=l[$],q=a[$],!l.hasOwnProperty($)||z===q||z==null&&q==null||st(t,i,$,z,l,q)}var id=null,sd=null;function nc(t){return t.nodeType===9?t:t.ownerDocument}function Yy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ky(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function rd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ad=null;function jT(){var t=window.event;return t&&t.type==="popstate"?t===ad?!1:(ad=t,!0):(ad=null,!1)}var Xy=typeof setTimeout=="function"?setTimeout:void 0,PT=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,UT=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(t){return $y.resolve(null).then(t).catch(LT)}:Xy;function LT(t){setTimeout(function(){throw t})}function js(t){return t==="head"}function Zy(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&dl(E.documentElement),a&2&&dl(E.body),a&4)for(a=E.head,dl(a),E=a.firstChild;E;){var b=E.nextSibling,R=E.nodeName;E[hs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=b}}if(h===0){t.removeChild(d),Tl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Tl(i)}function od(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":od(a),la(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function zT(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[hs])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Jn(t.nextSibling),t===null)break}return null}function BT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Jn(t.nextSibling),t===null))return null;return t}function ld(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function HT(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Jn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var ud=null;function Wy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Jy(t,i,a){switch(i=nc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function dl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);la(t)}var zn=new Map,e0=new Set;function ic(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zi=re.d;re.d={f:qT,r:FT,D:GT,C:QT,L:YT,m:KT,X:$T,S:XT,M:ZT};function qT(){var t=Zi.f(),i=Ku();return t||i}function FT(t){var i=oi(t);i!==null&&i.tag===5&&i.type==="form"?Ep(i):Zi.r(t)}var Ga=typeof document>"u"?null:document;function t0(t,i,a){var l=Ga;if(l&&typeof i=="string"&&i){var h=Lt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),e0.has(h)||(e0.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Xt(i,"link",t),bt(i),l.head.appendChild(i)))}}function GT(t){Zi.D(t),t0("dns-prefetch",t,null)}function QT(t,i){Zi.C(t,i),t0("preconnect",t,i)}function YT(t,i,a){Zi.L(t,i,a);var l=Ga;if(l&&t&&i){var h='link[rel="preload"][as="'+Lt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Lt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Lt(a.imageSizes)+'"]')):h+='[href="'+Lt(t)+'"]';var d=h;switch(i){case"style":d=Qa(t);break;case"script":d=Ya(t)}zn.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),zn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(ml(d))||i==="script"&&l.querySelector(gl(d))||(i=l.createElement("link"),Xt(i,"link",t),bt(i),l.head.appendChild(i)))}}function KT(t,i){Zi.m(t,i);var a=Ga;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Lt(l)+'"][href="'+Lt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ya(t)}if(!zn.has(d)&&(t=T({rel:"modulepreload",href:t},i),zn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(gl(d)))return}l=a.createElement("link"),Xt(l,"link",t),bt(l),a.head.appendChild(l)}}}function XT(t,i,a){Zi.S(t,i,a);var l=Ga;if(l&&t){var h=ds(l).hoistableStyles,d=Qa(t);i=i||"default";var E=h.get(d);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(ml(d)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=zn.get(d))&&cd(t,a);var R=E=l.createElement("link");bt(R),Xt(R,"link",t),R._p=new Promise(function(L,K){R.onload=L,R.onerror=K}),R.addEventListener("load",function(){b.loading|=1}),R.addEventListener("error",function(){b.loading|=2}),b.loading|=4,sc(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:b},h.set(d,E)}}}function $T(t,i){Zi.X(t,i);var a=Ga;if(a&&t){var l=ds(a).hoistableScripts,h=Ya(t),d=l.get(h);d||(d=a.querySelector(gl(h)),d||(t=T({src:t,async:!0},i),(i=zn.get(h))&&hd(t,i),d=a.createElement("script"),bt(d),Xt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function ZT(t,i){Zi.M(t,i);var a=Ga;if(a&&t){var l=ds(a).hoistableScripts,h=Ya(t),d=l.get(h);d||(d=a.querySelector(gl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=zn.get(h))&&hd(t,i),d=a.createElement("script"),bt(d),Xt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function n0(t,i,a,l){var h=(h=Ee.current)?ic(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Qa(a.href),a=ds(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Qa(a.href);var d=ds(h).hoistableStyles,E=d.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=h.querySelector(ml(t)))&&!d._p&&(E.instance=d,E.state.loading=5),zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zn.set(t,a),d||WT(h,t,a,E.state))),i&&l===null)throw Error(r(528,""));return E}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ya(a),a=ds(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Qa(t){return'href="'+Lt(t)+'"'}function ml(t){return'link[rel="stylesheet"]['+t+"]"}function i0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function WT(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Xt(i,"link",a),bt(i),t.head.appendChild(i))}function Ya(t){return'[src="'+Lt(t)+'"]'}function gl(t){return"script[async]"+t}function s0(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Lt(a.href)+'"]');if(l)return i.instance=l,bt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),bt(l),Xt(l,"style",h),sc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Qa(a.href);var d=t.querySelector(ml(h));if(d)return i.state.loading|=4,i.instance=d,bt(d),d;l=i0(a),(h=zn.get(h))&&cd(l,h),d=(t.ownerDocument||t).createElement("link"),bt(d);var E=d;return E._p=new Promise(function(b,R){E.onload=b,E.onerror=R}),Xt(d,"link",l),i.state.loading|=4,sc(d,a.precedence,t),i.instance=d;case"script":return d=Ya(a.src),(h=t.querySelector(gl(d)))?(i.instance=h,bt(h),h):(l=a,(h=zn.get(d))&&(l=T({},a),hd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),bt(h),Xt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,sc(l,a.precedence,t));return i.instance}function sc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function cd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function hd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var rc=null;function r0(t,i,a){if(rc===null){var l=new Map,h=rc=new Map;h.set(a,l)}else h=rc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[hs]||d[Tt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(i)||"";E=t+E;var b=l.get(E);b?b.push(d):l.set(E,[d])}}return l}function a0(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function JT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function o0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var pl=null;function eb(){}function tb(t,i,a){if(pl===null)throw Error(r(475));var l=pl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Qa(a.href),d=t.querySelector(ml(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ac.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,bt(d);return}d=t.ownerDocument||t,a=i0(a),(h=zn.get(h))&&cd(a,h),d=d.createElement("link"),bt(d);var E=d;E._p=new Promise(function(b,R){E.onload=b,E.onerror=R}),Xt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=ac.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function nb(){if(pl===null)throw Error(r(475));var t=pl;return t.stylesheets&&t.count===0&&fd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&fd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ac(){if(this.count--,this.count===0){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var oc=null;function fd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,oc=new Map,i.forEach(ib,t),oc=null,ac.call(t))}function ib(t,i){if(!(i.state.loading&4)){var a=oc.get(t);if(a)var l=a.get(null);else{a=new Map,oc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=i.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=ac.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var yl={$$typeof:ae,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function sb(t,i,a,l,h,d,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.hiddenUpdates=oa(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function l0(t,i,a,l,h,d,E,b,R,L,K,$){return t=new sb(t,i,a,E,b,R,L,$),i=1,d===!0&&(i|=24),d=wn(3,null,null,i),t.current=d,d.stateNode=t,i=Qh(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},$h(d),t}function u0(t){return t?(t=Sa,t):Sa}function c0(t,i,a,l,h,d){h=u0(h),l.context===null?l.context=h:l.pendingContext=h,l=ws(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ss(t,l,i),a!==null&&(In(a,t,i),Yo(a,t,i))}function h0(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function dd(t,i){h0(t,i),(t=t.alternate)&&h0(t,i)}function f0(t){if(t.tag===13){var i=wa(t,67108864);i!==null&&In(i,t,67108864),dd(t,67108864)}}var lc=!0;function rb(t,i,a,l){var h=Y.T;Y.T=null;var d=re.p;try{re.p=2,md(t,i,a,l)}finally{re.p=d,Y.T=h}}function ab(t,i,a,l){var h=Y.T;Y.T=null;var d=re.p;try{re.p=8,md(t,i,a,l)}finally{re.p=d,Y.T=h}}function md(t,i,a,l){if(lc){var h=gd(l);if(h===null)td(t,i,l,uc,a),m0(t,l);else if(lb(h,t,i,a,l))l.stopPropagation();else if(m0(t,l),i&4&&-1<ob.indexOf(t)){for(;h!==null;){var d=oi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=Fn(d.pendingLanes);if(E!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var R=1<<31-Pe(E);b.entanglements[1]|=R,E&=~R}yi(d),(Je&6)===0&&(Qu=Mt()+500,cl(0))}}break;case 13:b=wa(d,2),b!==null&&In(b,d,2),Ku(),dd(d,2)}if(d=gd(l),d===null&&td(t,i,l,uc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else td(t,i,l,null,a)}}function gd(t){return t=Io(t),pd(t)}var uc=null;function pd(t){if(uc=null,t=ai(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return uc=t,null}function d0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rs()){case dt:return 2;case yt:return 8;case En:case lr:return 32;case te:return 268435456;default:return 32}default:return 32}}var yd=!1,Ps=null,Us=null,Ls=null,_l=new Map,vl=new Map,zs=[],ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m0(t,i){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":_l.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vl.delete(i.pointerId)}}function El(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=oi(i),i!==null&&f0(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function lb(t,i,a,l,h){switch(i){case"focusin":return Ps=El(Ps,t,i,a,l,h),!0;case"dragenter":return Us=El(Us,t,i,a,l,h),!0;case"mouseover":return Ls=El(Ls,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return _l.set(d,El(_l.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,vl.set(d,El(vl.get(d)||null,t,i,a,l,h)),!0}return!1}function g0(t){var i=ai(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,wh(t.priority,function(){if(a.tag===13){var l=Rn();l=Eo(l);var h=wa(a,l);h!==null&&In(h,a,l),dd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=gd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ro=l,a.target.dispatchEvent(l),Ro=null}else return i=oi(a),i!==null&&f0(i),t.blockedOn=a,!1;i.shift()}return!0}function p0(t,i,a){cc(t)&&a.delete(i)}function ub(){yd=!1,Ps!==null&&cc(Ps)&&(Ps=null),Us!==null&&cc(Us)&&(Us=null),Ls!==null&&cc(Ls)&&(Ls=null),_l.forEach(p0),vl.forEach(p0)}function hc(t,i){t.blockedOn===i&&(t.blockedOn=null,yd||(yd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ub)))}var fc=null;function y0(t){fc!==t&&(fc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){fc===t&&(fc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(pd(l||a)===null)continue;break}var d=oi(a);d!==null&&(t.splice(i,3),i-=3,pf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Tl(t){function i(R){return hc(R,t)}Ps!==null&&hc(Ps,t),Us!==null&&hc(Us,t),Ls!==null&&hc(Ls,t),_l.forEach(i),vl.forEach(i);for(var a=0;a<zs.length;a++){var l=zs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<zs.length&&(a=zs[0],a.blockedOn===null);)g0(a),a.blockedOn===null&&zs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[Qt]||null;if(typeof d=="function")E||y0(a);else if(E){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Qt]||null)b=E.formAction;else if(pd(h)!==null)continue}else b=E.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),y0(a)}}}function _d(t){this._internalRoot=t}dc.prototype.render=_d.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Rn();c0(a,l,t,i,null,null)},dc.prototype.unmount=_d.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;c0(t.current,2,null,t,null,null),Ku(),i[Oi]=null}};function dc(t){this._internalRoot=t}dc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Mi();t={blockedOn:null,target:t,priority:i};for(var a=0;a<zs.length&&i!==0&&i<zs[a].priority;a++);zs.splice(a,0,t),a===0&&g0(t)}};var _0=e.version;if(_0!=="19.1.1")throw Error(r(527,_0,"19.1.1"));re.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var cb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{fe=mc.inject(cb),le=mc}catch{}}return wl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=kp,d=Vp,E=jp,b=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=l0(t,1,!1,null,null,a,l,h,d,E,b,null),t[Oi]=i.current,ed(t),new _d(i)},wl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=kp,E=Vp,b=jp,R=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=l0(t,1,!0,i,a??null,l,h,d,E,b,R,L),i.context=u0(null),a=i.current,l=Rn(),l=Eo(l),h=ws(l),h.callback=null,Ss(a,h,l),a=l,i.current.lanes=a,Et(i,a),yi(i),t[Oi]=i.current,ed(t),new dc(i)},wl.version="19.1.1",wl}var I0;function Tb(){if(I0)return Td.exports;I0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Td.exports=Eb(),Td.exports}var bb=Tb();const wb=pv(bb),Sb=(s,e)=>Array.from({length:e},(n,r)=>({id:`${s}-${r}-${Math.random().toString(36).substring(2,9)}`,title:`${s} Movie ${r+1}`,description:`This is a compelling description for ${s} Movie ${r+1}. It involves drama, action, and a hint of romance, keeping viewers on the edge of their seats.`,posterUrl:`https://picsum.photos/seed/${s}${r}/400/600`,backdropUrl:`https://picsum.photos/seed/${s}${r}bg/1200/675`,duration:{hours:Math.floor(Math.random()*2)+1,minutes:Math.floor(Math.random()*60),seconds:Math.floor(Math.random()*60)},watchPercentage:0,videoUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",category:s})),Ad=()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{}),_.jsx("div",{}),_.jsx("div",{}),_.jsx("div",{}),_.jsx("div",{})]}),yv=()=>_.jsxs(_.Fragment,{children:[_.jsx("style",{children:`
                .ghost-container {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    overflow: hidden;
                    z-index: 1;
                    pointer-events: none;
                }

                @keyframes ghostMove {
                    0% {
                        transform: translateX(110vw) rotateZ(-90deg);
                    }
                    100% {
                        transform: translateX(-15vw) rotateZ(-90deg);
                    }
                }

                .ghost {
                    --ghost-white: #e7e6e6;
                    position: absolute;
                    background-color: var(--ghost-white);
                    background-image: radial-gradient(ellipse at 35% 40%, #000 8%, transparent 0%),
                        radial-gradient(ellipse at 65% 40%, #000 8%, transparent 0%),
                        radial-gradient(ellipse at 50% 60%, #000 8%, transparent 0%);
                    border-radius: 100% / 70% 70% 0% 0%;
                    opacity: 0.9;
                    mix-blend-mode: exclusion;
                    animation: ghostMove linear infinite;
                }

                .ghost div {
                    position: absolute;
                    width: 20%;
                    background-color: var(--ghost-white);
                }

                .ghost div:nth-of-type(1) {
                    left: 0;
                    border-radius: 100% / 0% 0% 50% 50%;
                }

                .ghost div:nth-of-type(2),
                .ghost div:nth-of-type(4) {
                    left: 20%;
                    border-radius: 100% / 50% 50% 0% 0%;
                    background-color: transparent;
                }

                .ghost div:nth-of-type(3) {
                    left: 40%;
                    border-radius: 100% / 0% 0% 60% 60%;
                }

                .ghost div:nth-of-type(4) {
                    left: 60%;
                }

                .ghost div:nth-of-type(5) {
                    left: 80%;
                    border-radius: 100% / 0% 0% 70% 70%;
                }

                /* Specific Ghost Styles */
                .ghost-1 {
                    width: 8vmin;
                    height: 12vmin;
                    top: 20vh;
                    animation-duration: 15s;
                    animation-delay: -2s;
                }
                .ghost-1 div:nth-of-type(1) { height: 7vmin; bottom: -6vmin; }
                .ghost-1 div:nth-of-type(2), .ghost-1 div:nth-of-type(4) { height: 4vmin; bottom: -3vmin; }
                .ghost-1 div:nth-of-type(3) { height: 4vmin; bottom: -3.95vmin; }
                .ghost-1 div:nth-of-type(5) { height: 3vmin; bottom: -2.9vmin; }
                
                .ghost-2 {
                    width: 6vmin;
                    height: 9vmin;
                    top: 50vh;
                    animation-duration: 20s;
                    animation-delay: -8s;
                }
                .ghost-2 div:nth-of-type(1) { height: 5vmin; bottom: -4.5vmin; }
                .ghost-2 div:nth-of-type(2), .ghost-2 div:nth-of-type(4) { height: 3vmin; bottom: -2.25vmin; }
                .ghost-2 div:nth-of-type(3) { height: 3vmin; bottom: -3vmin; }
                .ghost-2 div:nth-of-type(5) { height: 2.25vmin; bottom: -2.2vmin; }
                
                .ghost-3 {
                    width: 10vmin;
                    height: 15vmin;
                    top: 70vh;
                    animation-duration: 12s;
                    animation-delay: -12s;
                }
                .ghost-3 div:nth-of-type(1) { height: 9vmin; bottom: -8vmin; }
                .ghost-3 div:nth-of-type(2), .ghost-3 div:nth-of-type(4) { height: 5vmin; bottom: -4vmin; }
                .ghost-3 div:nth-of-type(3) { height: 5vmin; bottom: -5vmin; }
                .ghost-3 div:nth-of-type(5) { height: 4vmin; bottom: -3.8vmin; }

            `}),_.jsxs("div",{className:"ghost-container",children:[_.jsx("div",{className:"ghost ghost-1",children:_.jsx(Ad,{})}),_.jsx("div",{className:"ghost ghost-2",children:_.jsx(Ad,{})}),_.jsx("div",{className:"ghost ghost-3",children:_.jsx(Ad,{})})]})]}),Ab=({phase:s,user:e})=>_.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden bg-black flex items-center justify-center",children:[_.jsx("style",{children:`
              .thelden-splash-title {
                font-family: 'Abril Fatface', cursive;
                font-size: clamp(2.5rem, 18vw, 15rem);
                background: linear-gradient(145deg, #c0c0c0, #ffffff, #ff9933, #d4af37, #ff8c00, #c0c0c0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-fill-color: transparent;
                background-size: 400% 400%;
                animation: gradient-animation 8s ease infinite;
                transform: perspective(500px) rotateX(25deg);
                filter: drop-shadow(0px 10px 15px rgba(0,0,0,0.5));
                z-index: 10;
              }
              .welcome-title {
                font-family: 'Abril Fatface', cursive;
                font-size: clamp(2rem, 12vw, 8rem);
                text-align: center;
                background: linear-gradient(145deg, #ff9933, #ffffff, #c0c0c0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-fill-color: transparent;
                background-size: 200% 200%;
                animation: gradient-animation 6s ease infinite, fade-in 1.5s ease-out forwards;
              }
            `}),_.jsx(yv,{}),_.jsx("h1",{className:"thelden-splash-title",children:"THELDEN"})]}),xb=({movie:s,onClose:e,onPlay:n,onToggleMyList:r,isInMyList:o,onDownload:u,downloadingMovies:f,downloadedMovies:g})=>{const p=g.some(S=>S.id===s.id),y=f[s.id],T=y?y.progress:0;return _.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 fade-in",onClick:e,children:_.jsxs("div",{className:"bg-zinc-900 rounded-lg shadow-2xl w-full max-w-4xl overflow-hidden",onClick:S=>S.stopPropagation(),children:[_.jsxs("div",{className:"relative",children:[_.jsx("img",{src:s.backdropUrl,alt:s.title,className:"w-full h-56 md:h-96 object-cover"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900 to-transparent"}),_.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white bg-black/50 rounded-full w-8 h-8 flex items-center justify-center hover:bg-black/80 transition-colors",children:"X"}),_.jsx("div",{className:"absolute bottom-8 left-8",children:_.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white text-shadow-lg",children:s.title})})]}),_.jsxs("div",{className:"p-8",children:[_.jsx("p",{className:"text-gray-300 mb-6",children:s.description}),_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsxs("button",{onClick:n,className:"flex-grow bg-white text-black font-bold py-3 px-6 rounded-md flex items-center justify-center space-x-2 hover:bg-gray-200 transition-transform duration-200 hover:scale-105",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M8 5v14l11-7z"})}),_.jsx("span",{children:"Play"})]}),_.jsx("button",{onClick:()=>r(s),className:"flex-grow bg-zinc-700 text-white font-bold py-3 px-6 rounded-md hover:bg-zinc-600 transition-transform duration-200 hover:scale-105",children:o?"In My List":"Save to List"}),_.jsx("button",{onClick:()=>u(s),disabled:p||!!y,className:"flex-grow bg-blue-600 text-white font-bold py-3 px-6 rounded-md transition-transform duration-200 hover:scale-105 disabled:bg-zinc-800 disabled:text-zinc-400 disabled:scale-100 disabled:cursor-not-allowed",children:p?"Downloaded":y?`Downloading... ${Math.round(T)}%`:"Download"})]})]})]})})},Rb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),Ib=({className:s="h-8 w-8"})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M8 5v14l11-7z"})}),Cb=({className:s="h-8 w-8"})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),Nb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"})}),Db=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})}),Mb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.87z"})}),Ob=({level:s})=>s===0?_.jsx(Nb,{}):s<.5?_.jsx(Db,{}):_.jsx(Mb,{}),kb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M6 18h2V6H6v12zm3.5-6L18 6v12l-8.5-6z"})}),Vb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),jb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})}),Pb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})}),Ub=({direction:s})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 text-white/90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s==="forward"?_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 5l7 7-7 7M5 5l7 7-7 7"}):_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})}),C0=({seconds:s,className:e="w-8 h-8"})=>_.jsxs("div",{className:`relative flex items-center justify-center text-white ${e}`,children:[_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full absolute",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M19.9 12a8 8 0 1 1-3.4-6.5"}),s>0?_.jsx("path",{d:"m16 12 4-4-4-4"}):_.jsx("path",{d:"m8 12-4-4 4-4"})]}),_.jsx("span",{className:"text-xs font-bold select-none",children:Math.abs(s)})]}),Lb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z"})}),zb=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"})}),N0=s=>{if(isNaN(s)||s<0)return"00:00";const e=Math.floor(s),n=Math.floor(e/3600),r=Math.floor(e%3600/60),o=e%60,u=String(r).padStart(2,"0"),f=String(o).padStart(2,"0");return n>0?`${n}:${u}:${f}`:`${u}:${f}`},Bb=({movie:s,allMovies:e,onClose:n,onSelectEpisode:r})=>{const o=J.useRef(null),u=J.useRef(null),f=J.useRef(null),g=J.useRef(null),[p,y]=J.useState(!0),[T,S]=J.useState(0),[N,B]=J.useState(0),[H,F]=J.useState(!0),[Q,he]=J.useState(!1),[ye,ae]=J.useState(!1),[ve,ge]=J.useState(null),[Ie,x]=J.useState(1),[A,I]=J.useState(!1),[k,M]=J.useState(!1),[V,C]=J.useState("1080p"),[Xe,Ye]=J.useState(!1),[Y,re]=J.useState("Off"),[me,je]=J.useState(!1),[D,W]=J.useState("English"),oe=["1080p","720p","480p","360p"],ne=["Off","English","Spanish","French"],ce=["English","Spanish","Original"],Oe=J.useRef(null),Ee=J.useRef(null),tt=J.useRef(null),Fe=J.useRef(null),Dt=typeof s.seasonNumber<"u"&&typeof s.episodeNumber<"u",Hn=J.useMemo(()=>{if(!Dt)return null;const te=s.title,Ne=e.filter(fe=>fe.title===te&&fe.seasonNumber),ie=[...new Set(Ne.map(fe=>fe.seasonNumber))].filter(fe=>fe!=null).sort((fe,le)=>fe-le);return{episodes:Ne,seasons:ie}},[e,s,Dt]),[qn,en]=J.useState(s.seasonNumber||1);J.useEffect(()=>{en(s.seasonNumber||1)},[s]);const Ft=J.useCallback(()=>{f.current&&clearTimeout(f.current),F(!0),f.current=window.setTimeout(()=>{o.current&&!o.current.paused&&!ye&&!A&&!k&&!Xe&&!me&&F(!1)},3e3)},[ye,A,k,Xe,me]);J.useEffect(()=>{const te=u.current;if(!te)return;const Ne=()=>Ft();return te.addEventListener("mousemove",Ne),Ft(),()=>{te.removeEventListener("mousemove",Ne),f.current&&clearTimeout(f.current)}},[Ft]);const Gt=J.useCallback(()=>{o.current&&(o.current.paused?o.current.play():o.current.pause())},[]),tn=J.useCallback(te=>{const Ne=te==="forward"?10:-10;o.current&&(o.current.currentTime+=Ne),ge({direction:te,key:Date.now()})},[]);J.useEffect(()=>{const te=o.current;if(!te)return;te.volume=Ie;const Ne=()=>S(te.currentTime),ie=()=>B(te.duration),fe=()=>{y(!0),Ft(),o.current&&(o.current.muted=!1)},le=()=>{y(!1),Ft()},Ae=()=>n();return te.addEventListener("timeupdate",Ne),te.addEventListener("durationchange",ie),te.addEventListener("play",fe),te.addEventListener("pause",le),te.addEventListener("ended",Ae),te.readyState>0&&ie(),()=>{te.removeEventListener("timeupdate",Ne),te.removeEventListener("durationchange",ie),te.removeEventListener("play",fe),te.removeEventListener("pause",le),te.removeEventListener("ended",Ae)}},[n,Ft]),J.useEffect(()=>{const te=Ne=>{Ne.target instanceof HTMLInputElement||Ne.target instanceof HTMLTextAreaElement||(Ne.key==="ArrowRight"?tn("forward"):Ne.key==="ArrowLeft"?tn("backward"):Ne.key===" "&&(Ne.preventDefault(),Gt()))};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[tn,Gt]);const Di=te=>{if(!o.current||!N)return;const Ne=te.currentTarget,ie=te.nativeEvent.offsetX,fe=Ne.clientWidth;o.current.currentTime=ie/fe*N},Mt=te=>{const Ne=Math.max(0,Math.min(1,te));x(Ne),o.current&&(o.current.volume=Ne,o.current.muted=Ne===0)},rs=te=>{C(te),M(!1),console.log(`Quality set to ${te}`)},dt=()=>{const te=u.current;te&&(document.fullscreenElement?document.exitFullscreen():te.requestFullscreen().catch(Ne=>console.error(`Fullscreen Error: ${Ne.message}`)))};J.useEffect(()=>{const te=()=>he(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",te),()=>document.removeEventListener("fullscreenchange",te)},[]);const yt=te=>{if(g.current){clearTimeout(g.current),g.current=null;const Ne=te.currentTarget.getBoundingClientRect(),ie=te.clientX-Ne.left;tn(ie>Ne.width/2?"forward":"backward")}else g.current=window.setTimeout(()=>{Gt(),g.current=null},250)};J.useEffect(()=>{const te=Ne=>{A&&Oe.current&&!Oe.current.contains(Ne.target)&&I(!1),k&&Ee.current&&!Ee.current.contains(Ne.target)&&M(!1),Xe&&tt.current&&!tt.current.contains(Ne.target)&&Ye(!1),me&&Fe.current&&!Fe.current.contains(Ne.target)&&je(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[A,k,Xe,me]);const En=te=>{const ie=te.currentTarget.getBoundingClientRect(),fe=te.clientY-ie.top,le=(ie.height-fe)/ie.height;Mt(le)},lr=te=>{En(te);const Ne=te.currentTarget,ie=le=>{const Ae=Ne.getBoundingClientRect(),Pe=le.clientY-Ae.top,mn=(Ae.height-Pe)/Ae.height;Mt(mn)},fe=()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",fe)};window.addEventListener("mousemove",ie),window.addEventListener("mouseup",fe)};return _.jsxs("div",{ref:u,className:"fixed inset-0 bg-black z-[100] flex items-center justify-center select-none",children:[_.jsx("video",{ref:o,src:s.videoUrl,className:"w-full h-full object-contain",autoPlay:!0,children:s.subtitleUrl&&_.jsx("track",{label:"English",kind:"subtitles",srcLang:"en",src:s.subtitleUrl,default:!0})}),_.jsx("div",{className:"absolute inset-0 z-10",onClick:yt,onMouseMove:Ft}),ve&&_.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 ${ve.direction==="forward"?"right-10 md:right-20":"left-10 md:left-20"} skip-indicator z-20`,children:_.jsx("div",{className:"glass-skip-icon",children:_.jsx(Ub,{direction:ve.direction})})},ve.key),ye&&Hn&&_.jsx("div",{className:"absolute inset-0 bg-black/30 z-30",onClick:()=>ae(!1),children:_.jsxs("div",{className:"absolute top-0 right-0 bottom-0 w-full max-w-md bg-zinc-900/60 backdrop-blur-xl border-l border-white/10 p-6 flex flex-col",onClick:te=>te.stopPropagation(),children:[_.jsx("h3",{className:"text-2xl font-bold mb-4",children:s.title}),_.jsx("div",{className:"flex items-center border-b border-zinc-700 mb-4",children:Hn.seasons.map(te=>_.jsxs("button",{onClick:()=>en(te),className:`py-2 px-4 text-sm font-semibold transition-colors ${qn===te?"text-white border-b-2 border-red-500":"text-zinc-400 hover:text-white"}`,children:["Season ",te]},te))}),_.jsx("div",{className:"overflow-y-auto flex-grow -mr-4 pr-3 hide-scrollbar",children:Hn.episodes.filter(te=>te.seasonNumber===qn).sort((te,Ne)=>te.episodeNumber-Ne.episodeNumber).map(te=>_.jsxs("div",{onClick:()=>r(te),className:`flex items-start space-x-4 p-3 rounded-lg cursor-pointer transition-colors ${s.id===te.id?"bg-red-600/30":"hover:bg-zinc-800/80"}`,children:[_.jsx("span",{className:"font-bold text-zinc-400 mt-1",children:te.episodeNumber}),_.jsxs("div",{className:"flex-grow",children:[" ",_.jsx("p",{className:"font-semibold text-white",children:te.episodeTitle})," ",_.jsx("p",{className:"text-xs text-zinc-400 line-clamp-2 mt-1",children:te.description})," "]})]},te.id))})]})}),_.jsxs("div",{className:`absolute inset-0 transition-opacity duration-300 pointer-events-none ${H?"opacity-100":"opacity-0"} z-20`,children:[_.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 md:p-6 bg-gradient-to-b from-black/70 to-transparent flex items-center justify-between",children:[_.jsxs("button",{onClick:n,className:"text-white hover:opacity-80 transition-opacity flex items-center pointer-events-auto",children:[_.jsx(Rb,{}),_.jsx("span",{className:"ml-2 font-semibold",children:"Back"})]}),_.jsxs("div",{className:"text-white text-right",children:[_.jsx("p",{className:"text-sm text-gray-300",children:"Now Playing"}),Dt?_.jsxs(_.Fragment,{children:[_.jsx("h2",{className:"text-lg md:text-xl font-bold -mt-1 truncate max-w-xs md:max-w-md",title:s.title,children:s.title}),_.jsxs("p",{className:"text-sm text-gray-300",children:["S",String(s.seasonNumber).padStart(2,"0")," E",String(s.episodeNumber).padStart(2,"0"),": ",s.episodeTitle]})]}):_.jsx("h2",{className:"text-lg md:text-xl font-bold -mt-1 truncate max-w-xs md:max-w-md",title:s.title,children:s.title})]})]}),_.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 md:p-6 bg-gradient-to-t from-black/70 to-transparent pointer-events-auto",children:[_.jsx("div",{className:"group w-full cursor-pointer mb-3",onClick:Di,children:_.jsx("div",{className:"h-2 bg-white/20 rounded-full",children:_.jsx("div",{className:"h-full progress-bar-gradient rounded-full relative",style:{width:`${T/N*100}%`},children:_.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full transform scale-0 group-hover:scale-100 transition-transform duration-200"})})})}),_.jsxs("div",{className:"flex items-center justify-between text-white",children:[_.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[_.jsx("button",{onClick:()=>tn("backward"),className:"glass-control-button","aria-label":"Skip backward 10 seconds",children:_.jsx(C0,{seconds:-10,className:"w-7 h-7"})}),_.jsx("button",{onClick:Gt,className:"glass-play-pause-button","aria-label":p?"Pause":"Play",children:p?_.jsx(Cb,{className:"h-10 w-10"}):_.jsx(Ib,{className:"h-10 w-10 ml-1"})}),_.jsx("button",{onClick:()=>tn("forward"),className:"glass-control-button","aria-label":"Skip forward 10 seconds",children:_.jsx(C0,{seconds:10,className:"w-7 h-7"})}),_.jsxs("div",{className:"pl-4 flex items-center space-x-2 md:space-x-4",children:[_.jsxs("div",{ref:Oe,className:"relative flex items-center",children:[_.jsx("button",{onClick:()=>I(te=>!te),className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"Adjust volume",children:_.jsx(Ob,{level:Ie})}),A&&_.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-3 bg-zinc-800/80 backdrop-blur-sm rounded-xl p-2 pt-4 shadow-lg",children:_.jsx("div",{onMouseDown:lr,className:"w-8 h-32 flex justify-center items-end cursor-pointer group",children:_.jsx("div",{className:"w-2 h-full bg-white/20 rounded-full relative",children:_.jsx("div",{style:{height:`${Ie*100}%`},className:"absolute bottom-0 left-0 w-full rounded-full bg-white"})})})})]}),_.jsxs("span",{className:"text-sm font-mono w-32 text-left",children:[N0(T)," / ",N0(N)]})]})]}),_.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[_.jsxs("div",{ref:Fe,className:"relative",children:[_.jsx("button",{onClick:()=>je(te=>!te),className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"Select audio track",children:_.jsx(zb,{})}),me&&_.jsx("div",{className:"absolute bottom-full right-0 mb-2 bg-black/80 backdrop-blur-md rounded-lg p-1 w-32 shadow-lg",children:ce.map(te=>_.jsx("button",{onClick:()=>{W(te),je(!1)},className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${te===D?"bg-red-600 font-bold":"hover:bg-zinc-700"}`,children:te},te))})]}),_.jsxs("div",{ref:tt,className:"relative",children:[_.jsx("button",{onClick:()=>Ye(te=>!te),className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"Select subtitles",children:_.jsx(Lb,{})}),Xe&&_.jsx("div",{className:"absolute bottom-full right-0 mb-2 bg-black/80 backdrop-blur-md rounded-lg p-1 w-32 shadow-lg",children:ne.map(te=>_.jsx("button",{onClick:()=>{re(te),Ye(!1)},className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${te===Y?"bg-red-600 font-bold":"hover:bg-zinc-700"}`,children:te},te))})]}),_.jsxs("div",{ref:Ee,className:"relative",children:[_.jsx("button",{onClick:()=>M(te=>!te),className:"text-sm font-semibold p-2 hover:bg-white/10 rounded-md transition-colors",children:V}),k&&_.jsx("div",{className:"absolute bottom-full right-0 mb-2 bg-black/80 backdrop-blur-md rounded-lg p-1 w-28 shadow-lg",children:oe.map(te=>_.jsx("button",{onClick:()=>rs(te),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${te===V?"bg-red-600 font-bold":"hover:bg-zinc-700"}`,children:te},te))})]}),Dt&&_.jsxs("button",{className:"flex items-center space-x-2 text-sm hover:opacity-80 transition-opacity",children:[_.jsx(kb,{})," ",_.jsx("span",{children:"Next Ep"})]}),Dt&&_.jsxs("button",{className:"glass-glow-button flex items-center space-x-2 text-sm",onClick:()=>ae(!0),children:[_.jsx(Vb,{})," ",_.jsx("span",{children:"Episodes"})]}),_.jsx("button",{onClick:dt,children:Q?_.jsx(Pb,{}):_.jsx(jb,{})})]})]})]})]})]})},Hb=({className:s})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),qb=({className:s})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M8 5v14l11-7z"})}),Fb=({className:s})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 20 20",fill:"currentColor",children:[_.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),_.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),Gb=({className:s})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),so=({movie:s,onCardClick:e,layout:n="carousel",user:r,onEditClick:o,onDeleteClick:u,onToggleMyList:f,isInMyList:g=!1})=>{const{hours:p,minutes:y,seconds:T}=s.duration,[S,N]=J.useState(!1),B=n==="carousel"?"flex-shrink-0 w-48 md:w-64":"w-full aspect-[2/3]",H=he=>{he.stopPropagation(),f&&(f(s),g||(N(!0),setTimeout(()=>N(!1),300)))},F=he=>{he.stopPropagation(),o&&o(s)},Q=he=>{he.stopPropagation(),u&&u(s)};return _.jsxs("div",{className:`group relative h-auto rounded-lg overflow-hidden shadow-lg cursor-pointer transform transition-all duration-300 ease-in-out hover:scale-110 hover:z-10 ${B}`,onClick:()=>e(s),children:[_.jsx("img",{src:s.posterUrl,alt:s.title,className:"w-full h-full object-cover"}),(r==null?void 0:r.role)==="admin"&&(o||u)&&_.jsxs("div",{className:"absolute top-2 right-2 flex flex-col space-y-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[o&&_.jsx("button",{onClick:F,className:"w-8 h-8 bg-black/60 rounded-full flex items-center justify-center text-white hover:bg-blue-600 transition-colors","aria-label":"Edit Movie",children:_.jsx(Fb,{className:"w-4 h-4"})}),u&&_.jsx("button",{onClick:Q,className:"w-8 h-8 bg-black/60 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors","aria-label":"Delete Movie",children:_.jsx(Gb,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-between p-4",children:[_.jsx("div",{children:_.jsx("h3",{className:"text-white text-lg font-bold",children:s.title})}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("button",{className:"w-10 h-10 bg-white text-black rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:_.jsx(qb,{className:"w-6 h-6"})}),_.jsx("button",{onClick:H,className:`w-10 h-10 border-2 rounded-full flex items-center justify-center transition-all duration-200 ${g?"border-red-500 text-red-500":"border-white/50 text-white/70 hover:border-white hover:text-white"} ${S?"transform scale-125":""}`,"aria-label":"Toggle My List",children:_.jsx(Hb,{className:"w-5 h-5"})})]}),_.jsx("div",{className:"text-xs text-gray-300 space-y-1",children:_.jsx("p",{children:`${p}h ${y}m ${T}s`})})]})]})]})},Qb=({allMovies:s,onClose:e,onCardClick:n,user:r,onEditClick:o,onDeleteClick:u,onToggleMyList:f,myList:g})=>{const[p,y]=J.useState(""),[T,S]=J.useState([]),N=J.useRef(null);J.useEffect(()=>{var H;return(H=N.current)==null||H.focus(),document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}},[]),J.useEffect(()=>{if(p.trim()===""){S([]);return}const H=p.toLowerCase(),F=s.filter(Q=>Q.title.toLowerCase().includes(H));S(F)},[p,s]);const B=H=>{n(H),e()};return _.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[60] flex flex-col items-center p-4 pt-16 md:pt-24 fade-in",onClick:e,children:_.jsxs("div",{className:"w-full max-w-4xl h-full",onClick:H=>H.stopPropagation(),children:[_.jsxs("div",{className:"relative mb-8",children:[_.jsx("input",{ref:N,type:"text",value:p,onChange:H=>y(H.target.value),placeholder:"Search for movies, TV shows...",className:"w-full bg-zinc-800/50 border-2 border-zinc-700 text-white placeholder-zinc-500 rounded-full py-4 px-6 text-xl focus:outline-none focus:border-red-600 transition-colors"}),_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 absolute right-6 top-1/2 -translate-y-1/2 text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),_.jsx("button",{onClick:e,className:"absolute top-6 right-6 text-white/70 hover:text-white transition-colors",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),_.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-150px)] hide-scrollbar pb-8",children:T.length>0?_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:T.map(H=>{const F=!!g.find(Q=>Q.id===H.id);return _.jsx(so,{movie:H,onCardClick:B,layout:"grid",user:r,onEditClick:o,onDeleteClick:u,onToggleMyList:f,isInMyList:F},H.id)})}):p.trim()!==""&&_.jsx("div",{className:"text-center py-16",children:_.jsxs("p",{className:"text-zinc-400 text-lg",children:['No results found for "',p,'"']})})})]})})},Yb=()=>_.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:_.jsx("path",{fill:"#EA4335",d:"M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.386-7.439-7.574s3.344-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.85l3.44-3.44C18.254 2.189 15.5 1 12.24 1 5.47 1 0 6.48 0 13.25s5.47 12.25 12.24 12.25c7.03 0 11.95-4.838 11.95-12.034 0-.785-.073-1.564-.21-2.321H12.24z"})}),Kb=()=>_.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-current",children:_.jsx("path",{d:"M15.226 1.455C14.013.91 12.423.5 10.95.5c-2.22 0-4.59.813-5.992 2.458-1.583 1.83-2.61 4.36-2.61 6.877 0 2.852 1.22 5.56 2.85 7.378 1.43 1.58 3.53 2.586 5.61 2.586 2.22 0 3.326-.78 4.997-2.334 1.62-1.527 2.637-3.924 2.637-6.522 0-2.88-1.22-5.59-2.85-7.378a5.132 5.132 0 00-3.166-1.514zM11.604 22.5c.338 0 .68-.027 1.02-.082-1.5-.405-2.915-1.35-3.864-2.585-1.32-1.675-2.213-4.02-2.213-6.238 0-2.388.945-4.943 2.36-6.69.945-1.16 2.304-1.996 3.81-2.292-.338 0-.68.028-1.02.082-2.13.35-3.92.996-5.024 2.106C3.47 8.01 2.5 10.514 2.5 12.97c0 2.29.78 4.79 2.05 6.09 1.48 1.5 3.59 2.44 5.054 2.44z"})}),Xb=["ayahakuttyv@gmail.com","ktmuhammedrayyan@gmail.com"],D0=({onAuthSuccess:s})=>{const[e,n]=J.useState(!1),[r,o]=J.useState("signup"),[u,f]=J.useState(""),[g,p]=J.useState(""),[y,T]=J.useState(""),[S,N]=J.useState("");J.useEffect(()=>{const H=setTimeout(()=>n(!0),100);return()=>clearTimeout(H)},[]);const B=H=>{if(H.preventDefault(),!y){alert("Please enter an email address.");return}r==="signin"&&Xb.includes(y.toLowerCase())?S==="password@!123"?s(y):alert("Invalid password for admin account."):s(y)};return _.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[90] flex items-end md:items-center justify-center p-4",children:[_.jsx(yv,{}),_.jsxs("div",{className:`bg-black/70 backdrop-blur-2xl border border-white/10 rounded-t-3xl md:rounded-3xl p-6 md:p-8 w-full max-w-md relative transition-transform duration-700 ease-out transform ${e?"translate-y-0":"translate-y-full"}`,style:{backgroundImage:"radial-gradient(circle at top, rgba(255,255,255,0.05), transparent 60%)"},children:[_.jsx("div",{className:"flex justify-center mb-6",children:_.jsxs("div",{className:"bg-zinc-800/80 p-1 rounded-full flex items-center space-x-1",children:[_.jsx("button",{onClick:()=>o("signup"),className:`px-6 py-2 text-sm font-semibold rounded-full transition-colors ${r==="signup"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Sign up"}),_.jsx("button",{onClick:()=>o("signin"),className:`px-6 py-2 text-sm font-semibold rounded-full transition-colors ${r==="signin"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Sign in"})]})}),_.jsx("h2",{className:"text-3xl font-bold text-center mb-6 text-white",children:r==="signup"?"Create an account":"Sign in to Thelden"}),_.jsxs("form",{onSubmit:B,className:"space-y-4",children:[r==="signup"&&_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsx("input",{type:"text",placeholder:"John",value:u,onChange:H=>f(H.target.value),required:!0,className:"bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-red-500/50"}),_.jsx("input",{type:"text",placeholder:"Last name",value:g,onChange:H=>p(H.target.value),required:!0,className:"bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-red-500/50"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),_.jsx("input",{type:"email",value:y,onChange:H=>T(H.target.value),placeholder:"Enter your email",required:!0,className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-red-500/50"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),_.jsx("input",{type:"password",value:S,onChange:H=>N(H.target.value),placeholder:"Password",required:!0,className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-red-500/50"})]}),_.jsx("button",{type:"submit",className:"w-full bg-white text-black font-bold py-3 rounded-lg hover:bg-zinc-200 transition-colors duration-300",children:r==="signup"?"Create an account":"Sign In"})]}),_.jsxs("div",{className:"flex items-center my-6",children:[_.jsx("hr",{className:"flex-grow border-zinc-700"}),_.jsx("span",{className:"px-4 text-xs text-zinc-500",children:"OR SIGN IN WITH"}),_.jsx("hr",{className:"flex-grow border-zinc-700"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("button",{className:"flex items-center justify-center space-x-2 bg-white/5 border border-white/10 rounded-lg py-3 text-white hover:bg-white/10 transition-colors",children:[_.jsx(Yb,{})," ",_.jsx("span",{children:"Google"})]}),_.jsxs("button",{className:"flex items-center justify-center space-x-2 bg-white/5 border border-white/10 rounded-lg py-3 text-white hover:bg-white/10 transition-colors",children:[_.jsx(Kb,{})," ",_.jsx("span",{children:"Apple"})]})]}),r==="signup"&&_.jsx("p",{className:"text-center text-xs text-zinc-500 mt-6",children:"By creating an account, you agree to our Terms & Service"})]})]})},$b=({className:s="w-6 h-6"})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),Zb=({className:s="w-6 h-6"})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M18.5 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-6.75-2.25L10 8.5h3.5l1.75-4.5h-5.5Z M3 18.5V11c0-1.1.9-2 2-2h1.5l1.75 4.5h-2.5L5 15.5h3.5v3H3.5A.5.5 0 0 1 3 18.5Z"})}),Wb=({className:s="w-6 h-6"})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"})}),Jb=({className:s="w-6 h-6"})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ew=({className:s="w-6 h-6"})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:s,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),tw=({user:s,activeTab:e,onTabClick:n,onSearchClick:r})=>{const o=J.useMemo(()=>[{tab:"Home",label:"Home",icon:$b,action:()=>n("Home")},{tab:"Movies",label:"Browse",icon:Zb,action:()=>n("Movies")},{tab:"My List",label:"My List",icon:Wb,action:()=>n("My List")},{tab:"Downloads",label:"Downloads",icon:ew,action:()=>n("Downloads")},{tab:"Search",label:"Search",icon:Jb,action:r}],[n,r]),u=o.findIndex(y=>y.tab===e),f=100/o.length,p={left:`${u*f+f/2}%`,transform:"translateX(-50%) translateY(-50%)"};return _.jsx("div",{className:"bottom-nav-container",children:_.jsxs("div",{className:"bottom-nav-bar",children:[u!==-1&&_.jsx("div",{className:"nav-item-indicator",style:p}),o.map(y=>{const T=e===y.tab;return _.jsxs("button",{onClick:y.action,className:`nav-item ${T?"active":""}`,"aria-label":y.label,children:[_.jsx(y.icon,{className:"w-7 h-7"}),_.jsx("span",{className:"nav-item-label",children:y.label})]},y.tab)})]})})},nw=({user:s,onSearchClick:e,onProfileClick:n})=>_.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 bg-black/50 backdrop-blur-md",children:_.jsxs("div",{className:"px-4 md:px-8 py-3 flex items-center justify-between",children:[_.jsx("div",{className:"flex items-center space-x-8",children:_.jsx("h1",{className:"logo-silver-orange cursor-pointer",children:"THELDEN"})}),_.jsxs("div",{className:"flex items-center space-x-4 md:space-x-6",children:[_.jsx("button",{onClick:e,className:"text-gray-300 hover:text-white transition-colors",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),_.jsx("button",{onClick:n,className:"w-9 h-9 bg-gray-700 rounded-full overflow-hidden cursor-pointer border-2 border-transparent hover:border-red-500 transition-colors",children:s&&_.jsx("img",{src:s.profilePicUrl,alt:"profile",className:"w-full h-full object-cover"})})]})]})}),iw=({movie:s,onConfirm:e,onCancel:n})=>_.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 fade-in",onClick:n,children:_.jsxs("div",{className:"glass-card w-full max-w-md p-8 rounded-2xl text-center",onClick:r=>r.stopPropagation(),children:[_.jsx("img",{src:s.posterUrl,alt:s.title,className:"w-24 h-36 object-cover rounded-lg shadow-lg mx-auto mb-6"}),_.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Permanently delete this movie?"}),_.jsxs("p",{className:"text-lg text-white font-semibold mb-4",children:['"',s.title,'"']}),_.jsx("p",{className:"text-zinc-400 mb-8",children:"This action cannot be undone. All data associated with this movie will be removed."}),_.jsxs("div",{className:"flex justify-center space-x-4",children:[_.jsx("button",{onClick:n,className:"w-full bg-zinc-700 text-white font-bold py-3 rounded-lg hover:bg-zinc-600 transition-colors",children:"Cancel"}),_.jsx("button",{onClick:e,className:"w-full bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),M0=({title:s,movies:e,onCardClick:n,user:r,myList:o,onToggleMyList:u,onEditClick:f,onDeleteClick:g})=>_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-4 text-white",children:s}),_.jsx("div",{className:"-mx-8 md:-mx-16",children:_.jsx("div",{className:"flex overflow-x-scroll py-8 space-x-4 hide-scrollbar px-8 md:px-16",children:e.map(p=>{const y=!!o.find(T=>T.id===p.id);return _.jsx(so,{movie:p,onCardClick:n,user:r,onEditClick:f,onDeleteClick:g,onToggleMyList:u,isInMyList:y},p.id)})})})]}),sw=({carousels:s,recentlyViewed:e,onCardClick:n,user:r,myList:o,onToggleMyList:u,onEditClick:f,onDeleteClick:g})=>{var H;const[p,y]=J.useState(0),[T,S]=J.useState(null),N=((H=s.find(F=>F.title==="Popular on Thelden"))==null?void 0:H.movies)||[];J.useEffect(()=>{if(N.length>1){const F=setInterval(()=>{S(p);const Q=(p+1)%N.length;y(Q),setTimeout(()=>S(null),1e3)},1e4);return()=>clearInterval(F)}},[N.length,p]);const B=F=>F===p?"opacity-100":"opacity-0";return _.jsxs("div",{className:"space-y-16",children:[N.length>0&&_.jsx("div",{className:"relative h-[80vh] -mt-24",children:N.map((F,Q)=>_.jsxs("div",{className:`absolute inset-0 transition-opacity duration-1000 ease-in-out ${B(Q)}`,children:[_.jsx("img",{src:F.backdropUrl,alt:F.title,className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent"}),_.jsxs("div",{className:`absolute bottom-1/4 left-8 md:left-16 text-white max-w-2xl transition-all duration-1000 ${Q===p?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[_.jsx("h1",{"data-text":F.title,className:"text-4xl md:text-6xl font-black text-draw-animation mb-4 hero-title-font",children:F.title}),_.jsx("p",{className:"text-base md:text-lg mb-6 line-clamp-3",children:F.description}),_.jsxs("div",{className:"flex space-x-4",children:[_.jsxs("button",{onClick:()=>n(F),className:"bg-white text-black font-bold py-2 px-6 rounded flex items-center space-x-2 hover:bg-gray-200 transition-transform hover:scale-105",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:_.jsx("path",{d:"M8 5v14l11-7z"})}),_.jsx("span",{children:"Play"})]}),_.jsxs("button",{onClick:()=>n(F),className:"bg-gray-500/70 text-white font-bold py-2 px-6 rounded flex items-center space-x-2 hover:bg-gray-500 transition-transform hover:scale-105",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),_.jsx("span",{children:"More Info"})]})]})]})]},F.id))}),_.jsxs("div",{className:"px-8 md:px-16 space-y-12 pb-16",children:[e.length>0&&_.jsx(M0,{title:"Recently Viewed",movies:e,onCardClick:n,user:r,myList:o,onToggleMyList:u,onEditClick:f,onDeleteClick:g}),s.map(F=>_.jsx(M0,{title:F.title,movies:F.movies,onCardClick:n,user:r,myList:o,onToggleMyList:u,onEditClick:f,onDeleteClick:g},F.title))]})]})},rw=({allMovies:s,onCardClick:e,user:n,myList:r,onToggleMyList:o,onEditClick:u,onDeleteClick:f})=>_.jsxs("div",{className:"px-8 md:px-16 py-8",children:[_.jsx("h1",{className:"text-4xl md:text-5xl font-black text-center mb-12",children:"All Movies"}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-x-8 gap-y-12",children:s.map(g=>{const p=!!r.find(y=>y.id===g.id);return _.jsx(so,{movie:g,onCardClick:e,layout:"grid",user:n,onEditClick:u,onDeleteClick:f,onToggleMyList:o,isInMyList:p},g.id)})})]}),aw=()=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),ow=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:_.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),lw=({myList:s,watchedList:e,onCardClick:n,user:r,onToggleMyList:o,onEditClick:u,onDeleteClick:f})=>_.jsx("div",{className:"container mx-auto px-4 md:px-6 py-8",children:_.jsxs("div",{className:"my-list-glass-card p-8 md:p-12",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[_.jsxs("div",{className:"glass-card p-6 flex items-center space-x-6",children:[_.jsx(aw,{}),_.jsxs("div",{children:[_.jsx("p",{className:"text-zinc-400 text-sm",children:"Movies Watched"}),_.jsx("p",{className:"text-4xl font-bold text-white",children:e.length})]})]}),_.jsxs("div",{className:"glass-card p-6 flex items-center space-x-6",children:[_.jsx(ow,{}),_.jsxs("div",{children:[_.jsx("p",{className:"text-zinc-400 text-sm",children:"Your Rating"}),_.jsx("p",{className:"text-2xl font-bold text-white",children:"Not Rated"})]})]})]}),_.jsxs("div",{className:"mb-12",children:[_.jsx("h2",{className:"text-3xl font-bold mb-6",children:"My List"}),s.length>0?_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:s.map(g=>_.jsx(so,{movie:g,onCardClick:n,user:r,onEditClick:u,onDeleteClick:f,onToggleMyList:o,isInMyList:!0},g.id))}):_.jsx("div",{className:"text-center py-8 bg-black/20 rounded-lg",children:_.jsx("p",{className:"text-zinc-400",children:"You haven't added any movies to your list yet."})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Recently Watched"}),e.length>0?_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:e.map(g=>{const p=!!s.find(y=>y.id===g.id);return _.jsx(so,{movie:g,onCardClick:n,user:r,onEditClick:u,onDeleteClick:f,onToggleMyList:o,isInMyList:p},g.id)})}):_.jsx("div",{className:"text-center py-8 bg-black/20 rounded-lg",children:_.jsx("p",{className:"text-zinc-400",children:"You haven't watched any movies recently."})})]})]})}),uw=()=>{const[s,e]=J.useState(""),[n,r]=J.useState(""),[o,u]=J.useState(!1),[f,g]=J.useState(""),[p,y]=J.useState(""),T=S=>{if(S.preventDefault(),!s){y("Please enter a movie title.");return}u(!0),y(""),g(""),setTimeout(()=>{g(`Thank you for requesting "${s}"! Our team has received your submission and will look into adding it to the Thelden library. Happy watching!`),e(""),r(""),u(!1)},1e3)};return _.jsx("div",{className:"container mx-auto px-6 py-8 flex justify-center",children:_.jsxs("div",{className:"w-full max-w-2xl",children:[_.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Request a Movie"}),_.jsx("p",{className:"text-zinc-400 mb-8 text-center",children:"Can't find what you're looking for? Let us know!"}),_.jsxs("form",{onSubmit:T,className:"glass-card p-8 space-y-6",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"movieTitle",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Movie Title"}),_.jsx("input",{type:"text",id:"movieTitle",value:s,onChange:S=>e(S.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-red-600",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Additional Notes (optional)"}),_.jsx("textarea",{id:"notes",value:n,onChange:S=>r(S.target.value),rows:4,className:"w-full bg-zinc-800 border border-zinc-700 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-red-600",placeholder:"e.g., specific director, year, or version"})]}),_.jsx("button",{type:"submit",disabled:o,className:"w-full bg-red-600 text-white font-bold py-3 rounded-md hover:bg-red-700 transition-colors disabled:bg-red-900 disabled:cursor-not-allowed flex items-center justify-center",children:o?_.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Send Request"})]}),p&&_.jsx("p",{className:"text-red-500 mt-4 text-center",children:p}),f&&_.jsx("div",{className:"mt-8 p-6 bg-zinc-800/50 border border-zinc-700 rounded-lg text-center fade-in",children:_.jsx("p",{className:"text-lg",children:f})})]})})},cw=({filled:s,onClick:e,onMouseEnter:n,onMouseLeave:r})=>_.jsx("svg",{className:`w-10 h-10 cursor-pointer ${s?"text-yellow-400":"text-gray-600"} hover:text-yellow-300`,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",onClick:e,onMouseEnter:n,onMouseLeave:r,children:_.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),hw=({onRateSubmit:s})=>{const[e,n]=J.useState(0),[r,o]=J.useState(0),[u,f]=J.useState(""),g=p=>{p.preventDefault(),e!==0&&(console.log({rating:e,feedback:u}),s())};return _.jsx("div",{className:"container mx-auto px-6 py-8 flex justify-center",children:_.jsxs("div",{className:"w-full max-w-2xl",children:[_.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:"Rate Your Experience"}),_.jsx("p",{className:"text-zinc-400 mb-8 text-center",children:"We'd love to hear what you think about Thelden."}),_.jsxs("form",{onSubmit:g,className:"glass-card p-8 space-y-8",children:[_.jsx("div",{className:"flex justify-center star-rating space-x-2",children:[1,2,3,4,5].map(p=>_.jsx(cw,{filled:p<=(r||e),onClick:()=>n(p),onMouseEnter:()=>o(p),onMouseLeave:()=>o(0)},p))}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Share your feedback (optional)"}),_.jsx("textarea",{id:"feedback",value:u,onChange:p=>f(p.target.value),rows:5,className:"w-full bg-zinc-800 border border-zinc-700 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-red-600",placeholder:"What did you like or dislike? Any suggestions?"})]}),_.jsx("button",{type:"submit",disabled:e===0,className:"w-full bg-red-600 text-white font-bold py-3 rounded-md hover:bg-red-700 transition-colors disabled:bg-zinc-700 disabled:cursor-not-allowed",children:"Submit Feedback"})]})]})})},fw=()=>{};var O0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},dw=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],g=s[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,g=f?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,T=u>>2,S=(u&3)<<4|g>>4;let N=(g&15)<<2|y>>6,B=y&63;p||(B=64,f||(N=64)),r.push(n[T],n[S],n[N],n[B])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(_v(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):dw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||y==null||S==null)throw new mw;const N=u<<2|g>>4;if(r.push(N),y!==64){const B=g<<4&240|y>>2;if(r.push(B),S!==64){const H=y<<6&192|S;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class mw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gw=function(s){const e=_v(s);return vv.encodeByteArray(e,!0)},kc=function(s){return gw(s).replace(/\./g,"")},Ev=function(s){try{return vv.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=()=>pw().__FIREBASE_DEFAULTS__,_w=()=>{if(typeof process>"u"||typeof O0>"u")return;const s=O0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},vw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Ev(s[1]);return e&&JSON.parse(e)},th=()=>{try{return fw()||yw()||_w()||vw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Tv=s=>{var e,n;return(n=(e=th())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},bv=s=>{const e=Tv(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wv=()=>{var s;return(s=th())==null?void 0:s.config},Sv=s=>{var e;return(e=th())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mm(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[kc(JSON.stringify(n)),kc(JSON.stringify(f)),""].join(".")}const Il={};function Tw(){const s={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?s.emulator.push(e):s.prod.push(e);return s}function bw(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let k0=!1;function gm(s,e){if(typeof window>"u"||typeof document>"u"||!ea(window.location.host)||Il[s]===e||Il[s]||k0)return;Il[s]=e;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",u=Tw().prod.length>0;function f(){const N=document.getElementById(r);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function p(N,B){N.setAttribute("width","24"),N.setAttribute("id",B),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function y(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{k0=!0,f()},N}function T(N,B){N.setAttribute("id",B),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function S(){const N=bw(r),B=n("text"),H=document.getElementById(B)||document.createElement("span"),F=n("learnmore"),Q=document.getElementById(F)||document.createElement("a"),he=n("preprendIcon"),ye=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ae=N.element;g(ae),T(Q,F);const ve=y();p(ye,he),ae.append(ye,H,Q,ve),document.body.appendChild(ae)}u?(H.innerText="Preview backend disconnected.",ye.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ye.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ww(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function Sw(){var e;const s=(e=th())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Aw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Rw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Iw(){const s=un();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Cw(){return!Sw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nw(){try{return typeof indexedDB=="object"}catch{return!1}}function Dw(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="FirebaseError";class Ci extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Mw,Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?Ow(u,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new Ci(o,g,r)}}function Ow(s,e){return s.replace(kw,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const kw=/\{\$([^}]+)}/g;function Vw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Xr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(V0(u)&&V0(f)){if(!Xr(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function V0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jw(s,e){const n=new Pw(s,e);return n.subscribe.bind(n)}class Pw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Uw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=xd),o.error===void 0&&(o.error=xd),o.complete===void 0&&(o.complete=xd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uw(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(s){return s&&s._delegate?s._delegate:s}class Js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ew;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bw(e))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fr){return this.instances.has(e)}getOptions(e=Fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fr){return this.component?this.component.multipleInstances?e:Fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zw(s){return s===Fr?void 0:s}function Bw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Be||(Be={}));const qw={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Fw=Be.INFO,Gw={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},Qw=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=Gw[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=Fw,this._logHandler=Qw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const Yw=(s,e)=>e.some(n=>s instanceof n);let j0,P0;function Kw(){return j0||(j0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xw(){return P0||(P0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xv=new WeakMap,Bd=new WeakMap,Rv=new WeakMap,Rd=new WeakMap,ym=new WeakMap;function $w(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(Ks(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&xv.set(n,s)}).catch(()=>{}),ym.set(e,s),e}function Zw(s){if(Bd.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Bd.set(s,e)}let Hd={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Bd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Rv.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ks(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Ww(s){Hd=s(Hd)}function Jw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Id(this),e,...n);return Rv.set(r,e.sort?e.sort():[e]),Ks(r)}:Xw().includes(s)?function(...e){return s.apply(Id(this),e),Ks(xv.get(this))}:function(...e){return Ks(s.apply(Id(this),e))}}function e2(s){return typeof s=="function"?Jw(s):(s instanceof IDBTransaction&&Zw(s),Yw(s,Kw())?new Proxy(s,Hd):s)}function Ks(s){if(s instanceof IDBRequest)return $w(s);if(Rd.has(s))return Rd.get(s);const e=e2(s);return e!==s&&(Rd.set(s,e),ym.set(e,s)),e}const Id=s=>ym.get(s);function t2(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),g=Ks(f);return r&&f.addEventListener("upgradeneeded",p=>{r(Ks(f.result),p.oldVersion,p.newVersion,Ks(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const n2=["get","getKey","getAll","getAllKeys","count"],i2=["put","add","delete","clear"],Cd=new Map;function U0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Cd.get(e))return Cd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=i2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||n2.includes(n)))return;const u=async function(f,...g){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Cd.set(e,u),u}Ww(s=>({...s,get:(e,n,r)=>U0(e,n)||s.get(e,n,r),has:(e,n)=>!!U0(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r2(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qd="@firebase/app",L0="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new pm("@firebase/app"),a2="@firebase/app-compat",o2="@firebase/analytics-compat",l2="@firebase/analytics",u2="@firebase/app-check-compat",c2="@firebase/app-check",h2="@firebase/auth",f2="@firebase/auth-compat",d2="@firebase/database",m2="@firebase/data-connect",g2="@firebase/database-compat",p2="@firebase/functions",y2="@firebase/functions-compat",_2="@firebase/installations",v2="@firebase/installations-compat",E2="@firebase/messaging",T2="@firebase/messaging-compat",b2="@firebase/performance",w2="@firebase/performance-compat",S2="@firebase/remote-config",A2="@firebase/remote-config-compat",x2="@firebase/storage",R2="@firebase/storage-compat",I2="@firebase/firestore",C2="@firebase/ai",N2="@firebase/firestore-compat",D2="firebase",M2="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="[DEFAULT]",O2={[qd]:"fire-core",[a2]:"fire-core-compat",[l2]:"fire-analytics",[o2]:"fire-analytics-compat",[c2]:"fire-app-check",[u2]:"fire-app-check-compat",[h2]:"fire-auth",[f2]:"fire-auth-compat",[d2]:"fire-rtdb",[m2]:"fire-data-connect",[g2]:"fire-rtdb-compat",[p2]:"fire-fn",[y2]:"fire-fn-compat",[_2]:"fire-iid",[v2]:"fire-iid-compat",[E2]:"fire-fcm",[T2]:"fire-fcm-compat",[b2]:"fire-perf",[w2]:"fire-perf-compat",[S2]:"fire-rc",[A2]:"fire-rc-compat",[x2]:"fire-gcs",[R2]:"fire-gcs-compat",[I2]:"fire-fst",[N2]:"fire-fst-compat",[C2]:"fire-vertex","fire-js":"fire-js",[D2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Map,k2=new Map,Gd=new Map;function z0(s,e){try{s.container.addComponent(e)}catch(n){es.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function $r(s){const e=s.name;if(Gd.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;Gd.set(e,s);for(const n of Vc.values())z0(n,s);for(const n of k2.values())z0(n,s);return!0}function nh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ei(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xs=new ql("app","Firebase",V2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=M2;function Iv(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:Fd,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Xs.create("bad-app-name",{appName:String(o)});if(n||(n=wv()),!n)throw Xs.create("no-options");const u=Vc.get(o);if(u){if(Xr(n,u.options)&&Xr(r,u.config))return u;throw Xs.create("duplicate-app",{appName:o})}const f=new Hw(o);for(const p of Gd.values())f.addComponent(p);const g=new j2(n,r,f);return Vc.set(o,g),g}function _m(s=Fd){const e=Vc.get(s);if(!e&&s===Fd&&wv())return Iv();if(!e)throw Xs.create("no-app",{appName:s});return e}function vi(s,e,n){let r=O2[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(f.join(" "));return}$r(new Js(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="firebase-heartbeat-database",U2=1,kl="firebase-heartbeat-store";let Nd=null;function Cv(){return Nd||(Nd=t2(P2,U2,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(kl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Xs.create("idb-open",{originalErrorMessage:s.message})})),Nd}async function L2(s){try{const n=(await Cv()).transaction(kl),r=await n.objectStore(kl).get(Nv(s));return await n.done,r}catch(e){if(e instanceof Ci)es.warn(e.message);else{const n=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});es.warn(n.message)}}}async function B0(s,e){try{const r=(await Cv()).transaction(kl,"readwrite");await r.objectStore(kl).put(e,Nv(s)),await r.done}catch(n){if(n instanceof Ci)es.warn(n.message);else{const r=Xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});es.warn(r.message)}}}function Nv(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=1024,B2=30;class H2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new F2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=H0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>B2){const f=G2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=H0(),{heartbeatsToSend:r,unsentEntries:o}=q2(this._heartbeatsCache.heartbeats),u=kc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return es.warn(n),""}}}function H0(){return new Date().toISOString().substring(0,10)}function q2(s,e=z2){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),q0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),q0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class F2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nw()?Dw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return B0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return B0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function q0(s){return kc(JSON.stringify({version:2,heartbeats:s})).length}function G2(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(s){$r(new Js("platform-logger",e=>new s2(e),"PRIVATE")),$r(new Js("heartbeat",e=>new H2(e),"PRIVATE")),vi(qd,L0,s),vi(qd,L0,"esm2020"),vi("fire-js","")}Q2("");var Y2="firebase",K2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(Y2,K2,"app");var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,Dv;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,A){function I(){}I.prototype=A.prototype,x.F=A.prototype,x.prototype=new I,x.prototype.constructor=x,x.D=function(k,M,V){for(var C=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)C[Xe-2]=arguments[Xe];return A.prototype[M].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,A,I){I||(I=0);const k=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)k[M]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(M=0;M<16;++M)k[M]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=x.g[0],I=x.g[1],M=x.g[2];let V=x.g[3],C;C=A+(V^I&(M^V))+k[0]+3614090360&4294967295,A=I+(C<<7&4294967295|C>>>25),C=V+(M^A&(I^M))+k[1]+3905402710&4294967295,V=A+(C<<12&4294967295|C>>>20),C=M+(I^V&(A^I))+k[2]+606105819&4294967295,M=V+(C<<17&4294967295|C>>>15),C=I+(A^M&(V^A))+k[3]+3250441966&4294967295,I=M+(C<<22&4294967295|C>>>10),C=A+(V^I&(M^V))+k[4]+4118548399&4294967295,A=I+(C<<7&4294967295|C>>>25),C=V+(M^A&(I^M))+k[5]+1200080426&4294967295,V=A+(C<<12&4294967295|C>>>20),C=M+(I^V&(A^I))+k[6]+2821735955&4294967295,M=V+(C<<17&4294967295|C>>>15),C=I+(A^M&(V^A))+k[7]+4249261313&4294967295,I=M+(C<<22&4294967295|C>>>10),C=A+(V^I&(M^V))+k[8]+1770035416&4294967295,A=I+(C<<7&4294967295|C>>>25),C=V+(M^A&(I^M))+k[9]+2336552879&4294967295,V=A+(C<<12&4294967295|C>>>20),C=M+(I^V&(A^I))+k[10]+4294925233&4294967295,M=V+(C<<17&4294967295|C>>>15),C=I+(A^M&(V^A))+k[11]+2304563134&4294967295,I=M+(C<<22&4294967295|C>>>10),C=A+(V^I&(M^V))+k[12]+1804603682&4294967295,A=I+(C<<7&4294967295|C>>>25),C=V+(M^A&(I^M))+k[13]+4254626195&4294967295,V=A+(C<<12&4294967295|C>>>20),C=M+(I^V&(A^I))+k[14]+2792965006&4294967295,M=V+(C<<17&4294967295|C>>>15),C=I+(A^M&(V^A))+k[15]+1236535329&4294967295,I=M+(C<<22&4294967295|C>>>10),C=A+(M^V&(I^M))+k[1]+4129170786&4294967295,A=I+(C<<5&4294967295|C>>>27),C=V+(I^M&(A^I))+k[6]+3225465664&4294967295,V=A+(C<<9&4294967295|C>>>23),C=M+(A^I&(V^A))+k[11]+643717713&4294967295,M=V+(C<<14&4294967295|C>>>18),C=I+(V^A&(M^V))+k[0]+3921069994&4294967295,I=M+(C<<20&4294967295|C>>>12),C=A+(M^V&(I^M))+k[5]+3593408605&4294967295,A=I+(C<<5&4294967295|C>>>27),C=V+(I^M&(A^I))+k[10]+38016083&4294967295,V=A+(C<<9&4294967295|C>>>23),C=M+(A^I&(V^A))+k[15]+3634488961&4294967295,M=V+(C<<14&4294967295|C>>>18),C=I+(V^A&(M^V))+k[4]+3889429448&4294967295,I=M+(C<<20&4294967295|C>>>12),C=A+(M^V&(I^M))+k[9]+568446438&4294967295,A=I+(C<<5&4294967295|C>>>27),C=V+(I^M&(A^I))+k[14]+3275163606&4294967295,V=A+(C<<9&4294967295|C>>>23),C=M+(A^I&(V^A))+k[3]+4107603335&4294967295,M=V+(C<<14&4294967295|C>>>18),C=I+(V^A&(M^V))+k[8]+1163531501&4294967295,I=M+(C<<20&4294967295|C>>>12),C=A+(M^V&(I^M))+k[13]+2850285829&4294967295,A=I+(C<<5&4294967295|C>>>27),C=V+(I^M&(A^I))+k[2]+4243563512&4294967295,V=A+(C<<9&4294967295|C>>>23),C=M+(A^I&(V^A))+k[7]+1735328473&4294967295,M=V+(C<<14&4294967295|C>>>18),C=I+(V^A&(M^V))+k[12]+2368359562&4294967295,I=M+(C<<20&4294967295|C>>>12),C=A+(I^M^V)+k[5]+4294588738&4294967295,A=I+(C<<4&4294967295|C>>>28),C=V+(A^I^M)+k[8]+2272392833&4294967295,V=A+(C<<11&4294967295|C>>>21),C=M+(V^A^I)+k[11]+1839030562&4294967295,M=V+(C<<16&4294967295|C>>>16),C=I+(M^V^A)+k[14]+4259657740&4294967295,I=M+(C<<23&4294967295|C>>>9),C=A+(I^M^V)+k[1]+2763975236&4294967295,A=I+(C<<4&4294967295|C>>>28),C=V+(A^I^M)+k[4]+1272893353&4294967295,V=A+(C<<11&4294967295|C>>>21),C=M+(V^A^I)+k[7]+4139469664&4294967295,M=V+(C<<16&4294967295|C>>>16),C=I+(M^V^A)+k[10]+3200236656&4294967295,I=M+(C<<23&4294967295|C>>>9),C=A+(I^M^V)+k[13]+681279174&4294967295,A=I+(C<<4&4294967295|C>>>28),C=V+(A^I^M)+k[0]+3936430074&4294967295,V=A+(C<<11&4294967295|C>>>21),C=M+(V^A^I)+k[3]+3572445317&4294967295,M=V+(C<<16&4294967295|C>>>16),C=I+(M^V^A)+k[6]+76029189&4294967295,I=M+(C<<23&4294967295|C>>>9),C=A+(I^M^V)+k[9]+3654602809&4294967295,A=I+(C<<4&4294967295|C>>>28),C=V+(A^I^M)+k[12]+3873151461&4294967295,V=A+(C<<11&4294967295|C>>>21),C=M+(V^A^I)+k[15]+530742520&4294967295,M=V+(C<<16&4294967295|C>>>16),C=I+(M^V^A)+k[2]+3299628645&4294967295,I=M+(C<<23&4294967295|C>>>9),C=A+(M^(I|~V))+k[0]+4096336452&4294967295,A=I+(C<<6&4294967295|C>>>26),C=V+(I^(A|~M))+k[7]+1126891415&4294967295,V=A+(C<<10&4294967295|C>>>22),C=M+(A^(V|~I))+k[14]+2878612391&4294967295,M=V+(C<<15&4294967295|C>>>17),C=I+(V^(M|~A))+k[5]+4237533241&4294967295,I=M+(C<<21&4294967295|C>>>11),C=A+(M^(I|~V))+k[12]+1700485571&4294967295,A=I+(C<<6&4294967295|C>>>26),C=V+(I^(A|~M))+k[3]+2399980690&4294967295,V=A+(C<<10&4294967295|C>>>22),C=M+(A^(V|~I))+k[10]+4293915773&4294967295,M=V+(C<<15&4294967295|C>>>17),C=I+(V^(M|~A))+k[1]+2240044497&4294967295,I=M+(C<<21&4294967295|C>>>11),C=A+(M^(I|~V))+k[8]+1873313359&4294967295,A=I+(C<<6&4294967295|C>>>26),C=V+(I^(A|~M))+k[15]+4264355552&4294967295,V=A+(C<<10&4294967295|C>>>22),C=M+(A^(V|~I))+k[6]+2734768916&4294967295,M=V+(C<<15&4294967295|C>>>17),C=I+(V^(M|~A))+k[13]+1309151649&4294967295,I=M+(C<<21&4294967295|C>>>11),C=A+(M^(I|~V))+k[4]+4149444226&4294967295,A=I+(C<<6&4294967295|C>>>26),C=V+(I^(A|~M))+k[11]+3174756917&4294967295,V=A+(C<<10&4294967295|C>>>22),C=M+(A^(V|~I))+k[2]+718787259&4294967295,M=V+(C<<15&4294967295|C>>>17),C=I+(V^(M|~A))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+V&4294967295}r.prototype.v=function(x,A){A===void 0&&(A=x.length);const I=A-this.blockSize,k=this.C;let M=this.h,V=0;for(;V<A;){if(M==0)for(;V<=I;)o(this,x,V),V+=this.blockSize;if(typeof x=="string"){for(;V<A;)if(k[M++]=x.charCodeAt(V++),M==this.blockSize){o(this,k),M=0;break}}else for(;V<A;)if(k[M++]=x[V++],M==this.blockSize){o(this,k),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;A=this.o*8;for(var I=x.length-8;I<x.length;++I)x[I]=A&255,A/=256;for(this.v(x),x=Array(16),A=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)x[A++]=this.g[I]>>>k&255;return x};function u(x,A){var I=g;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=A(x)}function f(x,A){this.h=A;const I=[];let k=!0;for(let M=x.length-1;M>=0;M--){const V=x[M]|0;k&&V==A||(I[M]=V,k=!1)}this.g=I}var g={};function p(x){return-128<=x&&x<128?u(x,function(A){return new f([A|0],A<0?-1:0)}):new f([x|0],x<0?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return S;if(x<0)return Q(y(-x));const A=[];let I=1;for(let k=0;x>=I;k++)A[k]=x/I|0,I*=4294967296;return new f(A,0)}function T(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return Q(T(x.substring(1),A));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(A,8));let k=S;for(let V=0;V<x.length;V+=8){var M=Math.min(8,x.length-V);const C=parseInt(x.substring(V,V+M),A);M<8?(M=y(Math.pow(A,M)),k=k.j(M).add(y(C))):(k=k.j(I),k=k.add(y(C)))}return k}var S=p(0),N=p(1),B=p(16777216);s=f.prototype,s.m=function(){if(F(this))return-Q(this).m();let x=0,A=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);x+=(k>=0?k:4294967296+k)*A,A*=4294967296}return x},s.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(H(this))return"0";if(F(this))return"-"+Q(this).toString(x);const A=y(Math.pow(x,6));var I=this;let k="";for(;;){const M=ve(I,A).g;I=he(I,M.j(A));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(x);if(I=M,H(I))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},s.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function H(x){if(x.h!=0)return!1;for(let A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function F(x){return x.h==-1}s.l=function(x){return x=he(this,x),F(x)?-1:H(x)?0:1};function Q(x){const A=x.g.length,I=[];for(let k=0;k<A;k++)I[k]=~x.g[k];return new f(I,~x.h).add(N)}s.abs=function(){return F(this)?Q(this):this},s.add=function(x){const A=Math.max(this.g.length,x.g.length),I=[];let k=0;for(let M=0;M<=A;M++){let V=k+(this.i(M)&65535)+(x.i(M)&65535),C=(V>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);k=C>>>16,V&=65535,C&=65535,I[M]=C<<16|V}return new f(I,I[I.length-1]&-2147483648?-1:0)};function he(x,A){return x.add(Q(A))}s.j=function(x){if(H(this)||H(x))return S;if(F(this))return F(x)?Q(this).j(Q(x)):Q(Q(this).j(x));if(F(x))return Q(this.j(Q(x)));if(this.l(B)<0&&x.l(B)<0)return y(this.m()*x.m());const A=this.g.length+x.g.length,I=[];for(var k=0;k<2*A;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let M=0;M<x.g.length;M++){const V=this.i(k)>>>16,C=this.i(k)&65535,Xe=x.i(M)>>>16,Ye=x.i(M)&65535;I[2*k+2*M]+=C*Ye,ye(I,2*k+2*M),I[2*k+2*M+1]+=V*Ye,ye(I,2*k+2*M+1),I[2*k+2*M+1]+=C*Xe,ye(I,2*k+2*M+1),I[2*k+2*M+2]+=V*Xe,ye(I,2*k+2*M+2)}for(x=0;x<A;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=A;x<2*A;x++)I[x]=0;return new f(I,0)};function ye(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function ae(x,A){this.g=x,this.h=A}function ve(x,A){if(H(A))throw Error("division by zero");if(H(x))return new ae(S,S);if(F(x))return A=ve(Q(x),A),new ae(Q(A.g),Q(A.h));if(F(A))return A=ve(x,Q(A)),new ae(Q(A.g),A.h);if(x.g.length>30){if(F(x)||F(A))throw Error("slowDivide_ only works with positive integers.");for(var I=N,k=A;k.l(x)<=0;)I=ge(I),k=ge(k);var M=Ie(I,1),V=Ie(k,1);for(k=Ie(k,2),I=Ie(I,2);!H(k);){var C=V.add(k);C.l(x)<=0&&(M=M.add(I),V=C),k=Ie(k,1),I=Ie(I,1)}return A=he(x,M.j(A)),new ae(M,A)}for(M=S;x.l(A)>=0;){for(I=Math.max(1,Math.floor(x.m()/A.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=y(I),C=V.j(A);F(C)||C.l(x)>0;)I-=k,V=y(I),C=V.j(A);H(V)&&(V=N),M=M.add(V),x=he(x,C)}return new ae(M,x)}s.B=function(x){return ve(this,x).h},s.and=function(x){const A=Math.max(this.g.length,x.g.length),I=[];for(let k=0;k<A;k++)I[k]=this.i(k)&x.i(k);return new f(I,this.h&x.h)},s.or=function(x){const A=Math.max(this.g.length,x.g.length),I=[];for(let k=0;k<A;k++)I[k]=this.i(k)|x.i(k);return new f(I,this.h|x.h)},s.xor=function(x){const A=Math.max(this.g.length,x.g.length),I=[];for(let k=0;k<A;k++)I[k]=this.i(k)^x.i(k);return new f(I,this.h^x.h)};function ge(x){const A=x.g.length+1,I=[];for(let k=0;k<A;k++)I[k]=x.i(k)<<1|x.i(k-1)>>>31;return new f(I,x.h)}function Ie(x,A){const I=A>>5;A%=32;const k=x.g.length-I,M=[];for(let V=0;V<k;V++)M[V]=A>0?x.i(V+I)>>>A|x.i(V+I+1)<<32-A:x.i(V+I);return new f(M,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Dv=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,$s=f}).apply(typeof F0<"u"?F0:typeof self<"u"?self:typeof window<"u"?window:{});var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mv,Sl,Ov,Sc,Qd,kv,Vv,jv;(function(){var s,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gc=="object"&&gc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,m){if(m)e:{var v=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var U=c[w];if(!(U in v))break e;v=v[U]}c=c[c.length-1],w=v[c],m=m(w),m!=w&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(m){var v=[],w;for(w in m)Object.prototype.hasOwnProperty.call(m,w)&&v.push([w,m[w]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function p(c,m,v){return c.call.apply(c.bind,arguments)}function y(c,m,v){return y=p,y.apply(null,arguments)}function T(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function S(c,m){function v(){}v.prototype=m.prototype,c.Z=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(w,U,G){for(var se=Array(arguments.length-2),De=2;De<arguments.length;De++)se[De-2]=arguments[De];return m.prototype[U].apply(w,se)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function B(c){const m=c.length;if(m>0){const v=Array(m);for(let w=0;w<m;w++)v[w]=c[w];return v}return[]}function H(c,m){for(let w=1;w<arguments.length;w++){const U=arguments[w];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const G=U.length||0;c.length=v+G;for(let se=0;se<G;se++)c[v+se]=U[se]}else c.push(U)}}class F{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Q(c){f.setTimeout(()=>{throw c},0)}function he(){var c=x;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ye{constructor(){this.h=this.g=null}add(m,v){const w=ae.get();w.set(m,v),this.h?this.h.next=w:this.g=w,this.h=w}}var ae=new F(()=>new ve,c=>c.reset());class ve{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,Ie=!1,x=new ye,A=()=>{const c=Promise.resolve(void 0);ge=()=>{c.then(I)}};function I(){for(var c;c=he();){try{c.h.call(c.g)}catch(v){Q(v)}var m=ae;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}Ie=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return c})();function C(c){return/^[\s\xa0]*$/.test(c)}function Xe(c,m){M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}S(Xe,M),Xe.prototype.init=function(c,m){const v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Xe.Z.h.call(this)},Xe.prototype.h=function(){Xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ye="closure_listenable_"+(Math.random()*1e6|0),Y=0;function re(c,m,v,w,U){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!w,this.ha=U,this.key=++Y,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function je(c,m,v){for(const w in c)m.call(v,c[w],w,c)}function D(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function W(c){const m={};for(const v in c)m[v]=c[v];return m}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(c,m){let v,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(v in w)c[v]=w[v];for(let G=0;G<oe.length;G++)v=oe[G],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function ce(c){this.src=c,this.g={},this.h=0}ce.prototype.add=function(c,m,v,w,U){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const se=Ee(c,m,w,U);return se>-1?(m=c[se],v||(m.fa=!1)):(m=new re(m,this.src,G,!!w,U),m.fa=v,c.push(m)),m};function Oe(c,m){const v=m.type;if(v in c.g){var w=c.g[v],U=Array.prototype.indexOf.call(w,m,void 0),G;(G=U>=0)&&Array.prototype.splice.call(w,U,1),G&&(me(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ee(c,m,v,w){for(let U=0;U<c.length;++U){const G=c[U];if(!G.da&&G.listener==m&&G.capture==!!v&&G.ha==w)return U}return-1}var tt="closure_lm_"+(Math.random()*1e6|0),Fe={};function Dt(c,m,v,w,U){if(Array.isArray(m)){for(let G=0;G<m.length;G++)Dt(c,m[G],v,w,U);return null}return v=rs(v),c&&c[Ye]?c.J(m,v,g(w)?!!w.capture:!1,U):Hn(c,m,v,!1,w,U)}function Hn(c,m,v,w,U,G){if(!m)throw Error("Invalid event type");const se=g(U)?!!U.capture:!!U;let De=Di(c);if(De||(c[tt]=De=new ce(c)),v=De.add(m,v,w,se,G),v.proxy)return v;if(w=qn(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)V||(U=se),U===void 0&&(U=!1),c.addEventListener(m.toString(),w,U);else if(c.attachEvent)c.attachEvent(Gt(m.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function qn(){function c(v){return m.call(c.src,c.listener,v)}const m=tn;return c}function en(c,m,v,w,U){if(Array.isArray(m))for(var G=0;G<m.length;G++)en(c,m[G],v,w,U);else w=g(w)?!!w.capture:!!w,v=rs(v),c&&c[Ye]?(c=c.i,G=String(m).toString(),G in c.g&&(m=c.g[G],v=Ee(m,v,w,U),v>-1&&(me(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete c.g[G],c.h--)))):c&&(c=Di(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Ee(m,v,w,U)),(v=c>-1?m[c]:null)&&Ft(v))}function Ft(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Ye])Oe(m.i,c);else{var v=c.type,w=c.proxy;m.removeEventListener?m.removeEventListener(v,w,c.capture):m.detachEvent?m.detachEvent(Gt(v),w):m.addListener&&m.removeListener&&m.removeListener(w),(v=Di(m))?(Oe(v,c),v.h==0&&(v.src=null,m[tt]=null)):me(c)}}}function Gt(c){return c in Fe?Fe[c]:Fe[c]="on"+c}function tn(c,m){if(c.da)c=!0;else{m=new Xe(m,this);const v=c.listener,w=c.ha||c.src;c.fa&&Ft(c),c=v.call(w,m)}return c}function Di(c){return c=c[tt],c instanceof ce?c:null}var Mt="__closure_events_fn_"+(Math.random()*1e9>>>0);function rs(c){return typeof c=="function"?c:(c[Mt]||(c[Mt]=function(m){return c.handleEvent(m)}),c[Mt])}function dt(){k.call(this),this.i=new ce(this),this.M=this,this.G=null}S(dt,k),dt.prototype[Ye]=!0,dt.prototype.removeEventListener=function(c,m,v,w){en(this,c,m,v,w)};function yt(c,m){var v,w=c.G;if(w)for(v=[];w;w=w.G)v.push(w);if(c=c.M,w=m.type||m,typeof m=="string")m=new M(m,c);else if(m instanceof M)m.target=m.target||c;else{var U=m;m=new M(w,c),ne(m,U)}U=!0;let G,se;if(v)for(se=v.length-1;se>=0;se--)G=m.g=v[se],U=En(G,w,!0,m)&&U;if(G=m.g=c,U=En(G,w,!0,m)&&U,U=En(G,w,!1,m)&&U,v)for(se=0;se<v.length;se++)G=m.g=v[se],U=En(G,w,!1,m)&&U}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const v=c.g[m];for(let w=0;w<v.length;w++)me(v[w]);delete c.g[m],c.h--}}this.G=null},dt.prototype.J=function(c,m,v,w){return this.i.add(String(c),m,!1,v,w)},dt.prototype.K=function(c,m,v,w){return this.i.add(String(c),m,!0,v,w)};function En(c,m,v,w){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let G=0;G<m.length;++G){const se=m[G];if(se&&!se.da&&se.capture==v){const De=se.listener,ut=se.ha||se.src;se.fa&&Oe(c.i,se),U=De.call(ut,w)!==!1&&U}}return U&&!w.defaultPrevented}function lr(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function te(c){c.g=lr(()=>{c.g=null,c.i&&(c.i=!1,te(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Ne extends k{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:te(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(c){k.call(this),this.h=c,this.g={}}S(ie,k);var fe=[];function le(c){je(c.g,function(m,v){this.g.hasOwnProperty(v)&&Ft(m)},c),c.g={}}ie.prototype.N=function(){ie.Z.N.call(this),le(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=f.JSON.stringify,Pe=f.JSON.parse,mn=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function sa(){}function ra(){}var si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function as(){M.call(this,"d")}S(as,M);function Fn(){M.call(this,"c")}S(Fn,M);var Nn={},os=null;function aa(){return os=os||new dt}Nn.Ia="serverreachability";function vo(c){M.call(this,Nn.Ia,c)}S(vo,M);function ls(c){const m=aa();yt(m,new vo(m))}Nn.STAT_EVENT="statevent";function oa(c,m){M.call(this,Nn.STAT_EVENT,c),this.stat=m}S(oa,M);function Et(c){const m=aa();yt(m,new oa(m,c))}Nn.Ja="timingevent";function Jl(c,m){M.call(this,Nn.Ja,c),this.size=m}S(Jl,M);function us(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function cs(){this.g=!0}cs.prototype.ua=function(){this.g=!1};function Eo(c,m,v,w,U,G){c.info(function(){if(c.g)if(G){var se="",De=G.split("&");for(let We=0;We<De.length;We++){var ut=De[We].split("=");if(ut.length>1){const wt=ut[0];ut=ut[1];const Tn=wt.split("_");se=Tn.length>=2&&Tn[1]=="type"?se+(wt+"="+ut+"&"):se+(wt+"=redacted&")}}}else se=null;else se=G;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+m+`
`+v+`
`+se})}function To(c,m,v,w,U,G,se){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+m+`
`+v+`
`+G+" "+se})}function Mi(c,m,v,w){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+ri(c,v)+(w?" "+w:"")})}function wh(c,m){c.info(function(){return"TIMEOUT: "+m})}cs.prototype.info=function(){};function ri(c,m){if(!c.g)return m;if(!m)return null;try{const G=JSON.parse(m);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var v=G[c];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var U=w[0];if(U!="noop"&&U!="stop"&&U!="close")for(let se=1;se<w.length;se++)w[se]=""}}}}return Ae(G)}catch{return m}}var Tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oi;function ur(){}S(ur,sa),ur.prototype.g=function(){return new XMLHttpRequest},Oi=new ur;function cr(c){return encodeURIComponent(String(c))}function Sh(c){var m=1;c=c.split(":");const v=[];for(;m>0&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function Gn(c,m,v,w){this.j=c,this.i=m,this.l=v,this.S=w||1,this.V=new ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hs}function hs(){this.i=null,this.g="",this.h=!1}var la={},ai={};function oi(c,m,v){c.M=1,c.A=Vi(mt(m)),c.u=v,c.R=!0,fs(c,null)}function fs(c,m){c.F=Date.now(),hr(c),c.B=mt(c.A);var v=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),iu(v.i,"t",w),c.C=0,v=c.j.L,c.h=new hs,c.g=_a(c.j,v?m:null,!c.u),c.P>0&&(c.O=new Ne(y(c.Y,c,c.g),c.P)),m=c.V,v=c.g,w=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(fe[0]=U.toString()),U=fe);for(let G=0;G<U.length;G++){const se=Dt(v,U[G],w||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=c.J?W(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),ls(),Eo(c.i,c.v,c.B,c.l,c.S,c.u)}Gn.prototype.ba=function(c){c=c.target;const m=this.O;m&&nn(c)==3?m.j():this.Y(c)},Gn.prototype.Y=function(c){try{if(c==this.g)e:{const De=nn(this.g),ut=this.g.ya(),We=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||br(this.g)))){this.K||De!=4||ut==7||(ut==8||We<=0?ls(3):ls(2)),ui(this);var m=this.g.ca();this.X=m;var v=ds(this);if(this.o=m==200,To(this.i,this.v,this.B,this.l,this.S,De,m),this.o){if(this.U&&!this.L){t:{if(this.g){var w,U=this.g;if((w=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(w)){var G=w;break t}}G=null}if(c=G)Mi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ua(this,c);else{this.o=!1,this.m=3,Et(12),ci(this),fr(this);break e}}if(this.R){c=!0;let wt;for(;!this.K&&this.C<v.length;)if(wt=eu(this,v),wt==ai){De==4&&(this.m=4,Et(14),c=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==la){this.m=4,Et(15),Mi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Mi(this.i,this.l,wt,null),ua(this,wt);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||v.length!=0||this.h.h||(this.m=1,Et(16),c=!1),this.o=this.o&&c,!c)Mi(this.i,this.l,v,"[Invalid Chunked Response]"),ci(this),fr(this);else if(v.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Do(se),se.P=!0,Et(11))}}else Mi(this.i,this.l,v,null),ua(this,v);De==4&&ci(this),this.o&&!this.K&&(De==4?Mo(this.j,this):(this.o=!1,hr(this)))}else wr(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),ci(this),fr(this)}}}catch{}finally{}};function ds(c){if(!bt(c))return c.g.la();const m=br(c.g);if(m==="")return"";let v="";const w=m.length,U=nn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ci(c),fr(c),"";c.h.i=new f.TextDecoder}for(let G=0;G<w;G++)c.h.h=!0,v+=c.h.i.decode(m[G],{stream:!(U&&G==w-1)});return m.length=0,c.h.g+=v,c.C=0,c.h.g}function bt(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function eu(c,m){var v=c.C,w=m.indexOf(`
`,v);return w==-1?ai:(v=Number(m.substring(v,w)),isNaN(v)?la:(w+=1,w+v>m.length?ai:(m=m.slice(w,w+v),c.C=w+v,m)))}Gn.prototype.cancel=function(){this.K=!0,ci(this)};function hr(c){c.T=Date.now()+c.H,li(c,c.H)}function li(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=us(y(c.aa,c),m)}function ui(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Gn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(wh(this.i,this.B),this.M!=2&&(ls(),Et(17)),ci(this),this.m=2,fr(this)):li(this,this.T-c)};function fr(c){c.j.I==0||c.K||Mo(c.j,c)}function ci(c){ui(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,le(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function ua(c,m){try{var v=c.j;if(v.I!=0&&(v.g==c||gr(v.h,c))){if(!c.L&&gr(v.h,c)&&v.I==3){try{var w=v.Ba.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ya(v),hi(v);else break e;No(v),Et(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=us(y(v.Va,v),6e3));Dn(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ui(v,11)}else if((c.L||v.g==c)&&ya(v),!C(m))for(U=v.Ba.g.parse(m),m=0;m<U.length;m++){let We=U[m];const wt=We[0];if(!(wt<=v.K))if(v.K=wt,We=We[1],v.I==2)if(We[0]=="c"){v.M=We[1],v.ba=We[2];const Tn=We[3];Tn!=null&&(v.ka=Tn,v.j.info("VER="+v.ka));const fi=We[4];fi!=null&&(v.za=fi,v.j.info("SVER="+v.za));const Kn=We[5];Kn!=null&&typeof Kn=="number"&&Kn>0&&(w=1.5*Kn,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Xn=c.g;if(Xn){const $n=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var G=w.h;G.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ca(G,G.h),G.h=null))}if(w.G){const ko=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;ko&&(w.wa=ko,nt(w.J,w.G,ko))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var se=c;if(w.na=fu(w,w.L?w.ba:null,w.W),se.L){ki(w.h,se);var De=se,ut=w.O;ut&&(De.H=ut),De.D&&(ui(De),hr(De)),w.g=se}else lu(w);v.i.length>0&&Rr(v)}else We[0]!="stop"&&We[0]!="close"||Ui(v,7);else v.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Ui(v,7):Ar(v):We[0]!="noop"&&v.l&&v.l.qa(We),v.A=0)}}ls(4)}catch{}}var Ah=class{constructor(c,m){this.g=c,this.map=m}};function dr(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Dn(c){return c.h?1:c.g?c.g.size:0}function gr(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function ca(c,m){c.g?c.g.add(m):c.h=m}function ki(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}dr.prototype.cancel=function(){if(this.i=ha(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ha(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.G);return m}return B(c.i)}var fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xh(c,m){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const w=c[v].indexOf("=");let U,G=null;w>=0?(U=c[v].substring(0,w),G=c[v].substring(w+1)):U=c[v],m(U,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Qn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof Qn?(this.l=c.l,ms(this,c.j),this.o=c.o,this.g=c.g,pr(this,c.u),this.h=c.h,gs(this,su(c.i)),this.m=c.m):c&&(m=String(c).match(fa))?(this.l=!1,ms(this,m[1]||"",!0),this.o=yr(m[2]||""),this.g=yr(m[3]||"",!0),pr(this,m[4]),this.h=yr(m[5]||"",!0),gs(this,m[6]||"",!0),this.m=yr(m[7]||"")):(this.l=!1,this.i=new Mn(null,this.l))}Qn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Lt(m,wo,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Lt(m,wo,!0),"@"),c.push(cr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Lt(v,v.charAt(0)=="/"?ps:So,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Lt(v,nu)),c.join("")},Qn.prototype.resolve=function(c){const m=mt(this);let v=!!c.j;v?ms(m,c.j):v=!!c.o,v?m.o=c.o:v=!!c.g,v?m.g=c.g:v=c.u!=null;var w=c.h;if(v)pr(m,c.u);else if(v=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var U=m.h.lastIndexOf("/");U!=-1&&(w=m.h.slice(0,U+1)+w)}if(U=w,U==".."||U==".")w="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){w=U.lastIndexOf("/",0)==0,U=U.split("/");const G=[];for(let se=0;se<U.length;){const De=U[se++];De=="."?w&&se==U.length&&G.push(""):De==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),w&&se==U.length&&G.push("")):(G.push(De),w=!0)}w=G.join("/")}else w=U}return v?m.h=w:v=c.i.toString()!=="",v?gs(m,su(c.i)):v=!!c.m,v&&(m.m=c.m),m};function mt(c){return new Qn(c)}function ms(c,m,v){c.j=v?yr(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function pr(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function gs(c,m,v){m instanceof Mn?(c.i=m,Ro(c.i,c.l)):(v||(m=Lt(m,tu)),c.i=new Mn(m,c.l))}function nt(c,m,v){c.i.set(m,v)}function Vi(c){return nt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function yr(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Lt(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,bo),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function bo(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var wo=/[#\/\?@]/g,So=/[#\?:]/g,ps=/[#\?]/g,tu=/[#\?@]/g,nu=/#/g;function Mn(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function ji(c){c.g||(c.g=new Map,c.h=0,c.i&&xh(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=Mn.prototype,s.add=function(c,m){ji(this),this.i=null,c=Yn(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function Ao(c,m){ji(c),m=Yn(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function xo(c,m){return ji(c),m=Yn(c,m),c.g.has(m)}s.forEach=function(c,m){ji(this),this.g.forEach(function(v,w){v.forEach(function(U){c.call(m,U,w,this)},this)},this)};function da(c,m){ji(c);let v=[];if(typeof m=="string")xo(c,m)&&(v=v.concat(c.g.get(Yn(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)v=v.concat(c[m]);return v}s.set=function(c,m){return ji(this),this.i=null,c=Yn(this,c),xo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=da(this,c),c.length>0?String(c[0]):m):m};function iu(c,m,v){Ao(c,m),v.length>0&&(c.i=null,c.g.set(Yn(c,m),B(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let w=0;w<m.length;w++){var v=m[w];const U=cr(v);v=da(this,v);for(let G=0;G<v.length;G++){let se=U;v[G]!==""&&(se+="="+cr(v[G])),c.push(se)}}return this.i=c.join("&")};function su(c){const m=new Mn;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Yn(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Ro(c,m){m&&!c.j&&(ji(c),c.i=null,c.g.forEach(function(v,w){const U=w.toLowerCase();w!=U&&(Ao(this,w),iu(this,U,v))},c)),c.j=m}function Io(c,m){const v=new cs;if(f.Image){const w=new Image;w.onload=T(cn,v,"TestLoadImage: loaded",!0,m,w),w.onerror=T(cn,v,"TestLoadImage: error",!1,m,w),w.onabort=T(cn,v,"TestLoadImage: abort",!1,m,w),w.ontimeout=T(cn,v,"TestLoadImage: timeout",!1,m,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else m(!1)}function ys(c,m){const v=new cs,w=new AbortController,U=setTimeout(()=>{w.abort(),cn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:w.signal}).then(G=>{clearTimeout(U),G.ok?cn(v,"TestPingServer: ok",!0,m):cn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),cn(v,"TestPingServer: error",!1,m)})}function cn(c,m,v,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(v)}catch{}}function ru(){this.g=new mn}function _r(c){this.i=c.Sb||null,this.h=c.ab||!1}S(_r,sa),_r.prototype.g=function(){return new vr(this.i,this.h)};function vr(c,m){dt.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(vr,dt),s=vr.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Pi(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hn(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_s(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function _s(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?hn(this):Pi(this),this.readyState==3&&_s(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,hn(this))},s.Na=function(c){this.g&&(this.response=c,hn(this))},s.ga=function(){this.g&&hn(this)};function hn(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Pi(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Pi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function vs(c){let m="";return je(c,function(v,w){m+=w,m+=":",m+=v,m+=`\r
`}),m}function On(c,m,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=vs(v),typeof c=="string"?v!=null&&cr(v):nt(c,m,v))}function ot(c){dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(ot,dt);var ma=/^https?$/i,au=["POST","PUT"];s=ot.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oi.g(),this.g.onreadystatechange=N(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(G){Er(this,G);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)v.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const G of w.keys())v.set(G,w.get(G));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),U=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(au,m,void 0)>=0)||w||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of v)this.g.setRequestHeader(G,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Er(this,G)}};function Er(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Tr(c),Ot(c)}function Tr(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,yt(this,"complete"),yt(this,"abort"),Ot(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ot(this,!0)),ot.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Co(this):this.Xa())},s.Xa=function(){Co(this)};function Co(c){if(c.h&&typeof u<"u"){if(c.v&&nn(c)==4)setTimeout(c.Ca.bind(c),0);else if(yt(c,"readystatechange"),nn(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var w;if(w=G===0){let se=String(c.D).match(fa)[1]||null;!se&&f.self&&f.self.location&&(se=f.self.location.protocol.slice(0,-1)),w=!ma.test(se?se.toLowerCase():"")}v=w}if(v)yt(c,"complete"),yt(c,"success");else{c.o=6;try{var U=nn(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",Tr(c)}}finally{Ot(c)}}}}function Ot(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,m||yt(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function nn(c){return c.g?c.g.readyState:0}s.ca=function(){try{return nn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Pe(m)}};function br(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wr(c){const m={};c=(c.g&&nn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(C(c[w]))continue;var v=Sh(c[w]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=m[U]||[];m[U]=G,G.push(v)}D(m,function(w){return w.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function ga(c){this.za=0,this.i=[],this.j=new cs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sr("baseRetryDelayMs",5e3,c),this.Za=Sr("retryDelaySeedMs",1e4,c),this.Ta=Sr("forwardChannelMaxRetries",2,c),this.va=Sr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new dr(c&&c.concurrentRequestLimit),this.Ba=new ru,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ga.prototype,s.ka=8,s.I=1,s.connect=function(c,m,v,w){Et(0),this.W=c,this.H=m||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=fu(this,null,this.W),Rr(this)};function Ar(c){if(xr(c),c.I==3){var m=c.V++,v=mt(c.J);if(nt(v,"SID",c.M),nt(v,"RID",m),nt(v,"TYPE","terminate"),Ir(c,v),m=new Gn(c,c.j,m),m.M=2,m.A=Vi(mt(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.A,v=!0),v||(m.g=_a(m.j,null),m.g.ea(m.A)),m.F=Date.now(),hr(m)}hu(c)}function hi(c){c.g&&(Do(c),c.g.cancel(),c.g=null)}function xr(c){hi(c),c.v&&(f.clearTimeout(c.v),c.v=null),ya(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Rr(c){if(!mr(c.h)&&!c.m){c.m=!0;var m=c.Ea;ge||A(),Ie||(ge(),Ie=!0),x.add(m,c),c.D=0}}function Rh(c,m){return Dn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=us(y(c.Ea,c,m),cu(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Gn(this,this.j,c);let G=this.o;if(this.U&&(G?(G=W(G),ne(G,this.U)):G=this.U),this.u!==null||this.R||(U.J=G,G=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=pa(this,U,m),v=mt(this.J),nt(v,"RID",c),nt(v,"CVER",22),this.G&&nt(v,"X-HTTP-Session-Id",this.G),Ir(this,v),G&&(this.R?m="headers="+cr(vs(G))+"&"+m:this.u&&On(v,this.u,G)),ca(this.h,U),this.Ra&&nt(v,"TYPE","init"),this.S?(nt(v,"$req",m),nt(v,"SID","null"),U.U=!0,oi(U,v,null)):oi(U,v,m),this.I=2}}else this.I==3&&(c?ou(this,c):this.i.length==0||mr(this.h)||ou(this))};function ou(c,m){var v;m?v=m.l:v=c.V++;const w=mt(c.J);nt(w,"SID",c.M),nt(w,"RID",v),nt(w,"AID",c.K),Ir(c,w),c.u&&c.o&&On(w,c.u,c.o),v=new Gn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),m&&(c.i=m.G.concat(c.i)),m=pa(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ca(c.h,v),oi(v,w,m)}function Ir(c,m){c.H&&je(c.H,function(v,w){nt(m,w,v)}),c.l&&je({},function(v,w){nt(m,w,v)})}function pa(c,m,v){v=Math.min(c.i.length,v);const w=c.l?y(c.l.Ka,c.l,c):null;e:{var U=c.i;let De=-1;for(;;){const ut=["count="+v];De==-1?v>0?(De=U[0].g,ut.push("ofs="+De)):De=0:ut.push("ofs="+De);let We=!0;for(let wt=0;wt<v;wt++){var G=U[wt].g;const Tn=U[wt].map;if(G-=De,G<0)De=Math.max(0,U[wt].g-100),We=!1;else try{G="req"+G+"_"||"";try{var se=Tn instanceof Map?Tn:Object.entries(Tn);for(const[fi,Kn]of se){let Xn=Kn;g(Kn)&&(Xn=Ae(Kn)),ut.push(G+fi+"="+encodeURIComponent(Xn))}}catch(fi){throw ut.push(G+"type="+encodeURIComponent("_badmap")),fi}}catch{w&&w(Tn)}}if(We){se=ut.join("&");break e}}se=void 0}return c=c.i.splice(0,v),m.G=c,se}function lu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;ge||A(),Ie||(ge(),Ie=!0),x.add(m,c),c.A=0}}function No(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=us(y(c.Da,c),cu(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,uu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=us(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),hi(this),uu(this))};function Do(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function uu(c){c.g=new Gn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=mt(c.na);nt(m,"RID","rpc"),nt(m,"SID",c.M),nt(m,"AID",c.K),nt(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&nt(m,"TO",c.ia),nt(m,"TYPE","xmlhttp"),Ir(c,m),c.u&&c.o&&On(m,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Vi(mt(m)),v.u=null,v.R=!0,fs(v,c)}s.Va=function(){this.C!=null&&(this.C=null,hi(this),No(this),Et(19))};function ya(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Mo(c,m){var v=null;if(c.g==m){ya(c),Do(c),c.g=null;var w=2}else if(gr(c.h,m))v=m.G,ki(c.h,m),w=1;else return;if(c.I!=0){if(m.o)if(w==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var U=c.D;w=aa(),yt(w,new Jl(w,v)),Rr(c)}else lu(c);else if(U=m.m,U==3||U==0&&m.X>0||!(w==1&&Rh(c,m)||w==2&&No(c)))switch(v&&v.length>0&&(m=c.h,m.i=m.i.concat(v)),U){case 1:Ui(c,5);break;case 4:Ui(c,10);break;case 3:Ui(c,6);break;default:Ui(c,2)}}}function cu(c,m){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*m}function Ui(c,m){if(c.j.info("Error code "+m),m==2){var v=y(c.bb,c),w=c.Ua;const U=!w;w=new Qn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ms(w,"https"),Vi(w),U?Io(w.toString(),v):ys(w.toString(),v)}else Et(2);c.I=0,c.l&&c.l.pa(m),hu(c),xr(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function hu(c){if(c.I=0,c.ja=[],c.l){const m=ha(c.h);(m.length!=0||c.i.length!=0)&&(H(c.ja,m),H(c.ja,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.oa()}}function fu(c,m,v){var w=v instanceof Qn?mt(v):new Qn(v);if(w.g!="")m&&(w.g=m+"."+w.g),pr(w,w.u);else{var U=f.location;w=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const G=new Qn(null);w&&ms(G,w),m&&(G.g=m),U&&pr(G,U),v&&(G.h=v),w=G}return v=c.G,m=c.wa,v&&m&&nt(w,v,m),nt(w,"VER",c.ka),Ir(c,w),w}function _a(c,m,v){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new ot(new _r({ab:v})):new ot(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}s=du.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function va(){}va.prototype.g=function(c,m){return new fn(c,m)};function fn(c,m){dt.call(this),this.g=new ga(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!C(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Es(this)}S(fn,dt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ar(this.g)},fn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Ae(c),c=v);m.i.push(new Ah(m.Ya++,c)),m.I==3&&Rr(m)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ar(this.g),delete this.g,fn.Z.N.call(this)};function Oo(c){as.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}S(Oo,as);function mu(){Fn.call(this),this.status=1}S(mu,Fn);function Es(c){this.g=c}S(Es,du),Es.prototype.ra=function(){yt(this.g,"a")},Es.prototype.qa=function(c){yt(this.g,new Oo(c))},Es.prototype.pa=function(c){yt(this.g,new mu)},Es.prototype.oa=function(){yt(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,jv=function(){return new va},Vv=function(){return aa()},kv=Nn,Qd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,Sc=Tt,Qt.COMPLETE="complete",Ov=Qt,ra.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Sl=ra,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,Mv=ot}).apply(typeof gc<"u"?gc:typeof self<"u"?self:typeof window<"u"?window:{});const G0="@firebase/firestore",Q0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new pm("@firebase/firestore");function Ka(){return Zr.logLevel}function ue(s,...e){if(Zr.logLevel<=Be.DEBUG){const n=e.map(vm);Zr.debug(`Firestore (${mo}): ${s}`,...n)}}function ts(s,...e){if(Zr.logLevel<=Be.ERROR){const n=e.map(vm);Zr.error(`Firestore (${mo}): ${s}`,...n)}}function ro(s,...e){if(Zr.logLevel<=Be.WARN){const n=e.map(vm);Zr.warn(`Firestore (${mo}): ${s}`,...n)}}function vm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Pv(s,r,n)}function Pv(s,e,n){let r=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ts(r),new Error(r)}function Ze(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||Pv(e,o,r)}function Me(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(on.UNAUTHENTICATED)))}shutdown(){}}class $2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string",31837,{l:r}),new Uv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class W2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class J2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new W2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Y0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const r=u=>{u.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ue("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Y0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Y0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=tS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function He(s,e){return s<e?-1:s>e?1:0}function Yd(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Dd(o)===Dd(u)?He(o,u):Dd(o)?1:-1}return He(s.length,e.length)}const nS=55296,iS=57343;function Dd(s){const e=s.charCodeAt(0);return e>=nS&&e<=iS}function ao(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="__name__";class _i{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _i.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _i?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=_i.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return He(e.length,n.length)}static compareSegments(e,n){const r=_i.isNumericId(e),o=_i.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?_i.extractNumericId(e).compare(_i.extractNumericId(n)):Yd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class ct extends _i{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new ct(n)}static emptyPath(){return new ct([])}}const sS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends _i{construct(e,n,r){return new Zt(e,n,r)}static isValidIdentifier(e){return sS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K0}static keyField(){return new Zt([K0])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new pe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(r+=g,o++):(u(),o++)}if(u(),f)throw new pe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ct.fromString(e))}static fromName(e){return new Te(ct.fromString(e).popFirst(5))}static empty(){return new Te(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(s,e,n){if(!n)throw new pe(ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function rS(s,e,n,r){if(e===!0&&r===!0)throw new pe(ee.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function X0(s){if(!Te.isDocumentKey(s))throw new pe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function $0(s){if(Te.isDocumentKey(s))throw new pe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function zv(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Tm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Se(12329,{type:typeof s})}function Zs(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tm(s);throw new pe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Gl(s,e){if(!zv(s))throw new pe(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new pe(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=-62135596800,W0=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*W0);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Z0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W0}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gl(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Nt("string",ht._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ht(0,0))}static max(){return new Ce(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function aS(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new er(o,Te.empty(),e)}function oS(s){return new er(s.readTime,s.key,Vl)}class er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new er(Ce.min(),Te.empty(),Vl)}static max(){return new er(Ce.max(),Te.empty(),Vl)}}function lS(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(s.documentKey,e.documentKey),n!==0?n:He(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(s){if(s.code!==ee.FAILED_PRECONDITION||s.message!==uS)throw s;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Z.reject(n)}static resolve(e){return new Z(((n,r)=>{n(e)}))}static reject(e){return new Z(((n,r)=>{r(e)}))}static waitFor(e){return new Z(((n,r)=>{let o=0,u=0,f=!1;e.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&n()}),(p=>r(p)))})),f=!0,u===o&&n()}))}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next((o=>o?Z.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new Z(((r,o)=>{const u=e.length,f=new Array(u);let g=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next((T=>{f[y]=T,++g,g===u&&r(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new Z(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function hS(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ih.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=-1;function sh(s){return s==null}function jc(s){return s===0&&1/s==-1/0}function fS(s){return typeof s=="number"&&Number.isInteger(s)&&!jc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="";function dS(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=J0(e)),e=mS(s.get(n),e);return J0(e)}function mS(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case Bv:n+="";break;default:n+=u}}return n}function J0(s){return s+Bv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ar(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Hv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??$t.RED,this.left=o??$t.EMPTY,this.right=u??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new $t(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class t_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Ut(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qv("Invalid base64 string: "+u):u}})(e);return new Jt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const gS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(s){if(Ze(!!s,39018),typeof s=="string"){let e=0;const n=gS.exec(s);if(Ze(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(s.seconds),nanos:xt(s.nanos)}}function xt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function nr(s){return typeof s=="string"?Jt.fromBase64String(s):Jt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="server_timestamp",Gv="__type__",Qv="__previous_value__",Yv="__local_write_time__";function wm(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Gv])==null?void 0:r.stringValue)===Fv}function rh(s){const e=s.mapValue.fields[Qv];return wm(e)?rh(e):e}function jl(s){const e=tr(s.mapValue.fields[Yv].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r,o,u,f,g,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const Pc="(default)";class Pl{constructor(e,n){this.projectId=e,this.database=n||Pc}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===Pc}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="__type__",yS="__max__",yc={mapValue:{}},Xv="__vector__",Uc="value";function ir(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wm(s)?4:vS(s)?9007199254740991:_S(s)?10:11:Se(28295,{value:s})}function xi(s,e){if(s===e)return!0;const n=ir(s);if(n!==ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return jl(s).isEqual(jl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=tr(o.timestampValue),g=tr(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return nr(o.bytesValue).isEqual(nr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return xt(o.geoPointValue.latitude)===xt(u.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return xt(o.integerValue)===xt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=xt(o.doubleValue),g=xt(u.doubleValue);return f===g?jc(f)===jc(g):isNaN(f)&&isNaN(g)}return!1})(s,e);case 9:return ao(s.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(e_(f)!==e_(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!xi(f[p],g[p])))return!1;return!0})(s,e);default:return Se(52216,{left:s})}}function Ul(s,e){return(s.values||[]).find((n=>xi(n,e)))!==void 0}function oo(s,e){if(s===e)return 0;const n=ir(s),r=ir(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return(function(u,f){const g=xt(u.integerValue||u.doubleValue),p=xt(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return n_(s.timestampValue,e.timestampValue);case 4:return n_(jl(s),jl(e));case 5:return Yd(s.stringValue,e.stringValue);case 6:return(function(u,f){const g=nr(u),p=nr(f);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(u,f){const g=u.split("/"),p=f.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=He(g[y],p[y]);if(T!==0)return T}return He(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,f){const g=He(xt(u.latitude),xt(f.latitude));return g!==0?g:He(xt(u.longitude),xt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return i_(s.arrayValue,e.arrayValue);case 10:return(function(u,f){var N,B,H,F;const g=u.fields||{},p=f.fields||{},y=(N=g[Uc])==null?void 0:N.arrayValue,T=(B=p[Uc])==null?void 0:B.arrayValue,S=He(((H=y==null?void 0:y.values)==null?void 0:H.length)||0,((F=T==null?void 0:T.values)==null?void 0:F.length)||0);return S!==0?S:i_(y,T)})(s.mapValue,e.mapValue);case 11:return(function(u,f){if(u===yc.mapValue&&f===yc.mapValue)return 0;if(u===yc.mapValue)return 1;if(f===yc.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let S=0;S<p.length&&S<T.length;++S){const N=Yd(p[S],T[S]);if(N!==0)return N;const B=oo(g[p[S]],y[T[S]]);if(B!==0)return B}return He(p.length,T.length)})(s.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function n_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const n=tr(s),r=tr(e),o=He(n.seconds,r.seconds);return o!==0?o:He(n.nanos,r.nanos)}function i_(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=oo(n[o],r[o]);if(u)return u}return He(n.length,r.length)}function lo(s){return Kd(s)}function Kd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=tr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return nr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Te.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Kd(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Kd(n.fields[f])}`;return o+"}"})(s.mapValue):Se(61005,{value:s})}function Ac(s){switch(ir(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rh(s);return e?16+Ac(e):16;case 5:return 2*s.stringValue.length;case 6:return nr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Ac(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return ar(r.fields,((u,f)=>{o+=u.length+Ac(f)})),o})(s.mapValue);default:throw Se(13486,{value:s})}}function Xd(s){return!!s&&"integerValue"in s}function Sm(s){return!!s&&"arrayValue"in s}function s_(s){return!!s&&"nullValue"in s}function r_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function xc(s){return!!s&&"mapValue"in s}function _S(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Kv])==null?void 0:r.stringValue)===Xv}function Cl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return ar(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Cl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cl(s.arrayValue.values[n]);return e}return{...s}}function vS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===yS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(n)}setAll(e){let n=Zt.emptyPath(),r={},o=[];e.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=g.popLast()}f?r[g.lastSegment()]=Cl(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];xc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){ar(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new vn(Cl(this.value))}}function $v(s){const e=[];return ar(s.fields,((n,r)=>{const o=new Zt([n]);if(xc(r)){const u=$v(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,o,u,f,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new ln(e,0,Ce.min(),Ce.min(),Ce.min(),vn.empty(),0)}static newFoundDocument(e,n,r,o){return new ln(e,1,n,Ce.min(),r,o,0)}static newNoDocument(e,n){return new ln(e,2,n,Ce.min(),Ce.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,Ce.min(),Ce.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.position=e,this.inclusive=n}}function a_(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=Te.comparator(Te.fromName(f.referenceValue),n.key):r=oo(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function o_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!xi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function ES(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{}class jt extends Zv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bS(e,n,r):n==="array-contains"?new AS(e,r):n==="in"?new xS(e,r):n==="not-in"?new RS(e,r):n==="array-contains-any"?new IS(e,r):new jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wS(e,r):new SS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(oo(n,this.value)):n!==null&&ir(this.value)===ir(n)&&this.matchesComparison(oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends Zv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ri(e,n)}matches(e){return Wv(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wv(s){return s.op==="and"}function Jv(s){return TS(s)&&Wv(s)}function TS(s){for(const e of s.filters)if(e instanceof Ri)return!1;return!0}function $d(s){if(s instanceof jt)return s.field.canonicalString()+s.op.toString()+lo(s.value);if(Jv(s))return s.filters.map((e=>$d(e))).join(",");{const e=s.filters.map((n=>$d(n))).join(",");return`${s.op}(${e})`}}function e1(s,e){return s instanceof jt?(function(r,o){return o instanceof jt&&r.op===o.op&&r.field.isEqual(o.field)&&xi(r.value,o.value)})(s,e):s instanceof Ri?(function(r,o){return o instanceof Ri&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,g)=>u&&e1(f,o.filters[g])),!0):!1})(s,e):void Se(19439)}function t1(s){return s instanceof jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`})(s):s instanceof Ri?(function(n){return n.op.toString()+" {"+n.getFilters().map(t1).join(" ,")+"}"})(s):"Filter"}class bS extends jt{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class wS extends jt{constructor(e,n){super(e,"in",n),this.keys=n1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class SS extends jt{constructor(e,n){super(e,"not-in",n),this.keys=n1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function n1(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class AS extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sm(n)&&Ul(n.arrayValue,this.value)}}class xS extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ul(this.value.arrayValue,n)}}class RS extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ul(this.value.arrayValue,n)}}class IS extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ul(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n=null,r=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function l_(s,e=null,n=[],r=[],o=null,u=null,f=null){return new CS(s,e,n,r,o,u,f)}function Am(s){const e=Me(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>$d(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>lo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>lo(r))).join(",")),e.Te=n}return e.Te}function xm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!ES(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!e1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!o_(s.startAt,e.startAt)&&o_(s.endAt,e.endAt)}function Zd(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n=null,r=[],o=[],u=null,f="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function NS(s,e,n,r,o,u,f,g){return new ah(s,e,n,r,o,u,f,g)}function Rm(s){return new ah(s)}function u_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function DS(s){return s.collectionGroup!==null}function Nl(s){const e=Me(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Ut(Zt.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new zc(u,r))})),n.has(Zt.keyField().canonicalString())||e.Ie.push(new zc(Zt.keyField(),r))}return e.Ie}function Ei(s){const e=Me(s);return e.Ee||(e.Ee=MS(e,Nl(s))),e.Ee}function MS(s,e){if(s.limitType==="F")return l_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new zc(o.field,u)}));const n=s.endAt?new Lc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Lc(s.startAt.position,s.startAt.inclusive):null;return l_(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Wd(s,e,n){return new ah(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function oh(s,e){return xm(Ei(s),Ei(e))&&s.limitType===e.limitType}function i1(s){return`${Am(Ei(s))}|lt:${s.limitType}`}function Xa(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>t1(o))).join(", ")}]`),sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>lo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>lo(o))).join(",")),`Target(${r})`})(Ei(s))}; limitType=${s.limitType})`}function lh(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Te.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of Nl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(f,g,p){const y=a_(f,g,p);return f.inclusive?y<=0:y<0})(r.startAt,Nl(r),o)||r.endAt&&!(function(f,g,p){const y=a_(f,g,p);return f.inclusive?y>=0:y>0})(r.endAt,Nl(r),o))})(s,e)}function OS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function s1(s){return(e,n)=>{let r=!1;for(const o of Nl(s)){const u=kS(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function kS(s,e,n){const r=s.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,f,g){const p=f.data.field(u),y=g.data.field(u);return p!==null&&y!==null?oo(p,y):Se(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ar(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return Hv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new pt(Te.comparator);function ns(){return VS}const r1=new pt(Te.comparator);function Al(...s){let e=r1;for(const n of s)e=e.insert(n.key,n);return e}function a1(s){let e=r1;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Gr(){return Dl()}function o1(){return Dl()}function Dl(){return new na((s=>s.toString()),((s,e)=>s.isEqual(e)))}const jS=new pt(Te.comparator),PS=new Ut(Te.comparator);function qe(...s){let e=PS;for(const n of s)e=e.add(n);return e}const US=new Ut(He);function LS(){return US}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function l1(s){return{integerValue:""+s}}function zS(s,e){return fS(e)?l1(e):Im(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this._=void 0}}function BS(s,e,n){return s instanceof Ll?(function(o,u){const f={fields:{[Gv]:{stringValue:Fv},[Yv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&wm(u)&&(u=rh(u)),u&&(f.fields[Qv]=u),{mapValue:f}})(n,e):s instanceof zl?c1(s,e):s instanceof Bl?h1(s,e):(function(o,u){const f=u1(o,u),g=c_(f)+c_(o.Ae);return Xd(f)&&Xd(o.Ae)?l1(g):Im(o.serializer,g)})(s,e)}function HS(s,e,n){return s instanceof zl?c1(s,e):s instanceof Bl?h1(s,e):n}function u1(s,e){return s instanceof Bc?(function(r){return Xd(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Ll extends uh{}class zl extends uh{constructor(e){super(),this.elements=e}}function c1(s,e){const n=f1(e);for(const r of s.elements)n.some((o=>xi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Bl extends uh{constructor(e){super(),this.elements=e}}function h1(s,e){let n=f1(e);for(const r of s.elements)n=n.filter((o=>!xi(o,r)));return{arrayValue:{values:n}}}class Bc extends uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function c_(s){return xt(s.integerValue||s.doubleValue)}function f1(s){return Sm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.field=e,this.transform=n}}function FS(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof zl&&o instanceof zl||r instanceof Bl&&o instanceof Bl?ao(r.elements,o.elements,xi):r instanceof Bc&&o instanceof Bc?xi(r.Ae,o.Ae):r instanceof Ll&&o instanceof Ll})(s.transform,e.transform)}class GS{constructor(e,n){this.version=e,this.transformResults=n}}class ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ch{}function d1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cm(s.key,ii.none()):new Ql(s.key,s.data,ii.none());{const n=s.data,r=vn.empty();let o=new Ut(Zt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new or(s.key,r,new Cn(o.toArray()),ii.none())}}function QS(s,e,n){s instanceof Ql?(function(o,u,f){const g=o.value.clone(),p=f_(o.fieldTransforms,u,f.transformResults);g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,e,n):s instanceof or?(function(o,u,f){if(!Rc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=f_(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(m1(o)),p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Ml(s,e,n,r){return s instanceof Ql?(function(u,f,g,p){if(!Rc(u.precondition,f))return g;const y=u.value.clone(),T=d_(u.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof or?(function(u,f,g,p){if(!Rc(u.precondition,f))return g;const y=d_(u.fieldTransforms,p,f),T=f.data;return T.setAll(m1(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(u,f,g){return Rc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(s,e,n)}function YS(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=u1(r.transform,o||null);u!=null&&(n===null&&(n=vn.empty()),n.set(r.field,u))}return n||null}function h_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ao(r,o,((u,f)=>FS(u,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ql extends ch{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class or extends ch{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function m1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function f_(s,e,n){const r=new Map;Ze(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,g=e.data.field(u.field);r.set(u.field,HS(f,g,n[o]))}return r}function d_(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,BS(u,f,e))}return r}class Cm extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KS extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&QS(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=o1();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const p=d1(f,g);p!==null&&r.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,((n,r)=>h_(n,r)))&&ao(this.baseMutations,e.baseMutations,((n,r)=>h_(n,r)))}}class Nm{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return jS})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Nm(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Qe;function WS(s){switch(s){case ee.OK:return Se(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Se(15467,{code:s})}}function g1(s){if(s===void 0)return ts("GRPC error has no .code"),ee.UNKNOWN;switch(s){case Ct.OK:return ee.OK;case Ct.CANCELLED:return ee.CANCELLED;case Ct.UNKNOWN:return ee.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return ee.INTERNAL;case Ct.UNAVAILABLE:return ee.UNAVAILABLE;case Ct.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ct.NOT_FOUND:return ee.NOT_FOUND;case Ct.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ct.ABORTED:return ee.ABORTED;case Ct.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ct.DATA_LOSS:return ee.DATA_LOSS;default:return Se(39323,{code:s})}}(Qe=Ct||(Ct={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=new $s([4294967295,4294967295],0);function m_(s){const e=JS().encode(s),n=new Dv;return n.update(e),new Uint8Array(n.digest())}function g_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new $s([n,r],0),new $s([o,u],0)]}class Dm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xl(`Invalid padding: ${n}`);if(r<0)throw new xl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$s.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply($s.fromNumber(r)));return o.compare(eA)===1&&(o=new $s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=m_(e),[r,o]=g_(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Dm(u,o,n);return r.forEach((g=>f.insert(g))),f}insert(e){if(this.ge===0)return;const n=m_(e),[r,o]=g_(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hh(Ce.min(),o,new pt(He),ns(),qe())}}class Yl{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yl(r,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class p1{constructor(e,n){this.targetId=e,this.Ce=n}}class y1{constructor(e,n,r=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class p_{constructor(){this.ve=0,this.Fe=y_(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),n=qe(),r=qe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Se(38017,{changeType:u})}})),new Yl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=y_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tA{constructor(e){this.Ge=e,this.ze=new Map,this.je=ns(),this.Je=_c(),this.He=_c(),this.Ye=new pt(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zd(u))if(r===0){const f=new Te(u.path);this.et(n,f,ln.newNoDocument(f,Ce.min()))}else Ze(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const g=this.ut(e),p=g?this.ct(g,e,f):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=nr(r).toUint8Array()}catch(p){if(p instanceof qv)return ro("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Dm(f,o,u)}catch(p){return ro(p instanceof xl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&Zd(g.target)){const p=new Te(g.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,ln.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=qe();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new hh(e,n,this.Ye,this.je,r);return this.je=ns(),this.Je=_c(),this.He=_c(),this.Ye=new pt(He),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new p_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new p_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _c(){return new pt(Te.comparator)}function y_(){return new pt(Te.comparator)}const nA={asc:"ASCENDING",desc:"DESCENDING"},iA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sA={and:"AND",or:"OR"};class rA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jd(s,e){return s.useProto3Json||sh(e)?e:{value:e}}function Hc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function aA(s,e){return Hc(s,e.toTimestamp())}function Ti(s){return Ze(!!s,49232),Ce.fromTimestamp((function(n){const r=tr(n);return new ht(r.seconds,r.nanos)})(s))}function Mm(s,e){return em(s,e).canonicalString()}function em(s,e){const n=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function v1(s){const e=ct.fromString(s);return Ze(S1(e),10190,{key:e.toString()}),e}function tm(s,e){return Mm(s.databaseId,e.path)}function Md(s,e){const n=v1(e);if(n.get(1)!==s.databaseId.projectId)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Te(T1(n))}function E1(s,e){return Mm(s.databaseId,e)}function oA(s){const e=v1(s);return e.length===4?ct.emptyPath():T1(e)}function nm(s){return new ct(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function T1(s){return Ze(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function __(s,e,n){return{name:tm(s,e),fields:n.value.mapValue.fields}}function lA(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(Ze(T===void 0||typeof T=="string",58123),Jt.fromBase64String(T||"")):(Ze(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Jt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&(function(y){const T=y.code===void 0?ee.UNKNOWN:g1(y.code);return new pe(T,y.message||"")})(f);n=new y1(r,o,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Md(s,r.document.name),u=Ti(r.document.updateTime),f=r.document.createTime?Ti(r.document.createTime):Ce.min(),g=new vn({mapValue:{fields:r.document.fields}}),p=ln.newFoundDocument(o,u,f,g),y=r.targetIds||[],T=r.removedTargetIds||[];n=new Ic(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Md(s,r.document),u=r.readTime?Ti(r.readTime):Ce.min(),f=ln.newNoDocument(o,u),g=r.removedTargetIds||[];n=new Ic([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Md(s,r.document),u=r.removedTargetIds||[];n=new Ic([],u,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new ZS(o,u),g=r.targetId;n=new p1(g,f)}}return n}function uA(s,e){let n;if(e instanceof Ql)n={update:__(s,e.key,e.value)};else if(e instanceof Cm)n={delete:tm(s,e.key)};else if(e instanceof or)n={update:__(s,e.key,e.data),updateMask:_A(e.fieldMask)};else{if(!(e instanceof KS))return Se(16599,{Vt:e.type});n={verify:tm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const g=f.transform;if(g instanceof Ll)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof zl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Bl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Bc)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Se(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:aA(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se(27497)})(s,e.precondition)),n}function cA(s,e){return s&&s.length>0?(Ze(e!==void 0,14353),s.map((n=>(function(o,u){let f=o.updateTime?Ti(o.updateTime):Ti(u);return f.isEqual(Ce.min())&&(f=Ti(u)),new GS(f,o.transformResults||[])})(n,e)))):[]}function hA(s,e){return{documents:[E1(s,e.path)]}}function fA(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E1(s,o);const u=(function(y){if(y.length!==0)return w1(Ri.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((T=>(function(N){return{field:$a(N.field),direction:gA(N.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Jd(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function dA(s){let e=oA(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ze(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(S){const N=b1(S);return N instanceof Ri&&Jv(N)?N.getFilters():[N]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((N=>(function(H){return new zc(Za(H.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(N)))})(n.orderBy));let g=null;n.limit&&(g=(function(S){let N;return N=typeof S=="object"?S.value:S,sh(N)?null:N})(n.limit));let p=null;n.startAt&&(p=(function(S){const N=!!S.before,B=S.values||[];return new Lc(B,N)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const N=!S.before,B=S.values||[];return new Lc(B,N)})(n.endAt)),NS(e,o,f,u,g,"F",p,y)}function mA(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function b1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Za(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Za(n.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Za(n.unaryFilter.field);return jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Za(n.unaryFilter.field);return jt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(s):s.fieldFilter!==void 0?(function(n){return jt.create(Za(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ri.create(n.compositeFilter.filters.map((r=>b1(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(s):Se(30097,{filter:s})}function gA(s){return nA[s]}function pA(s){return iA[s]}function yA(s){return sA[s]}function $a(s){return{fieldPath:s.canonicalString()}}function Za(s){return Zt.fromServerFormat(s.fieldPath)}function w1(s){return s instanceof jt?(function(n){if(n.op==="=="){if(r_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NAN"}};if(s_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(r_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NAN"}};if(s_(n.value))return{unaryFilter:{field:$a(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(n.field),op:pA(n.op),value:n.value}}})(s):s instanceof Ri?(function(n){const r=n.getFilters().map((o=>w1(o)));return r.length===1?r[0]:{compositeFilter:{op:yA(n.op),filters:r}}})(s):Se(54877,{filter:s})}function _A(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function S1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,r,o,u=Ce.min(),f=Ce.min(),g=Jt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.yt=e}}function EA(s){const e=dA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Wd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.Cn=new bA}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(er.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class bA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Ut(ct.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ut(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A1=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(A1,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new uo(0)}static cr(){return new uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="LruGarbageCollector",wA=1048576;function T_([s,e],[n,r]){const o=He(s,n);return o===0?He(e,r):o}class SA{constructor(e){this.Ir=e,this.buffer=new Ut(T_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();T_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(E_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?ue(E_,"Ignoring IndexedDB error during garbage collection: ",n):await go(n)}await this.Vr(3e5)}))}}class xA{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(ih.ce);const r=new SA(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(v_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,u,f,g,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,g=Date.now(),this.removeTargets(e,r,n)))).next((S=>(u=S,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(y=Date.now(),Ka()<=Be.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${S} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function RA(s,e){return new xA(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.changes=new na((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Ml(r.mutation,o,Cn.empty(),ht.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,qe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=qe()){const o=Gr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let f=Al();return u.forEach(((g,p)=>{f=f.insert(g,p.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=Gr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,qe())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(e,n,r,o){let u=ns();const f=Dl(),g=(function(){return Dl()})();return n.forEach(((p,y)=>{const T=r.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof or)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Ml(T.mutation,y,T.mutation.getFieldMask(),ht.now())):f.set(y.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>g.set(y,new CA(T,f.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const r=Dl();let o=new pt(((f,g)=>f-g)),u=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const g of f)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=r.get(p)||Cn.empty();T=g.applyToLocalView(y,T),r.set(p,T);const S=(o.get(g.batchId)||qe()).add(p);o=o.insert(g.batchId,S)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,S=o1();T.forEach((N=>{if(!u.has(N)){const B=d1(n.get(N),r.get(N));B!==null&&S.set(N,B),u=u.add(N)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,S))}return Z.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):Z.resolve(Gr());let g=Vl,p=u;return f.next((y=>Z.forEach(y,((T,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next((N=>{p=p.insert(T,N)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,qe()))).next((T=>({batchId:g,changes:a1(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((r=>{let o=Al();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Al();return this.indexManager.getCollectionParents(e,u).next((g=>Z.forEach(g,(p=>{const y=(function(S,N){return new ah(N,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((T=>{T.forEach(((S,N)=>{f=f.insert(S,N)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((f=>{u.forEach(((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,ln.newInvalidDocument(T)))}));let g=Al();return f.forEach(((p,y)=>{const T=u.get(p);T!==void 0&&Ml(T.mutation,y,Cn.empty(),ht.now()),lh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ti(o.createTime)}})(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:EA(o.bundledQuery),readTime:Ti(o.readTime)}})(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.overlays=new pt(Te.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gr();return Z.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.St(e,n,u)})),Z.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const o=Gr(),u=n.length+1,f=new Te(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new pt(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let T=u.get(y.largestBatchId);T===null&&(T=Gr(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Gr(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>g.set(y,T))),!(g.size()>=o)););return Z.resolve(g)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new $S(n,r));let u=this.qr.get(n);u===void 0&&(u=qe(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.Qr=new Ut(qt.$r),this.Ur=new Ut(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new qt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new qt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Te(new ct([])),r=new qt(n,e),o=new qt(n,e+1),u=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new ct([])),r=new qt(n,e),o=new qt(n,e+1);let u=qe();return this.Ur.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new qt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(qt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new XS(u,n,r,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new qt(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?bm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qt(n,0),o=new qt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(He);return n.forEach((o=>{const u=new qt(o,0),f=new qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{r=r.add(g.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;Te.isDocumentKey(u)||(u=u.child(""));const f=new qt(new Te(u),0);let g=new Ut(He);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),f),Z.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,(o=>{const u=new qt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new qt(n,0),o=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.ri=e,this.docs=(function(){return new pt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=ns();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ln.newInvalidDocument(o))})),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=ns();const f=n.path,g=new Te(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||lS(oS(T),r)<=0||(o.has(T.key)||lh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Se(9500)}ii(e,n){return Z.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new jA(this)}getSize(e){return Z.resolve(this.size)}}class jA extends IA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.persistence=e,this.si=new na((n=>Am(n)),xm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Om,this.targetCount=0,this.ai=uo.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),Z.waitFor(u).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),Z.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n){this.ui={},this.overlays={},this.ci=new ih(0),this.li=!1,this.li=!0,this.hi=new OA,this.referenceDelegate=e(this),this.Pi=new PA(this),this.indexManager=new TA,this.remoteDocumentCache=(function(o){return new VA(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vA(n),this.Ii=new DA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kA(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const o=new UA(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class UA extends cS{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Ri=new Om,this.Vi=null}static mi(e){return new km(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const o=Te.fromPath(r);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class qc{constructor(e,n){this.persistence=e,this.pi=new na((r=>dS(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=RA(this,n)}static mi(e,n){return new qc(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Z.forEach(this.pi,((r,o)=>this.br(e,r,o).next((u=>u?Z.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((g=>{g||(r++,u.removeEntry(f,Ce.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ac(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Z.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=qe(),o=qe();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Vm(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Cw()?8:hS(un())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new LA;return this.Ss(e,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(e,n,f,g.size)}))})).next((()=>u.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(Ka()<=Be.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Ka()<=Be.DEBUG&&ue("QueryEngine","Query:",Xa(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Ka()<=Be.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):Z.resolve())}ys(e,n){if(u_(n))return Z.resolve(null);let r=Ei(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Wd(n,null,"F"),r=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=qe(...u);return this.ps.getDocuments(e,f).next((g=>this.indexManager.getMinOffset(e,r).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,f,p.readTime)?this.ys(e,Wd(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,r,o){return u_(n)||o.isEqual(Ce.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,o)?Z.resolve(null):(Ka()<=Be.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xa(n)),this.vs(e,f,n,aS(o,Vl)).next((g=>g)))}))}Ds(e,n){let r=new Ut(s1(e));return n.forEach(((o,u)=>{lh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return Ka()<=Be.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.ps.getDocumentsMatchingQuery(e,n,er.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",BA=3e8;class HA{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new pt(He),this.xs=new na((u=>Am(u)),xm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function qA(s,e,n,r){return new HA(s,e,n,r)}async function R1(s,e){const n=Me(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],g=[];let p=qe();for(const y of o){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of u){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(r,p).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:g})))}))}))}function FA(s,e){const n=Me(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,T){const S=y.batch,N=S.keys();let B=Z.resolve();return N.forEach((H=>{B=B.next((()=>T.getEntry(p,H))).next((F=>{const Q=y.docVersions.get(H);Ze(Q!==null,48541),F.version.compareTo(Q)<0&&(S.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),T.addEntry(F)))}))})),B.next((()=>g.mutationQueue.removeMutationBatch(p,S)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let p=qe();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function I1(s){const e=Me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function GA(s,e){const n=Me(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((T,S)=>{const N=o.get(S);if(!N)return;g.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(u,T.addedDocuments,S))));let B=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?B=B.withResumeToken(Jt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):T.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(T.resumeToken,r)),o=o.insert(S,B),(function(F,Q,he){return F.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=BA?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(N,B,T)&&g.push(n.Pi.updateTargetData(u,B))}));let p=ns(),y=qe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),g.push(QA(u,f,e.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!r.isEqual(Ce.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next((S=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));g.push(T)}return Z.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function QA(s,e,n){let r=qe(),o=qe();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let f=ns();return n.forEach(((g,p)=>{const y=u.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(g,p.readTime),f=f.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(g,p)):ue(jm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function YA(s,e){const n=Me(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function KA(s,e){const n=Me(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((u=>u?(o=u,Z.resolve(o)):n.Pi.allocateTargetId(r).next((f=>(o=new Ys(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function im(s,e,n){const r=Me(s),o=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!po(f))throw f;ue(jm,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function b_(s,e,n){const r=Me(s);let o=Ce.min(),u=qe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,y,T){const S=Me(p),N=S.xs.get(T);return N!==void 0?Z.resolve(S.Ms.get(N)):S.Pi.getTargetData(y,T)})(r,f,Ei(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,g.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?o:Ce.min(),n?u:qe()))).next((g=>(XA(r,OS(e),g),{documents:g,Qs:u})))))}function XA(s,e,n){let r=s.Os.get(e)||Ce.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(e,r)}class w_{constructor(){this.activeTargetIds=LS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $A{constructor(){this.Mo=new w_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="ConnectivityMonitor";class A_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(S_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(S_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function sm(){return vc===null?vc=(function(){return 268435456+Math.round(2147483648*Math.random())})():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="RestConnection",WA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Pc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,u){const f=sm(),g=this.zo(e,n.toUriEncodedString());ue(Od,`Sending RPC '${e}' ${f}:`,g,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(g),T=ea(y);return this.Jo(e,g,p,r,T).then((S=>(ue(Od,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw ro(Od,`RPC '${e}' ${f} failed with error: `,S,"url: ",g,"request:",r),S}))}Ho(e,n,r,o,u,f){return this.Go(e,n,r,o,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const r=WA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class tx extends JA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=sm();return new Promise(((g,p)=>{const y=new Mv;y.setWithCredentials(!0),y.listenOnce(Ov.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Sc.NO_ERROR:const S=y.getResponseJson();ue(an,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),g(S);break;case Sc.TIMEOUT:ue(an,`RPC '${e}' ${f} timed out`),p(new pe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Sc.HTTP_ERROR:const N=y.getStatus();if(ue(an,`RPC '${e}' ${f} failed with status:`,N,"response text:",y.getResponseText()),N>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const H=B==null?void 0:B.error;if(H&&H.status&&H.message){const F=(function(he){const ye=he.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ye)>=0?ye:ee.UNKNOWN})(H.status);p(new pe(F,H.message))}else p(new pe(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new pe(ee.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(an,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);ue(an,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=sm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=jv(),g=Vv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const T=u.join("");ue(an,`Creating RPC '${e}' stream ${o}: ${T}`,p);const S=f.createWebChannel(T,p);this.I_(S);let N=!1,B=!1;const H=new ex({Yo:Q=>{B?ue(an,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(N||(ue(an,`Opening RPC '${e}' stream ${o} transport.`),S.open(),N=!0),ue(an,`RPC '${e}' stream ${o} sending:`,Q),S.send(Q))},Zo:()=>S.close()}),F=(Q,he,ye)=>{Q.listen(he,(ae=>{try{ye(ae)}catch(ve){setTimeout((()=>{throw ve}),0)}}))};return F(S,Sl.EventType.OPEN,(()=>{B||(ue(an,`RPC '${e}' stream ${o} transport opened.`),H.o_())})),F(S,Sl.EventType.CLOSE,(()=>{B||(B=!0,ue(an,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(S))})),F(S,Sl.EventType.ERROR,(Q=>{B||(B=!0,ro(an,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),H.a_(new pe(ee.UNAVAILABLE,"The operation could not be completed")))})),F(S,Sl.EventType.MESSAGE,(Q=>{var he;if(!B){const ye=Q.data[0];Ze(!!ye,16349);const ae=ye,ve=(ae==null?void 0:ae.error)||((he=ae[0])==null?void 0:he.error);if(ve){ue(an,`RPC '${e}' stream ${o} received error:`,ve);const ge=ve.status;let Ie=(function(I){const k=Ct[I];if(k!==void 0)return g1(k)})(ge),x=ve.message;Ie===void 0&&(Ie=ee.INTERNAL,x="Unknown error status: "+ge+" with message "+ve.message),B=!0,H.a_(new pe(Ie,x)),S.close()}else ue(an,`RPC '${e}' stream ${o} received:`,ye),H.u_(ye)}})),F(g,kv.STAT_EVENT,(Q=>{Q.stat===Qd.PROXY?ue(an,`RPC '${e}' stream ${o} detected buffering proxy`):Q.stat===Qd.NOPROXY&&ue(an,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.__()}),0),H}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(s){return new rA(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="PersistentStream";class N1{constructor(e,n,r,o,u,f,g,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new C1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(ts(n.toString()),ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new pe(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(x_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ue(x_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nx extends N1{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lA(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ce.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ce.min():f.readTime?Ti(f.readTime):Ce.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=nm(this.serializer),n.addTarget=(function(u,f){let g;const p=f.target;if(g=Zd(p)?{documents:hA(u,p)}:{query:fA(u,p).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=_1(u,f.resumeToken);const y=Jd(u,f.expectedCount);y!==null&&(g.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ce.min())>0){g.readTime=Hc(u,f.snapshotVersion.toTimestamp());const y=Jd(u,f.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const r=mA(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=nm(this.serializer),n.removeTarget=e,this.q_(n)}}class ix extends N1{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cA(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=nm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>uA(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{}class rx extends sx{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,em(n,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ee.UNKNOWN,u.toString())}))}Ho(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(e,em(n,r),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ax{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ts(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="RemoteStore";class ox{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ia(this)&&(ue(Wr,"Restarting streams for network reachability change."),await(async function(p){const y=Me(p);y.Ea.add(4),await Kl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await dh(y)})(this))}))})),this.Ra=new ax(r,o)}}async function dh(s){if(ia(s))for(const e of s.da)await e(!0)}async function Kl(s){for(const e of s.da)await e(!1)}function D1(s,e){const n=Me(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zm(n)?Lm(n):yo(n).O_()&&Um(n,e))}function Pm(s,e){const n=Me(s),r=yo(n);n.Ia.delete(e),r.O_()&&M1(n,e),n.Ia.size===0&&(r.O_()?r.L_():ia(n)&&n.Ra.set("Unknown"))}function Um(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(s).Y_(e)}function M1(s,e){s.Va.Ue(e),yo(s).Z_(e)}function Lm(s){s.Va=new tA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),yo(s).start(),s.Ra.ua()}function zm(s){return ia(s)&&!yo(s).x_()&&s.Ia.size>0}function ia(s){return Me(s).Ea.size===0}function O1(s){s.Va=void 0}async function lx(s){s.Ra.set("Online")}async function ux(s){s.Ia.forEach(((e,n)=>{Um(s,e)}))}async function cx(s,e){O1(s),zm(s)?(s.Ra.ha(e),Lm(s)):s.Ra.set("Unknown")}async function hx(s,e,n){if(s.Ra.set("Online"),e instanceof y1&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(r){ue(Wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fc(s,r)}else if(e instanceof Ic?s.Va.Ze(e):e instanceof p1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await I1(s.localStore);n.compareTo(r)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(p.resumeToken,f))}})),g.targetMismatches.forEach(((p,y)=>{const T=u.Ia.get(p);if(!T)return;u.Ia.set(p,T.withResumeToken(Jt.EMPTY_BYTE_STRING,T.snapshotVersion)),M1(u,p);const S=new Ys(T.target,p,y,T.sequenceNumber);Um(u,S)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(r){ue(Wr,"Failed to raise snapshot:",r),await Fc(s,r)}}async function Fc(s,e,n){if(!po(e))throw e;s.Ea.add(1),await Kl(s),s.Ra.set("Offline"),n||(n=()=>I1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ue(Wr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await dh(s)}))}function k1(s,e){return e().catch((n=>Fc(s,n,e)))}async function mh(s){const e=Me(s),n=sr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bm;for(;fx(e);)try{const o=await YA(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,dx(e,o)}catch(o){await Fc(e,o)}V1(e)&&j1(e)}function fx(s){return ia(s)&&s.Ta.length<10}function dx(s,e){s.Ta.push(e);const n=sr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function V1(s){return ia(s)&&!sr(s).x_()&&s.Ta.length>0}function j1(s){sr(s).start()}async function mx(s){sr(s).ra()}async function gx(s){const e=sr(s);for(const n of s.Ta)e.ea(n.mutations)}async function px(s,e,n){const r=s.Ta.shift(),o=Nm.from(r,e,n);await k1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await mh(s)}async function yx(s,e){e&&sr(s).X_&&await(async function(r,o){if((function(f){return WS(f)&&f!==ee.ABORTED})(o.code)){const u=r.Ta.shift();sr(r).B_(),await k1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await mh(r)}})(s,e),V1(s)&&j1(s)}async function R_(s,e){const n=Me(s);n.asyncQueue.verifyOperationInProgress(),ue(Wr,"RemoteStore received new credentials");const r=ia(n);n.Ea.add(3),await Kl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dh(n)}async function _x(s,e){const n=Me(s);e?(n.Ea.delete(2),await dh(n)):e||(n.Ea.add(2),await Kl(n),n.Ra.set("Unknown"))}function yo(s){return s.ma||(s.ma=(function(n,r,o){const u=Me(n);return u.sa(),new nx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:lx.bind(null,s),t_:ux.bind(null,s),r_:cx.bind(null,s),H_:hx.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),zm(s)?Lm(s):s.Ra.set("Unknown")):(await s.ma.stop(),O1(s))}))),s.ma}function sr(s){return s.fa||(s.fa=(function(n,r,o){const u=Me(n);return u.sa(),new ix(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:mx.bind(null,s),r_:yx.bind(null,s),ta:gx.bind(null,s),na:px.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await mh(s)):(await s.fa.stop(),s.Ta.length>0&&(ue(Wr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,g=new Bm(e,n,f,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(s,e){if(ts("AsyncQueue",`${e}: ${s}`),po(s))return new pe(ee.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=Al(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.ga=new pt(Te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class co{constructor(e,n,r,o,u,f,g,p,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new co(e,n,Ja.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ex{constructor(){this.queries=C_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Me(n),u=o.queries;o.queries=C_(),u.forEach(((f,g)=>{for(const p of g.Sa)p.onError(r)}))})(this,new pe(ee.ABORTED,"Firestore shutting down"))}}function C_(){return new na((s=>i1(s)),oh)}async function Tx(s,e){const n=Me(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new vx,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=Hm(f,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&qm(n)}async function bx(s,e){const n=Me(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wx(s,e){const n=Me(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(r=!0);f.wa=o}}r&&qm(n)}function Sx(s,e,n){const r=Me(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function qm(s){s.Ca.forEach((e=>{e.next()}))}var rm,N_;(N_=rm||(rm={})).Ma="default",N_.Cache="cache";class Ax{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.key=e}}class U1{constructor(e){this.key=e}}class xx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=s1(e),this.tu=new Ja(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new I_,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const N=o.get(T),B=lh(this.query,S)?S:null,H=!!N&&this.mutatedKeys.has(N.key),F=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Q=!1;N&&B?N.data.isEqual(B.data)?H!==F&&(r.track({type:3,doc:B}),Q=!0):this.su(N,B)||(r.track({type:2,doc:B}),Q=!0,(p&&this.eu(B,p)>0||y&&this.eu(B,y)<0)&&(g=!0)):!N&&B?(r.track({type:0,doc:B}),Q=!0):N&&!B&&(r.track({type:1,doc:N}),Q=!0,(p||y)&&(g=!0)),Q&&(B?(f=f.add(B),u=F?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:g,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,S)=>(function(B,H){const F=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:Q})}};return F(B)-F(H)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,f.length!==0||y?{snapshot:new co(this.query,e.tu,u,f,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new I_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new U1(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new P1(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fm="SyncEngine";class Rx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ix{constructor(e){this.key=e,this.hu=!1}}class Cx{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new na((g=>i1(g)),oh),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Te.comparator),this.Au=new Map,this.Ru=new Om,this.Vu={},this.mu=new Map,this.fu=uo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Nx(s,e,n=!0){const r=F1(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await L1(r,e,n,!0),o}async function Dx(s,e){const n=F1(s);await L1(n,e,!0,!1)}async function L1(s,e,n,r){const o=await KA(s.localStore,Ei(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let g;return r&&(g=await Mx(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&D1(s.remoteStore,o),g}async function Mx(s,e,n,r,o){s.pu=(S,N,B)=>(async function(F,Q,he,ye){let ae=Q.view.ru(he);ae.Cs&&(ae=await b_(F.localStore,Q.query,!1).then((({documents:x})=>Q.view.ru(x,ae))));const ve=ye&&ye.targetChanges.get(Q.targetId),ge=ye&&ye.targetMismatches.get(Q.targetId)!=null,Ie=Q.view.applyChanges(ae,F.isPrimaryClient,ve,ge);return M_(F,Q.targetId,Ie.au),Ie.snapshot})(s,S,N,B);const u=await b_(s.localStore,e,!0),f=new xx(e,u.Qs),g=f.ru(u.documents),p=Yl.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=f.applyChanges(g,s.isPrimaryClient,p);M_(s,n,y.au);const T=new Rx(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function Ox(s,e,n){const r=Me(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!oh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await im(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Pm(r.remoteStore,o.targetId),am(r,o.targetId)})).catch(go)):(am(r,o.targetId),await im(r.localStore,o.targetId,!0))}async function kx(s,e){const n=Me(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pm(n.remoteStore,r.targetId))}async function Vx(s,e,n){const r=Hx(s);try{const o=await(function(f,g){const p=Me(f),y=ht.now(),T=g.reduce(((B,H)=>B.add(H.key)),qe());let S,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let H=ns(),F=qe();return p.Ns.getEntries(B,T).next((Q=>{H=Q,H.forEach(((he,ye)=>{ye.isValidDocument()||(F=F.add(he))}))})).next((()=>p.localDocuments.getOverlayedDocuments(B,H))).next((Q=>{S=Q;const he=[];for(const ye of g){const ae=YS(ye,S.get(ye.key).overlayedDocument);ae!=null&&he.push(new or(ye.key,ae,$v(ae.value.mapValue),ii.exists(!0)))}return p.mutationQueue.addMutationBatch(B,y,he,g)})).next((Q=>{N=Q;const he=Q.applyToLocalDocumentSet(S,F);return p.documentOverlayCache.saveOverlays(B,Q.batchId,he)}))})).then((()=>({batchId:N.batchId,changes:a1(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,g,p){let y=f.Vu[f.currentUser.toKey()];y||(y=new pt(He)),y=y.insert(g,p),f.Vu[f.currentUser.toKey()]=y})(r,o.batchId,n),await Xl(r,o.changes),await mh(r.remoteStore)}catch(o){const u=Hm(o,"Failed to persist write");n.reject(u)}}async function z1(s,e){const n=Me(s);try{const r=await GA(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ze(f.hu,14607):o.removedDocuments.size>0&&(Ze(f.hu,42227),f.hu=!1))})),await Xl(n,r,e)}catch(r){await go(r)}}function D_(s,e,n){const r=Me(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,f)=>{const g=f.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const p=Me(f);p.onlineState=g;let y=!1;p.queries.forEach(((T,S)=>{for(const N of S.Sa)N.va(g)&&(y=!0)})),y&&qm(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jx(s,e,n){const r=Me(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new pt(Te.comparator);f=f.insert(u,ln.newNoDocument(u,Ce.min()));const g=qe().add(u),p=new hh(Ce.min(),new Map,new pt(He),f,g);await z1(r,p),r.du=r.du.remove(u),r.Au.delete(e),Gm(r)}else await im(r.localStore,e,!1).then((()=>am(r,e,n))).catch(go)}async function Px(s,e){const n=Me(s),r=e.batch.batchId;try{const o=await FA(n.localStore,e);H1(n,r,null),B1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xl(n,o)}catch(o){await go(o)}}async function Ux(s,e,n){const r=Me(s);try{const o=await(function(f,g){const p=Me(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next((S=>(Ze(S!==null,37113),T=S.keys(),p.mutationQueue.removeMutationBatch(y,S)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(r.localStore,e);H1(r,e,n),B1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xl(r,o)}catch(o){await go(o)}}function B1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function H1(s,e,n){const r=Me(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function am(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||q1(s,r)}))}function q1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Pm(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Gm(s))}function M_(s,e,n){for(const r of n)r instanceof P1?(s.Ru.addReference(r.key,e),Lx(s,r)):r instanceof U1?(ue(Fm,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||q1(s,r.key)):Se(19791,{wu:r})}function Lx(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ue(Fm,"New document in limbo: "+n),s.Eu.add(r),Gm(s))}function Gm(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Te(ct.fromString(e)),r=s.fu.next();s.Au.set(r,new Ix(n)),s.du=s.du.insert(n,r),D1(s.remoteStore,new Ys(Ei(Rm(n.path)),r,"TargetPurposeLimboResolution",ih.ce))}}async function Xl(s,e,n){const r=Me(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,p)=>{f.push(r.pu(p,e,n).then((y=>{var T;if((y||n)&&r.isPrimaryClient){const S=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(y){o.push(y);const S=Vm.As(p.targetId,y);u.push(S)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(p,y){const T=Me(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>Z.forEach(y,(N=>Z.forEach(N.Es,(B=>T.persistence.referenceDelegate.addReference(S,N.targetId,B))).next((()=>Z.forEach(N.ds,(B=>T.persistence.referenceDelegate.removeReference(S,N.targetId,B)))))))))}catch(S){if(!po(S))throw S;ue(jm,"Failed to update sequence numbers: "+S)}for(const S of y){const N=S.targetId;if(!S.fromCache){const B=T.Ms.get(N),H=B.snapshotVersion,F=B.withLastLimboFreeSnapshotVersion(H);T.Ms=T.Ms.insert(N,F)}}})(r.localStore,u))}async function zx(s,e){const n=Me(s);if(!n.currentUser.isEqual(e)){ue(Fm,"User change. New user:",e.toKey());const r=await R1(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new pe(ee.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xl(n,r.Ls)}}function Bx(s,e){const n=Me(s),r=n.Au.get(e);if(r&&r.hu)return qe().add(r.key);{let o=qe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const g=n.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function F1(s){const e=Me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=z1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jx.bind(null,e),e.Pu.H_=wx.bind(null,e.eventManager),e.Pu.yu=Sx.bind(null,e.eventManager),e}function Hx(s){const e=Me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Px.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ux.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return qA(this.persistence,new zA,e.initialUser,this.serializer)}Cu(e){return new x1(km.mi,this.serializer)}Du(e){return new $A}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class qx extends Gc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof qc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AA(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new x1((r=>qc.mi(r,n)),this.serializer)}}class om{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zx.bind(null,this.syncEngine),await _x(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ex})()}createDatastore(e){const n=fh(e.databaseInfo.databaseId),r=(function(u){return new tx(u)})(e.databaseInfo);return(function(u,f,g,p){return new rx(u,f,g,p)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,f,g){return new ox(r,o,u,f,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>D_(this.syncEngine,n,0)),(function(){return A_.v()?new A_:new ZA})())}createSyncEngine(e,n){return(function(o,u,f,g,p,y,T){const S=new Cx(o,u,f,g,p,y);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Me(o);ue(Wr,"RemoteStore shutting down."),u.Ea.add(5),await Kl(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}om.provider={build:()=>new om};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="FirestoreClient";class Gx{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{ue(rr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(ue(rr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vd(s,e){s.asyncQueue.verifyOperationInProgress(),ue(rr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await R1(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function O_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await Qx(s);ue(rr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>R_(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>R_(e.remoteStore,o))),s._onlineComponents=e}async function Qx(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ue(rr,"Using user provided OfflineComponentProvider");try{await Vd(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ro("Error using user provided cache. Falling back to memory cache: "+n),await Vd(s,new Gc)}}else ue(rr,"Using default OfflineComponentProvider"),await Vd(s,new qx(void 0));return s._offlineComponents}async function G1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ue(rr,"Using user provided OnlineComponentProvider"),await O_(s,s._uninitializedComponentsProvider._online)):(ue(rr,"Using default OnlineComponentProvider"),await O_(s,new om))),s._onlineComponents}function Yx(s){return G1(s).then((e=>e.syncEngine))}async function k_(s){const e=await G1(s),n=e.eventManager;return n.onListen=Nx.bind(null,e.syncEngine),n.onUnlisten=Ox.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Dx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kx.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="firestore.googleapis.com",j_=!0;class P_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y1,this.ssl=j_}else this.host=e.host,this.ssl=e.ssl??j_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wA)throw new pe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new X2;switch(r.type){case"firstParty":return new J2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=V_.get(n);r&&(ue("ComponentProvider","Removing Datastore"),V_.delete(n),r.terminate())})(this),Promise.resolve()}}function Kx(s,e,n,r={}){var y;s=Zs(s,gh);const o=ea(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${n}`;o&&(mm(`https://${g}`),gm("Firestore",!0)),u.host!==Y1&&u.host!==g&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:o,emulatorOptions:r};if(!Xr(p,f)&&(s._setSettings(p),r.mockUserToken)){let T,S;if(typeof r.mockUserToken=="string")T=r.mockUserToken,S=on.MOCK_USER;else{T=Av(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const N=r.mockUserToken.sub||r.mockUserToken.user_id;if(!N)throw new pe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new on(N)}s._authCredentials=new $2(new Uv(T,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ph(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Gl(n,Pt._jsonSchema))return new Pt(e,r||null,new Te(ct.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Nt("string",Pt._jsonSchemaVersion),referencePath:Nt("string")};class Ws extends ph{constructor(e,n,r){super(e,n,Rm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Te(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function U_(s,e,...n){if(s=Wt(s),Lv("collection","path",e),s instanceof gh){const r=ct.fromString(e,...n);return $0(r),new Ws(s,null,r)}{if(!(s instanceof Pt||s instanceof Ws))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ct.fromString(e,...n));return $0(r),new Ws(s.firestore,null,r)}}function lm(s,e,...n){if(s=Wt(s),arguments.length===1&&(e=Em.newId()),Lv("doc","path",e),s instanceof gh){const r=ct.fromString(e,...n);return X0(r),new Pt(s,null,new Te(r))}{if(!(s instanceof Pt||s instanceof Ws))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ct.fromString(e,...n));return X0(r),new Pt(s.firestore,s instanceof Ws?s.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="AsyncQueue";class z_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new C1(this,"async_queue_retry"),this._c=()=>{const r=kd();r&&ue(L_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!po(e))throw e;ue(L_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ts("INTERNAL UNHANDLED ERROR: ",B_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Bm.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:B_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function B_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class ho extends gh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new z_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z_(e),this._firestoreClient=void 0,await e}}}function Xx(s,e){const n=typeof s=="object"?s:_m(),r=typeof s=="string"?s:Pc,o=nh(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=bv("firestore");u&&Kx(o,...u)}return o}function K1(s){if(s._terminated)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||$x(s),s._firestoreClient}function $x(s){var r,o,u;const e=s._freezeSettings(),n=(function(g,p,y,T){return new pS(g,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Q1(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Gx(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Jt.fromBase64String(e))}catch(n){throw new pe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gl(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Nt("string",Bn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(Gl(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:Nt("string",bi._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gl(e,wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new wi(e.vectorValues);throw new pe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wi._jsonSchemaVersion="firestore/vectorValue/1.0",wi._jsonSchema={type:Nt("string",wi._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=/^__.*__$/;class Wx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class X1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new or(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:s})}}class Qm{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($1(this.Ac)&&Zx.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Jx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fh(e)}Cc(e,n,r,o=!1){return new Qm({Ac:e,methodName:n,Dc:r,path:Zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z1(s){const e=s._freezeSettings(),n=fh(s._databaseId);return new Jx(s._databaseId,!!e.ignoreUndefinedProperties,n)}function eR(s,e,n,r,o,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);Km("Data must be an object, but it was:",f,r);const g=W1(r,f);let p,y;if(u.merge)p=new Cn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const N=um(e,S,n);if(!f.contains(N))throw new pe(ee.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);eE(T,N)||T.push(N)}p=new Cn(T),y=f.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,y=f.fieldTransforms;return new Wx(new vn(g),p,y)}class vh extends _h{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vh}}class Ym extends _h{_toFieldTransform(e){return new qS(e.path,new Ll)}isEqual(e){return e instanceof Ym}}function tR(s,e,n,r){const o=s.Cc(1,e,n);Km("Data must be an object, but it was:",o,r);const u=[],f=vn.empty();ar(r,((p,y)=>{const T=Xm(e,p,n);y=Wt(y);const S=o.yc(T);if(y instanceof vh)u.push(T);else{const N=Eh(y,S);N!=null&&(u.push(T),f.set(T,N))}}));const g=new Cn(u);return new X1(f,g,o.fieldTransforms)}function nR(s,e,n,r,o,u){const f=s.Cc(1,e,n),g=[um(e,r,n)],p=[o];if(u.length%2!=0)throw new pe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)g.push(um(e,u[N])),p.push(u[N+1]);const y=[],T=vn.empty();for(let N=g.length-1;N>=0;--N)if(!eE(y,g[N])){const B=g[N];let H=p[N];H=Wt(H);const F=f.yc(B);if(H instanceof vh)y.push(B);else{const Q=Eh(H,F);Q!=null&&(y.push(B),T.set(B,Q))}}const S=new Cn(y);return new X1(T,S,f.fieldTransforms)}function Eh(s,e){if(J1(s=Wt(s)))return Km("Unsupported field value:",e,s),W1(s,e);if(s instanceof _h)return(function(r,o){if(!$1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const g of r){let p=Eh(g,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zS(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ht.fromDate(r);return{timestampValue:Hc(o.serializer,u)}}if(r instanceof ht){const u=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hc(o.serializer,u)}}if(r instanceof bi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bn)return{bytesValue:_1(o.serializer,r._byteString)};if(r instanceof Pt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof wi)return(function(f,g){return{mapValue:{fields:{[Kv]:{stringValue:Xv},[Uc]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Im(g.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Tm(r)}`)})(s,e)}function W1(s,e){const n={};return Hv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ar(s,((r,o)=>{const u=Eh(o,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function J1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ht||s instanceof bi||s instanceof Bn||s instanceof Pt||s instanceof _h||s instanceof wi)}function Km(s,e,n){if(!J1(n)||!zv(n)){const r=Tm(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function um(s,e,n){if((e=Wt(e))instanceof yh)return e._internalPath;if(typeof e=="string")return Xm(s,e);throw Qc("Field path arguments must be of type string or ",s,!1,void 0,n)}const iR=new RegExp("[~\\*/\\[\\]]");function Xm(s,e,n){if(e.search(iR)>=0)throw Qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new yh(...e.split("."))._internalPath}catch{throw Qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Qc(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${r}`),f&&(p+=` in document ${o}`),p+=")"),new pe(ee.INVALID_ARGUMENT,g+s+p)}function eE(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sR extends tE{data(){return super.data()}}function nE(s,e){return typeof e=="string"?Xm(s,e):e instanceof yh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aR{convertValue(e,n="none"){switch(ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ar(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,o,u;const n=(u=(o=(r=e.fields)==null?void 0:r[Uc].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>xt(f.doubleValue)));return new wi(n)}convertGeoPoint(e){return new bi(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=tr(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);Ze(S1(r),9688,{name:e});const o=new Pl(r.get(1),r.get(3)),u=new Te(r.popFirst(5));return o.isEqual(n)||ts(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Rl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yr extends tE{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Yr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Yr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yr._jsonSchema={type:Nt("string",Yr._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Cc extends Yr{data(e={}){return super.data(e)}}class eo{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Rl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Cc(this._firestore,this._userDataWriter,r.key,r,new Rl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const p=new Cc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Rl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new Cc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Rl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return g.type!==0&&(y=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:lR(g.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Em.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:s})}}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:Nt("string",eo._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class iE extends aR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function uR(s,e,n,...r){s=Zs(s,Pt);const o=Zs(s.firestore,ho),u=Z1(o);let f;return f=typeof(e=Wt(e))=="string"||e instanceof yh?nR(u,"updateDoc",s._key,e,n,r):tR(u,"updateDoc",s._key,e),$m(o,[f.toMutation(s._key,ii.exists(!0))])}function cR(s){return $m(Zs(s.firestore,ho),[new Cm(s._key,ii.none())])}function hR(s,e){const n=Zs(s.firestore,ho),r=lm(s),o=oR(s.converter,e);return $m(n,[eR(Z1(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,ii.exists(!1))]).then((()=>r))}function fR(s,...e){var p,y,T;s=Wt(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||H_(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(H_(e[r])){const S=e[r];e[r]=(p=S.next)==null?void 0:p.bind(S),e[r+1]=(y=S.error)==null?void 0:y.bind(S),e[r+2]=(T=S.complete)==null?void 0:T.bind(S)}let u,f,g;if(s instanceof Pt)f=Zs(s.firestore,ho),g=Rm(s._key.path),u={next:S=>{e[r]&&e[r](dR(f,s,S))},error:e[r+1],complete:e[r+2]};else{const S=Zs(s,ph);f=Zs(S.firestore,ho),g=S._query;const N=new iE(f);u={next:B=>{e[r]&&e[r](new eo(f,N,S,B))},error:e[r+1],complete:e[r+2]},rR(s._query)}return(function(N,B,H,F){const Q=new Fx(F),he=new Ax(B,Q,H);return N.asyncQueue.enqueueAndForget((async()=>Tx(await k_(N),he))),()=>{Q.Nu(),N.asyncQueue.enqueueAndForget((async()=>bx(await k_(N),he)))}})(K1(f),g,o,u)}function $m(s,e){return(function(r,o){const u=new Qr;return r.asyncQueue.enqueueAndForget((async()=>Vx(await Yx(r),o,u))),u.promise})(K1(s),e)}function dR(s,e,n){const r=n.docs.get(e._key),o=new iE(s);return new Yr(s,o,e._key,r,new Rl(n.hasPendingWrites,n.fromCache),e.converter)}function q_(){return new Ym("serverTimestamp")}(function(e,n=!0){(function(o){mo=o})(ta),$r(new Js("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new ho(new Z2(r.getProvider("auth-internal")),new eS(f,r.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(y.options.projectId,T)})(f,o),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),vi(G0,Q0,e),vi(G0,Q0,"esm2020")})();function sE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mR=sE,rE=new ql("auth","Firebase",sE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new pm("@firebase/auth");function gR(s,...e){Yc.logLevel<=Be.WARN&&Yc.warn(`Auth (${ta}): ${s}`,...e)}function Nc(s,...e){Yc.logLevel<=Be.ERROR&&Yc.error(`Auth (${ta}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(s,...e){throw Zm(s,...e)}function Si(s,...e){return Zm(s,...e)}function aE(s,e,n){const r={...mR(),[e]:n};return new ql("auth","Firebase",r).create(e,{appName:s.name})}function Kr(s){return aE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return rE.create(s,...e)}function Re(s,e,...n){if(!s)throw Zm(e,...n)}function Wi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Nc(e),new Error(e)}function ss(s,e){s||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function pR(){return F_()==="http:"||F_()==="https:"}function F_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pR()||xw()||"connection"in navigator)?navigator.onLine:!0}function _R(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.shortDelay=e,this.longDelay=n,ss(n>e,"Short delay should be less than long delay!"),this.isMobile=ww()||Rw()}get(){return yR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(s,e){ss(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TR=new $l(3e4,6e4);function Jm(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function _o(s,e,n,r,o={}){return lE(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=Fl({key:s.config.apiKey,...f}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...u};return Aw()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&ea(s.emulatorConfig.host)&&(y.credentials="include"),oE.fetch()(await uE(s,s.config.apiHost,n,g),y)})}async function lE(s,e,n){s._canInitEmulator=!1;const r={...vR,...e};try{const o=new wR(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Ec(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Ec(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw Ec(s,"user-disabled",f);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw aE(s,T,y);is(s,T)}}catch(o){if(o instanceof Ci)throw o;is(s,"network-request-failed",{message:String(o)})}}async function bR(s,e,n,r,o={}){const u=await _o(s,e,n,r,o);return"mfaPendingCredential"in u&&is(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function uE(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?Wm(s.config,o):`${s.config.apiScheme}://${o}`;return ER.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class wR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),TR.get())})}}function Ec(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Si(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(s,e){return _o(s,"POST","/v1/accounts:delete",e)}async function Kc(s,e){return _o(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AR(s,e=!1){const n=Wt(s),r=await n.getIdToken(e),o=eg(r);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Ol(jd(o.auth_time)),issuedAtTime:Ol(jd(o.iat)),expirationTime:Ol(jd(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function jd(s){return Number(s)*1e3}function eg(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ev(n);return o?JSON.parse(o):(Nc("Failed to decode base64 JWT payload"),null)}catch(o){return Nc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function G_(s){const e=eg(s);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ci&&xR(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function xR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(s){var S;const e=s.auth,n=await s.getIdToken(),r=await Hl(s,Kc(e,{idToken:n}));Re(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(S=o.providerUserInfo)!=null&&S.length?cE(o.providerUserInfo):[],f=CR(s.providerData,u),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),y=g?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new hm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,T)}async function IR(s){const e=Wt(s);await Xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CR(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function cE(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(s,e){const n=await lE(s,{},async()=>{const r=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await uE(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:r};return s.emulatorConfig&&ea(s.emulatorConfig.host)&&(p.credentials="include"),oE.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DR(s,e){return _o(s,"POST","/v2/accounts:revokeToken",Jm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=G_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await NR(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new to;return r&&(Re(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Re(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Re(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(s,e){Re(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ti{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new RR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Hl(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AR(this,e)}reload(){return IR(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ti({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await Hl(this,SR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:N,isAnonymous:B,providerData:H,stsTokenManager:F}=n;Re(S&&F,e,"internal-error");const Q=to.fromJSON(this.name,F);Re(typeof S=="string",e,"internal-error"),Hs(r,e.name),Hs(o,e.name),Re(typeof N=="boolean",e,"internal-error"),Re(typeof B=="boolean",e,"internal-error"),Hs(u,e.name),Hs(f,e.name),Hs(g,e.name),Hs(p,e.name),Hs(y,e.name),Hs(T,e.name);const he=new ti({uid:S,auth:e,email:o,emailVerified:N,displayName:r,isAnonymous:B,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:Q,createdAt:y,lastLoginAt:T});return H&&Array.isArray(H)&&(he.providerData=H.map(ye=>({...ye}))),p&&(he._redirectEventId=p),he}static async _fromIdTokenResponse(e,n,r=!1){const o=new to;o.updateFromServerResponse(n);const u=new ti({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Xc(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?cE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new to;g.updateFromIdToken(r);const p=new ti({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new hm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=new Map;function Ji(s){ss(s instanceof Function,"Expected a class definition");let e=Q_.get(s);return e?(ss(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Q_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hE.type="NONE";const Y_=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(s,e,n){return`firebase:${s}:${e}:${n}`}class no{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Dc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Dc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kc(this.auth,{idToken:e}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,e):null}return ti._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new no(Ji(Y_),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Ji(Y_);const f=Dc(r,e.config.apiKey,e.name);let g=null;for(const y of n)try{const T=await y._get(f);if(T){let S;if(typeof T=="string"){const N=await Kc(e,{idToken:T}).catch(()=>{});if(!N)break;S=await ti._fromGetAccountInfoResponse(e,N,T)}else S=ti._fromJSON(e,T);y!==u&&(g=S),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new no(u,e,r):(u=p[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new no(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yE(e))return"Blackberry";if(_E(e))return"Webos";if(dE(e))return"Safari";if((e.includes("chrome/")||mE(e))&&!e.includes("edge/"))return"Chrome";if(pE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fE(s=un()){return/firefox\//i.test(s)}function dE(s=un()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mE(s=un()){return/crios\//i.test(s)}function gE(s=un()){return/iemobile/i.test(s)}function pE(s=un()){return/android/i.test(s)}function yE(s=un()){return/blackberry/i.test(s)}function _E(s=un()){return/webos/i.test(s)}function tg(s=un()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function MR(s=un()){var e;return tg(s)&&!!((e=window.navigator)!=null&&e.standalone)}function OR(){return Iw()&&document.documentMode===10}function vE(s=un()){return tg(s)||pE(s)||_E(s)||yE(s)||/windows phone/i.test(s)||gE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(s,e=[]){let n;switch(s){case"Browser":n=K_(un());break;case"Worker":n=`${K_(un())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ta}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,g)=>{try{const p=e(u);f(p)}catch(p){g(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(s,e={}){return _o(s,"GET","/v2/passwordPolicy",Jm(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=6;class PR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X_(this),this.idTokenSubscription=new X_(this),this.beforeStateQueue=new kR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ji(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await no.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kc(this,{idToken:e}),r=await ti._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(ei(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===g)&&(p!=null&&p.user)&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_R()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(Kr(this));const n=e?Wt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VR(this),n=new PR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ql("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ji(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[Ji(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&gR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ng(s){return Wt(s)}class X_{constructor(e){this.auth=e,this.observer=null,this.addObserver=jw(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LR(s){ig=s}function zR(s){return ig.loadJS(s)}function BR(){return ig.gapiScript}function HR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(s,e){const n=nh(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Xr(u,e??{}))return o;is(o,"already-initialized")}return n.initialize({options:e})}function FR(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ji);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function GR(s,e,n){const r=ng(s);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=TE(e),{host:f,port:g}=QR(e),p=g===null?"":`:${g}`,y={url:`${u}//${f}${p}/`},T=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Xr(y,r.config.emulator)&&Xr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,ea(f)?(mm(`${u}//${f}${p}`),gm("Auth",!0)):YR()}function TE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function QR(s){const e=TE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:$_(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:$_(f)}}}function $_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function YR(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(s,e){return bR(s,"POST","/v1/accounts:signInWithIdp",Jm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="http://localhost";class Jr extends bE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new Jr(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:KR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends wE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Zl{constructor(){super("facebook.com")}static credential(e){return Jr._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fs.credential(n,r)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Zl{constructor(){super("github.com")}static credential(e){return Jr._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Zl{constructor(){super("twitter.com")}static credential(e,n){return Jr._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qs.credential(n,r)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await ti._fromIdTokenResponse(e,r,o),f=Z_(r);return new fo({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Z_(r);return new fo({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Z_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Ci{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new $c(e,n,r,o)}}function SE(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(s,u,e,r):u})}async function XR(s,e,n=!1){const r=await Hl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return fo._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(s,e,n=!1){const{auth:r}=s;if(ei(r.app))return Promise.reject(Kr(r));const o="reauthenticate";try{const u=await Hl(s,SE(r,o,e,s),n);Re(u.idToken,r,"internal-error");const f=eg(u.idToken);Re(f,r,"internal-error");const{sub:g}=f;return Re(s.uid===g,r,"user-mismatch"),fo._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&is(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(s,e,n=!1){if(ei(s.app))return Promise.reject(Kr(s));const r="signIn",o=await SE(s,r,e),u=await fo._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}function WR(s,e,n,r){return Wt(s).onIdTokenChanged(e,n,r)}function JR(s,e,n){return Wt(s).beforeAuthStateChanged(e,n)}function eI(s,e,n,r){return Wt(s).onAuthStateChanged(e,n,r)}const Zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zc,"1"),this.storage.removeItem(Zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=1e3,nI=10;class xE extends AE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);OR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,nI):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},tI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xE.type="LOCAL";const iI=xE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends AE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RE.type="SESSION";const IE=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Th(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async y=>y(n.origin,u)),p=await sI(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,p)=>{const y=sg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const N=S;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function aI(s){Ai().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function oI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lI(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function uI(){return CE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="firebaseLocalStorageDb",cI=1,Wc="firebaseLocalStorage",DE="fbase_key";class Wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bh(s,e){return s.transaction([Wc],e?"readwrite":"readonly").objectStore(Wc)}function hI(){const s=indexedDB.deleteDatabase(NE);return new Wl(s).toPromise()}function fm(){const s=indexedDB.open(NE,cI);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Wc,{keyPath:DE})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Wc)?e(r):(r.close(),await hI(),e(await fm()))})})}async function W_(s,e,n){const r=bh(s,!0).put({[DE]:e,value:n});return new Wl(r).toPromise()}async function fI(s,e){const n=bh(s,!1).get(e),r=await new Wl(n).toPromise();return r===void 0?null:r.value}function J_(s,e){const n=bh(s,!0).delete(e);return new Wl(n).toPromise()}const dI=800,mI=3;class ME{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance(uI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await oI(),!this.activeServiceWorker)return;this.sender=new rI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fm();return await W_(e,Zc,"1"),await J_(e,Zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>W_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=bh(o,!1).getAll();return new Wl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ME.type="LOCAL";const gI=ME;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(s,e){return e?Ji(e):(Re(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends bE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yI(s){return ZR(s.auth,new rg(s),s.bypassAuthState)}function _I(s){const{auth:e,user:n}=s;return Re(n,e,"internal-error"),$R(n,new rg(s),s.bypassAuthState)}async function vI(s){const{auth:e,user:n}=s;return Re(n,e,"internal-error"),XR(n,new rg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yI;case"linkViaPopup":case"linkViaRedirect":return vI;case"reauthViaPopup":case"reauthViaRedirect":return _I;default:is(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new $l(2e3,1e4);class Wa extends OE{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Wa.currentPopupAction&&Wa.currentPopupAction.cancel(),Wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EI.get())};e()}}Wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="pendingRedirect",Mc=new Map;class bI extends OE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mc.get(this.auth._key());if(!e){try{const r=await wI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mc.set(this.auth._key(),e)}return this.bypassAuthState||Mc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wI(s,e){const n=xI(e),r=AI(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function SI(s,e){Mc.set(s._key(),e)}function AI(s){return Ji(s._redirectPersistence)}function xI(s){return Dc(TI,s.config.apiKey,s.name)}async function RI(s,e,n=!1){if(ei(s.app))return Promise.reject(Kr(s));const r=ng(s),o=pI(r,e),f=await new bI(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=600*1e3;class CI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kE(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=II&&this.cachedEventUids.clear(),this.cachedEventUids.has(ev(e))}saveEventToCache(e){this.cachedEventUids.add(ev(e)),this.lastProcessedEventTime=Date.now()}}function ev(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function kE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(s,e={}){return _o(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OI=/^https?/;async function kI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await DI(s);for(const n of e)try{if(VI(n))return}catch{}is(s,"unauthorized-domain")}function VI(s){const e=cm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!OI.test(n))return!1;if(MI.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=new $l(3e4,6e4);function tv(){const s=Ai().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function PI(s){return new Promise((e,n)=>{var o,u,f;function r(){tv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tv(),n(Si(s,"network-request-failed"))},timeout:jI.get()})}if((u=(o=Ai().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Ai().gapi)!=null&&f.load)r();else{const g=HR("iframefcb");return Ai()[g]=()=>{gapi.load?r():n(Si(s,"network-request-failed"))},zR(`${BR()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function UI(s){return Oc=Oc||PI(s),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new $l(5e3,15e3),zI="__/auth/iframe",BI="emulator/auth/iframe",HI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FI(s){const e=s.config;Re(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Wm(e,BI):`https://${s.config.authDomain}/${zI}`,r={apiKey:e.apiKey,appName:s.name,v:ta},o=qI.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Fl(r).slice(1)}`}async function GI(s){const e=await UI(s),n=Ai().gapi;return Re(n,s,"internal-error"),e.open({where:document.body,url:FI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HI,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Si(s,"network-request-failed"),g=Ai().setTimeout(()=>{u(f)},LI.get());function p(){Ai().clearTimeout(g),o(r)}r.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YI=500,KI=600,XI="_blank",$I="http://localhost";class nv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZI(s,e,n,r=YI,o=KI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p={...QI,width:r.toString(),height:o.toString(),top:u,left:f},y=un().toLowerCase();n&&(g=mE(y)?XI:n),fE(y)&&(e=e||$I,p.scrollbars="yes");const T=Object.entries(p).reduce((N,[B,H])=>`${N}${B}=${H},`,"");if(MR(y)&&g!=="_self")return WI(e||"",g),new nv(null);const S=window.open(e||"",g,T);Re(S,s,"popup-blocked");try{S.focus()}catch{}return new nv(S)}function WI(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="__/auth/handler",eC="emulator/auth/handler",tC=encodeURIComponent("fac");async function iv(s,e,n,r,o,u){Re(s.config.authDomain,s,"auth-domain-config-required"),Re(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:ta,eventId:o};if(e instanceof wE){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",Vw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))f[T]=S}if(e instanceof Zl){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await s._getAppCheckToken(),y=p?`#${tC}=${encodeURIComponent(p)}`:"";return`${nC(s)}?${Fl(g).slice(1)}${y}`}function nC({config:s}){return s.emulator?Wm(s,eC):`https://${s.authDomain}/${JI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class iC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=RI,this._overrideRedirectResult=SI}async _openPopup(e,n,r,o){var f;ss((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await iv(e,n,r,cm(),o);return ZI(e,u,sg())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await iv(e,n,r,cm(),o);return aI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ss(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GI(e),r=new CI(e);return n.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pd,{type:Pd},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[Pd];u!==void 0&&n(!!u),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vE()||dE()||tg()}}const sC=iC;var sv="@firebase/auth",rv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oC(s){$r(new Js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;Re(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EE(s)},y=new UR(r,o,u,p);return FR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$r(new Js("auth-internal",e=>{const n=ng(e.getProvider("auth").getImmediate());return(r=>new rC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(sv,rv,aC(s)),vi(sv,rv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=300,uC=Sv("authIdTokenMaxAge")||lC;let av=null;const cC=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uC)return;const o=n==null?void 0:n.token;av!==o&&(av=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function hC(s=_m()){const e=nh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=qR(s,{popupRedirectResolver:sC,persistence:[gI,iI,IE]}),r=Sv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=cC(u.toString());JR(n,f,()=>f(n.currentUser)),WR(n,g=>f(g))}}const o=Tv("auth");return o&&GR(n,`http://${o}`),n}function fC(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}LR({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Si("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",fC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oC("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebasestorage.googleapis.com",dC="storageBucket",mC=120*1e3,gC=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Ci{constructor(e,n,r=0){super(Ud(e),`Firebase Storage: ${n} (${Ud(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ni.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ud(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ii;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ii||(Ii={}));function Ud(s){return"storage/"+s}function pC(){const s="An unknown error occurred, please check the error payload for server response.";return new Ni(Ii.UNKNOWN,s)}function yC(){return new Ni(Ii.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _C(){return new Ni(Ii.CANCELED,"User canceled the upload/download.")}function vC(s){return new Ni(Ii.INVALID_URL,"Invalid URL '"+s+"'.")}function EC(s){return new Ni(Ii.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function ov(s){return new Ni(Ii.INVALID_ARGUMENT,s)}function jE(){return new Ni(Ii.APP_DELETED,"The Firebase app was deleted.")}function TC(s){return new Ni(Ii.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ni.makeFromUrl(e,n)}catch{return new ni(e,"")}if(r.path==="")return r;throw EC(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(ve){ve.path.charAt(ve.path.length-1)==="/"&&(ve.path_=ve.path_.slice(0,-1))}const f="(/(.*))?$",g=new RegExp("^gs://"+o+f,"i"),p={bucket:1,path:3};function y(ve){ve.path_=decodeURIComponent(ve.path)}const T="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",B=new RegExp(`^https?://${S}/${T}/b/${o}/o${N}`,"i"),H={bucket:1,path:3},F=n===VE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Q="([^?#]*)",he=new RegExp(`^https?://${F}/${o}/${Q}`,"i"),ae=[{regex:g,indices:p,postModify:u},{regex:B,indices:H,postModify:y},{regex:he,indices:{bucket:1,path:2},postModify:y}];for(let ve=0;ve<ae.length;ve++){const ge=ae[ve],Ie=ge.regex.exec(e);if(Ie){const x=Ie[ge.indices.bucket];let A=Ie[ge.indices.path];A||(A=""),r=new ni(x,A),ge.postModify(r);break}}if(r==null)throw vC(e);return r}}class bC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(s,e,n){let r=1,o=null,u=null,f=!1,g=0;function p(){return g===2}let y=!1;function T(...Q){y||(y=!0,e.apply(null,Q))}function S(Q){o=setTimeout(()=>{o=null,s(B,p())},Q)}function N(){u&&clearTimeout(u)}function B(Q,...he){if(y){N();return}if(Q){N(),T.call(null,Q,...he);return}if(p()||f){N(),T.call(null,Q,...he);return}r<64&&(r*=2);let ae;g===1?(g=2,ae=0):ae=(r+Math.random())*1e3,S(ae)}let H=!1;function F(Q){H||(H=!0,N(),!y&&(o!==null?(Q||(g=2),clearTimeout(o),S(0)):Q||(g=1)))}return S(0),u=setTimeout(()=>{f=!0,F(!0)},n),F}function SC(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(s){return s!==void 0}function lv(s,e,n,r){if(r<e)throw ov(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw ov(`Invalid value for '${s}'. Expected ${n} or less.`)}function xC(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var Jc;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Jc||(Jc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,o,u,f,g,p,y,T,S,N=!0,B=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=g,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=T,this.connectionFactory_=S,this.retry=N,this.isUsingEmulator=B,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,F)=>{this.resolve_=H,this.reject_=F,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Tc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=g=>{const p=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const g=u.getErrorCode()===Jc.NO_ERROR,p=u.getStatus();if(!g||RC(p,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===Jc.ABORT;r(!1,new Tc(!1,null,T));return}const y=this.successCodes_.indexOf(p)!==-1;r(!0,new Tc(y,u))})},n=(r,o)=>{const u=this.resolve_,f=this.reject_,g=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(g,g.getResponse());AC(p)?u(p):u()}catch(p){f(p)}else if(g!==null){const p=pC();p.serverResponse=g.getErrorText(),this.errorCallback_?f(this.errorCallback_(g,p)):f(p)}else if(o.canceled){const p=this.appDelete_?jE():_C();f(p)}else{const p=yC();f(p)}};this.canceled_?n(!1,new Tc(!1,null,!0)):this.backoffId_=wC(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CC(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function NC(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function DC(s,e){e&&(s["X-Firebase-GMPID"]=e)}function MC(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function OC(s,e,n,r,o,u,f=!0,g=!1){const p=xC(s.urlParams),y=s.url+p,T=Object.assign({},s.headers);return DC(T,e),CC(T,n),NC(T,u),MC(T,r),new IC(y,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,f,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function VC(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this._service=e,n instanceof ni?this._location=n:this._location=ni.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new eh(e,n)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VC(this._location.path)}get storage(){return this._service}get parent(){const e=kC(this._location.path);if(e===null)return null;const n=new ni(this._location.bucket,e);return new eh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TC(e)}}function uv(s,e){const n=e==null?void 0:e[dC];return n==null?null:ni.makeFromBucketSpec(n,s)}function jC(s,e,n,r={}){s.host=`${e}:${n}`;const o=ea(e);o&&(mm(`https://${s.host}/b`),gm("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(s._overrideAuthToken=typeof u=="string"?u:Av(u,s.app.options.projectId))}class PC{constructor(e,n,r,o,u,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=VE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mC,this._maxUploadRetryTime=gC,this._requests=new Set,o!=null?this._bucket=ni.makeFromBucketSpec(o,this._host):this._bucket=uv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ni.makeFromBucketSpec(this._url,e):this._bucket=uv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eh(this,e)}_makeRequest(e,n,r,o,u=!0){if(this._deleted)return new bC(jE());{const f=OC(e,this._appId,r,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const cv="@firebase/storage",hv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="storage";function UC(s=_m(),e){s=Wt(s);const r=nh(s,PE).getImmediate({identifier:e}),o=bv("storage");return o&&LC(r,...o),r}function LC(s,e,n,r={}){jC(s,e,n,r)}function zC(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new PC(n,r,o,e,ta)}function BC(){$r(new Js(PE,zC,"PUBLIC").setMultipleInstances(!0)),vi(cv,hv,""),vi(cv,hv,"esm2020")}BC();const HC={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},ag=Iv(HC),bc=Xx(ag),qC=hC(ag);UC(ag);const FC=["ayahakuttyv@gmail.com","ktmuhammedrayyan@gmail.com"],GC=()=>{const[s,e]=J.useState(""),[n,r]=J.useState(""),[o,u]=J.useState(""),[f,g]=J.useState(""),[p,y]=J.useState(""),[T,S]=J.useState(""),[N,B]=J.useState([]),[H,F]=J.useState(null),[Q,he]=J.useState(null);J.useEffect(()=>{const x=eI(qC,A=>{he((A==null?void 0:A.email)??null)});return()=>x()},[]),J.useEffect(()=>{const x=fR(U_(bc,"movie"),A=>{const I=A.docs.map(k=>({id:k.id,...k.data()}));B(I)});return()=>x()},[]);const ye=async()=>{if(!s||!f){alert("Title and Video link are required!");return}try{await hR(U_(bc,"movie"),{title:s,poster:n,backdrop:o,video:f,description:p,category:T,createdAt:q_()}),ge()}catch(x){console.error("Error saving movie: ",x)}},ae=async()=>{if(H)try{const x=lm(bc,"movie",H);await uR(x,{title:s,poster:n,backdrop:o,video:f,description:p,category:T,updatedAt:q_()}),ge()}catch(x){console.error("Error updating movie: ",x)}},ve=async x=>{try{await cR(lm(bc,"movie",x))}catch(A){console.error("Error deleting movie: ",A)}},ge=()=>{e(""),r(""),u(""),g(""),y(""),S(""),F(null)},Ie=x=>{F(x.id||null),e(x.title),r(x.poster),u(x.backdrop),g(x.video),y(x.description),S(x.category)};return Q?FC.includes(Q.toLowerCase())?_.jsxs("div",{style:{padding:"20px"},children:[_.jsx("h1",{children:" Admin Panel"}),_.jsxs("div",{style:{marginBottom:"20px"},children:[_.jsx("input",{placeholder:"Movie Title",value:s,onChange:x=>e(x.target.value)}),_.jsx("input",{placeholder:"Poster URL",value:n,onChange:x=>r(x.target.value)}),_.jsx("input",{placeholder:"Backdrop URL",value:o,onChange:x=>u(x.target.value)}),_.jsx("input",{placeholder:"Video URL",value:f,onChange:x=>g(x.target.value)}),_.jsx("input",{placeholder:"Description",value:p,onChange:x=>y(x.target.value)}),_.jsx("input",{placeholder:"Category",value:T,onChange:x=>S(x.target.value)}),H?_.jsx("button",{onClick:ae,children:" Update Movie"}):_.jsx("button",{onClick:ye,children:" Add Movie"}),H&&_.jsx("button",{onClick:ge,children:" Cancel"})]}),_.jsx("h2",{children:" Movie List"}),_.jsx("ul",{children:N.map(x=>_.jsxs("li",{style:{marginBottom:"10px"},children:[_.jsx("strong",{children:x.title})," (",x.category,")",_.jsx("button",{onClick:()=>Ie(x),children:" Edit"}),_.jsx("button",{onClick:()=>ve(x.id),children:" Delete"})]},x.id))})]}):_.jsx("p",{children:" You are not authorized to access Admin Panel"}):_.jsx("p",{children:" Please sign in to access Admin Panel"})},fv=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M12 15l-4-4m0 0l4-4m-4 4h12"})}),dv=()=>_.jsxs("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[_.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),_.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),mv=()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Ld=({title:s,status:e})=>{const n={active:"text-white border-red-500",pending:"text-zinc-500 border-zinc-700",complete:"text-green-400 border-green-500"},r={Uploading:_.jsx(fv,{}),Processing:_.jsx(dv,{}),Complete:_.jsx(mv,{})},o=()=>e==="complete"?_.jsx(mv,{}):e==="active"&&s==="Processing"?_.jsx(dv,{}):e==="active"&&s==="Uploading"?_.jsx(fv,{}):r[s]??null;return _.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[_.jsx("div",{className:`w-12 h-12 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${n[e]}`,children:o()}),_.jsx("p",{className:`text-xs font-semibold transition-colors duration-300 ${e==="pending"?"text-zinc-500":"text-white"}`,children:s})]})},QC=({status:s,percentage:e,movie:n,onComplete:r,onCancel:o})=>{const u=()=>{switch(s){case"uploading":return`Uploading to your drive... ${Math.round(e)}%`;case"processing":return"Processing video, optimizing for streaming...";case"finalizing":return"Almost there, finalizing details...";case"complete":return"Upload complete! Your movie is now available.";default:return"Preparing to upload..."}},f=s==="uploading",g=s==="processing",p=s==="finalizing",y=s==="complete";return _.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4 fade-in",children:_.jsxs("div",{className:"w-full max-w-2xl glass-card p-8 rounded-2xl",children:[_.jsxs("div",{className:"flex items-start space-x-6 mb-8",children:[_.jsx("img",{src:n.posterUrl,alt:n.title,className:"w-24 h-36 object-cover rounded-lg shadow-lg"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-zinc-400 text-sm",children:"Now adding to Thelden"}),_.jsx("h1",{className:"text-3xl font-bold text-white mt-1",children:n.title})]})]}),_.jsxs("div",{className:"flex justify-between items-center mb-8 px-4",children:[_.jsx(Ld,{title:"Uploading",status:f?"active":"complete"}),_.jsx("div",{className:`flex-grow h-0.5 mx-4 ${g||p||y?"bg-green-500":"bg-zinc-700"}`}),_.jsx(Ld,{title:"Processing",status:g||p?"active":y?"complete":"pending"}),_.jsx("div",{className:`flex-grow h-0.5 mx-4 ${y?"bg-green-500":"bg-zinc-700"}`}),_.jsx(Ld,{title:"Complete",status:y?"complete":"pending"})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("p",{className:"text-center text-zinc-300 h-6",children:u()}),_.jsx("div",{className:"w-full bg-zinc-700 rounded-full h-2.5",children:_.jsx("div",{className:`rounded-full h-2.5 transition-all duration-300 ${y?"bg-green-500":"bg-red-600"}`,style:{width:`${y?100:e}%`}})})]}),_.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[!y&&_.jsx("button",{onClick:o,className:"bg-zinc-700 text-white font-bold py-2 px-6 rounded-md hover:bg-zinc-600 transition-colors",children:"Cancel"}),y&&_.jsx("button",{onClick:r,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-md hover:bg-red-700 transition-colors",children:"Finish"})]})]})})},YC=({user:s,onUpdateProfile:e,onLogout:n,onRequestClick:r,onRateUsClick:o,onAdminClick:u,onChatClick:f})=>{const[g,p]=J.useState(!1),[y,T]=J.useState(s.name),[S,N]=J.useState(null),[B,H]=J.useState(s.profilePicUrl),F=J.useRef(null);J.useEffect(()=>{T(s.name),H(s.profilePicUrl),N(null)},[s]);const Q=ae=>{if(ae.target.files&&ae.target.files[0]){const ve=ae.target.files[0];N(ve),H(URL.createObjectURL(ve))}},he=()=>{e(y,B),p(!1)},ye=()=>{T(s.name),N(null),H(s.profilePicUrl),p(!1)};return _.jsx("div",{className:"container mx-auto px-6 py-8 flex justify-center fade-in",children:_.jsxs("div",{className:"w-full max-w-md my-list-glass-card p-8 text-center space-y-8",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[_.jsx("img",{src:B,alt:"profile",className:"w-32 h-32 rounded-full object-cover mx-auto border-4 border-zinc-700"}),g&&_.jsx("button",{onClick:()=>{var ae;return(ae=F.current)==null?void 0:ae.click()},className:"absolute bottom-0 right-0 w-10 h-10 bg-red-600 rounded-full flex items-center justify-center border-2 border-zinc-800 hover:bg-red-500 transition-colors","aria-label":"Change profile picture",children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:[_.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),_.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})})]}),_.jsx("input",{type:"file",ref:F,onChange:Q,className:"hidden",accept:"image/*"}),g?_.jsx("input",{type:"text",value:y,onChange:ae=>T(ae.target.value),className:"w-full text-center bg-zinc-700/50 border-b-2 border-red-500 rounded-t-lg text-2xl font-bold mt-4 py-1 focus:outline-none"}):_.jsx("h2",{className:"text-2xl font-bold mt-4",children:s.name}),_.jsx("p",{className:"text-zinc-400",children:s.email})]}),g?_.jsxs("div",{className:"flex space-x-4",children:[_.jsx("button",{onClick:he,className:"w-full bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition-colors",children:"Save Changes"}),_.jsx("button",{onClick:ye,className:"w-full bg-zinc-600 text-white font-bold py-3 rounded-lg hover:bg-zinc-500 transition-colors",children:"Cancel"})]}):_.jsx("button",{onClick:()=>p(!0),className:"w-full bg-zinc-700 text-white font-bold py-3 rounded-lg hover:bg-zinc-600 transition-colors",children:"Edit Profile"}),_.jsxs("div",{className:"space-y-4 text-left border-t border-zinc-700 pt-8",children:[_.jsx("button",{onClick:f,className:"w-full glass-glow-button text-white font-semibold py-3 px-4 rounded-lg text-left",children:"Chat with Support"}),_.jsx("button",{onClick:r,className:"w-full glass-glow-button text-white font-semibold py-3 px-4 rounded-lg text-left",children:"Request a Movie"}),_.jsx("button",{onClick:o,className:"w-full glass-glow-button text-white font-semibold py-3 px-4 rounded-lg text-left",children:"Rate Us"}),s.role==="admin"&&_.jsx("button",{onClick:u,className:"w-full glass-glow-button text-white font-semibold py-3 px-4 rounded-lg text-left",children:"Admin Panel"})]}),_.jsx("button",{onClick:n,className:"w-full bg-red-600/30 border border-red-600/50 text-red-400 font-bold py-3 rounded-lg hover:bg-red-600/50 hover:text-red-300 transition-colors",children:"Logout"})]})})},wc={name:"Thelden Support",avatarUrl:"https://picsum.photos/seed/support/64/64"},KC=Array.from({length:12},(s,e)=>`https://picsum.photos/seed/sticker${e}/100/100`),XC=Array.from({length:12},(s,e)=>`https://picsum.photos/seed/gif${e}/150/100`),$C=({currentUser:s,messages:e,onSendMessage:n,onSendAttachment:r})=>{const[o,u]=J.useState(""),[f,g]=J.useState(!1),[p,y]=J.useState("stickers"),T=J.useRef(null),S=J.useRef(null);J.useEffect(()=>{const F=Q=>{S.current&&!S.current.contains(Q.target)&&g(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[S]);const N=()=>{var F;(F=T.current)==null||F.scrollIntoView({behavior:"smooth"})};J.useEffect(N,[e]);const B=F=>{F.preventDefault(),o.trim()&&(n(o),u(""))},H=F=>{r(F),g(!1)};return _.jsx("div",{className:"md:container md:mx-auto md:px-4 md:py-8 h-[calc(100vh-128px)] md:h-[calc(100vh-10rem)]",children:_.jsx("div",{className:"glass-card h-full flex overflow-hidden rounded-none md:rounded-2xl",children:_.jsxs("div",{className:"w-full flex flex-col bg-zinc-900/50",children:[_.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center space-x-3 md:space-x-4 bg-black/20",children:[_.jsxs("div",{className:"relative",children:[_.jsx("img",{src:wc.avatarUrl,alt:wc.name,className:"w-10 h-10 rounded-full"}),_.jsx("span",{className:"absolute bottom-0 right-0 block h-3 w-3 rounded-full bg-green-500 border-2 border-zinc-800"})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-bold",children:wc.name}),_.jsx("p",{className:"text-sm text-green-400",children:"Online"})]})]}),_.jsxs("div",{className:"flex-grow p-6 overflow-y-auto hide-scrollbar space-y-4",children:[e.map(F=>_.jsxs("div",{className:`flex items-end gap-3 message-bubble ${F.sender==="me"?"justify-end":"justify-start"}`,children:[F.sender==="them"&&_.jsx("img",{src:wc.avatarUrl,className:"w-8 h-8 rounded-full flex-shrink-0",alt:"avatar"}),_.jsxs("div",{className:`max-w-xs md:max-w-md rounded-2xl ${F.text?F.sender==="me"?"bg-red-600 rounded-br-lg px-4 py-2":"bg-zinc-700 rounded-bl-lg px-4 py-2":"p-1 bg-black/20"}`,children:[F.text&&_.jsx("p",{children:F.text}),F.imageUrl&&_.jsx("img",{src:F.imageUrl,alt:"sent content",className:"rounded-xl max-w-[150px] object-cover"})]})]},F.id)),_.jsx("div",{ref:T})]}),_.jsxs("div",{className:"relative p-4 bg-black/20 border-t border-white/10",children:[f&&_.jsxs("div",{ref:S,className:"absolute bottom-full left-4 right-4 mb-2 w-auto max-w-sm h-64 glass-card p-3 rounded-xl fade-in-fast",children:[_.jsxs("div",{className:"flex items-center border-b border-white/10 mb-2",children:[_.jsx("button",{onClick:()=>y("stickers"),className:`py-2 px-4 text-sm font-semibold transition-colors ${p==="stickers"?"text-white border-b-2 border-red-500":"text-zinc-400 hover:text-white"}`,children:"Stickers"}),_.jsx("button",{onClick:()=>y("gifs"),className:`py-2 px-4 text-sm font-semibold transition-colors ${p==="gifs"?"text-white border-b-2 border-red-500":"text-zinc-400 hover:text-white"}`,children:"GIFs"})]}),_.jsxs("div",{className:"h-[calc(100%-40px)] overflow-y-auto hide-scrollbar",children:[p==="stickers"&&_.jsx("div",{className:"grid grid-cols-4 gap-3 p-1",children:KC.map(F=>_.jsx("img",{src:F,onClick:()=>H(F),alt:"sticker",className:"w-full h-full object-cover rounded-md cursor-pointer hover:scale-110 transition-transform"},F))}),p==="gifs"&&_.jsx("div",{className:"grid grid-cols-3 gap-2 p-1",children:XC.map(F=>_.jsx("img",{src:F,onClick:()=>H(F),alt:"gif",className:"w-full h-full object-cover rounded-md cursor-pointer hover:scale-110 transition-transform"},F))})]})]}),_.jsxs("form",{onSubmit:B,className:"flex items-center space-x-2 bg-white/10 backdrop-blur-lg rounded-full border border-white/20 p-2 shadow-lg",children:[_.jsx("button",{type:"button",onClick:()=>g(!f),className:"flex-shrink-0 flex items-center justify-center w-10 h-10 bg-white/20 rounded-full text-white text-xl hover:bg-white/30 transition-colors",children:"+"}),_.jsx("input",{type:"text",value:o,onChange:F=>u(F.target.value),placeholder:"Type anything...",className:"flex-grow bg-transparent border-none focus:outline-none focus:ring-0 text-white placeholder:text-gray-300/80 px-2"}),_.jsx("button",{type:"submit",className:"flex-shrink-0 bg-cyan-400 text-white font-bold py-2 px-6 rounded-full hover:bg-cyan-500 transition-colors shadow-md text-sm",children:"SEND"})]})]})]})})})},zd=({title:s,spaceUsed:e,totalSpace:n,isSelected:r,isSelectable:o,onClick:u})=>_.jsxs("div",{onClick:u,className:`relative glass-card p-6 rounded-2xl border-2 transition-all duration-300 ${r?"border-orange-500 shadow-[0_0_25px_rgba(234,88,12,0.3)]":"border-transparent"} ${o?"cursor-pointer hover:border-zinc-700":""}`,children:[_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsx("div",{className:"w-12 h-12 bg-zinc-800 rounded-lg flex items-center justify-center",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-lg text-white",children:s}),_.jsxs("p",{className:"text-sm text-zinc-400",children:[e," / ",n," GB"]})]})]}),o&&_.jsx("div",{className:"absolute top-4 right-4 w-4 h-4 rounded-full bg-zinc-800 border-2 border-zinc-600 flex items-center justify-center",children:r&&_.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500 shadow-[0_0_8px_theme(colors.orange.500)]"})})]}),ZC=({item:s})=>_.jsxs("div",{className:"flex items-center space-x-4 glass-card p-3 rounded-lg",children:[_.jsx("img",{src:s.movie.posterUrl,alt:s.movie.title,className:"w-12 h-16 object-cover rounded"}),_.jsxs("div",{className:"flex-grow",children:[_.jsx("p",{className:"font-semibold text-white truncate",children:s.movie.title}),_.jsx("div",{className:"w-full bg-zinc-700 rounded-full h-1.5 mt-2",children:_.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:`${s.progress}%`}})}),_.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:[Math.round(s.progress),"% complete"]})]})]}),WC=s=>{const{downloadingMovies:e,downloadedMovies:n,downloadStorage:r,onSetDownloadStorage:o,isMobile:u,hasSdCard:f,...g}=s;return _.jsxs("div",{className:"container mx-auto px-4 md:px-6 py-8 space-y-12",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-4xl font-black mb-2 text-center md:text-left",children:"Downloads"}),_.jsx("p",{className:"text-zinc-400 text-center md:text-left",children:"Manage your offline content and storage."})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Download Location"}),u?_.jsxs("div",{className:`grid gap-6 ${f?"grid-cols-1 md:grid-cols-2":"grid-cols-1"}`,children:[_.jsx(zd,{title:"Internal Storage",spaceUsed:"45.2",totalSpace:"128",isSelected:r==="internal",isSelectable:!0,onClick:()=>o("internal")}),f&&_.jsx(zd,{title:"SD Card",spaceUsed:"12.1",totalSpace:"64",isSelected:r==="sdCard",isSelectable:!0,onClick:()=>o("sdCard")})]}):_.jsx(zd,{title:"Computer Storage",spaceUsed:"78.5",totalSpace:"512",isSelected:!0,isSelectable:!1})]}),e.length>0&&_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ongoing Downloads"}),_.jsx("div",{className:"space-y-4",children:e.map(p=>_.jsx(ZC,{item:p},p.movie.id))})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Downloaded Movies"}),n.length>0?_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:n.map(p=>{const y=!!s.myList.find(T=>T.id===p.id);return _.jsx(so,{movie:p,isInMyList:y,...g},p.id)})}):_.jsxs("div",{className:"text-center py-16 bg-black/20 rounded-lg",children:[_.jsx("p",{className:"text-zinc-400 text-lg",children:"Your downloaded movies will appear here."}),_.jsx("p",{className:"text-zinc-500 mt-2",children:"Find a movie and tap the download icon to get started."})]})]})]})},JC=["ayahakuttyv@gmail.com","ktmuhammedrayyan@gmail.com"],gv=[{id:1,text:"Welcome to Thelden! How can I help you today?",sender:"them",timestamp:"10:30 AM"},{id:2,text:"You can ask me about movies, your account, or report any issues.",sender:"them",timestamp:"10:31 AM"}],eN=()=>{const[s,e]=J.useState("initialSplash"),[n,r]=J.useState(null),[o,u]=J.useState([]),[f,g]=J.useState([]),p=J.useMemo(()=>f.map(ie=>({title:ie.title,movies:o.filter(fe=>fe.category===ie.title)})).filter(ie=>ie.movies.length>0),[f,o]),[y,T]=J.useState(null),[S,N]=J.useState(!1),[B,H]=J.useState("Home"),[F,Q]=J.useState(!1),[he,ye]=J.useState([]),[ae,ve]=J.useState([]),[ge,Ie]=J.useState(null),[x,A]=J.useState({}),[I,k]=J.useState(null),[M,V]=J.useState(!1),[C,Xe]=J.useState({}),[Ye,Y]=J.useState([]),[re,me]=J.useState("internal"),[je,D]=J.useState(!1),[W,oe]=J.useState(!0),[ne,ce]=J.useState({status:"idle",percentage:0,movie:null,category:""});J.useEffect(()=>{const ie=/Mobi|Android|iPhone/i.test(navigator.userAgent);D(ie);const fe=setTimeout(()=>{try{const le=localStorage.getItem("thelden-user");if(le){const Ae=JSON.parse(le);r(Ae),A(Pe=>Pe[Ae.email]?Pe:{...Pe,[Ae.email]:gv}),e("mainApp")}else e("auth")}catch(le){console.error("Failed to parse user from localStorage",le),localStorage.removeItem("thelden-user"),e("auth")}},2e3);return()=>clearTimeout(fe)},[]),J.useEffect(()=>{const ie=[{id:"cat-1",title:"Popular on Thelden",order:1},{id:"cat-2",title:"New Movies",order:2},{id:"cat-3",title:"TV Shows",order:3},{id:"cat-4",title:"Vintage",order:4}];g(ie);const fe=ie.flatMap(le=>Sb(le.title,10));u(fe)},[]),J.useEffect(()=>{let ie,fe;return ne.status==="uploading"?ie=window.setInterval(()=>{ce(le=>{const Ae=le.percentage+Math.random()*5;return Ae>=100?(clearInterval(ie),fe=window.setTimeout(()=>ce(Pe=>({...Pe,status:"processing",percentage:100})),500),{...le,percentage:100}):{...le,percentage:Ae}})},80):ne.status==="processing"?fe=window.setTimeout(()=>{ce(le=>({...le,status:"finalizing"}))},2500):ne.status==="finalizing"&&(fe=window.setTimeout(()=>{ce(le=>({...le,status:"complete"}))},1500)),()=>{clearInterval(ie),clearTimeout(fe)}},[ne.status]);const Oe=ie=>{const fe=ie.toLowerCase(),le=JC.includes(fe)?"admin":"user",Ae=ie.split("@")[0].replace(/[^a-zA-Z0-9]/g," ").replace(/\b\w/g,mn=>mn.toUpperCase()),Pe={email:ie,role:le,name:Ae,profilePicUrl:`https://picsum.photos/seed/${encodeURIComponent(ie)}/128/128`};r(Pe),localStorage.setItem("thelden-user",JSON.stringify(Pe)),A(mn=>mn[ie]?mn:{...mn,[ie]:gv}),e("mainApp")},Ee=()=>{r(null),localStorage.removeItem("thelden-user"),H("Home"),e("auth")},tt=ie=>{T(ie)},Fe=()=>{T(null)},Dt=(ie,fe)=>{if(!n)return;const le={...n,name:ie,profilePicUrl:fe};r(le),localStorage.setItem("thelden-user",JSON.stringify(le)),alert("Profile updated!")},Hn=()=>{y&&(ye(ie=>ie.find(Ae=>Ae.id===y.id)?ie:[{...y,watchPercentage:Math.floor(Math.random()*80)+10},...ie].slice(0,10)),N(!0))},qn=()=>{N(!1),T(null)},en=ie=>{ve(fe=>fe.find(Ae=>Ae.id===ie.id)?fe.filter(Ae=>Ae.id!==ie.id):[ie,...fe])},Ft=ie=>{if(C[ie.id]||Ye.find(le=>le.id===ie.id)){console.log("Movie is already downloading or downloaded.");return}Xe(le=>({...le,[ie.id]:{movie:ie,progress:0}}));const fe=setInterval(()=>{Xe(le=>{const Ae=le[ie.id];if(!Ae)return clearInterval(fe),le;const Pe=Ae.progress+Math.random()*5+2;if(Pe>=100){clearInterval(fe),Y(ra=>[ie,...ra]);const{[ie.id]:mn,...sa}=le;return sa}return{...le,[ie.id]:{...Ae,progress:Pe}}})},200)},Gt=ie=>{Ie(ie),H("Admin")},tn=ie=>{k(ie)},Di=()=>{k(null)},Mt=async()=>{I&&(u(ie=>ie.filter(fe=>fe.id!==I.id)),alert(`"${I.title}" has been deleted.`),k(null))},rs=(ie,fe)=>{const le={...ie,id:String(Date.now()+Math.random()),watchPercentage:0};ce({status:"uploading",percentage:0,movie:le,category:fe})},dt=async ie=>{u(fe=>fe.map(le=>le.id===ie.id?ie:le)),alert(`${ie.title} has been updated successfully!`)},yt=async()=>{if(ne.movie&&ne.category){const{id:ie,...fe}=ne.movie,le=ne.category||(fe.seasonNumber?"TV Shows":"New Movies"),Ae={...fe,id:`new-${Date.now()}`,category:le};if(u(Pe=>[Ae,...Pe]),!f.some(Pe=>Pe.title===le)){const Pe={id:`cat-${Date.now()}`,title:le,order:f.length+1};g(mn=>[...mn,Pe])}}ce({status:"idle",percentage:0,movie:null,category:""}),H("Home")},En=()=>{ne.movie&&(ne.movie.posterUrl.startsWith("blob:")&&URL.revokeObjectURL(ne.movie.posterUrl),ne.movie.backdropUrl.startsWith("blob:")&&URL.revokeObjectURL(ne.movie.backdropUrl)),ce({status:"idle",percentage:0,movie:null,category:""})},lr=(ie,fe)=>{const le={id:Date.now(),text:fe,sender:"me",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};A(Ae=>({...Ae,[ie]:[...Ae[ie]||[],le]})),setTimeout(()=>{const Ae={id:Date.now()+1,text:`Thanks for your message! Our team will look into "${fe.substring(0,20)}..." and get back to you shortly.`,sender:"them",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};A(Pe=>({...Pe,[ie]:[...Pe[ie]||[],Ae]}))},1500)},te=(ie,fe)=>{const le={id:Date.now(),imageUrl:fe,sender:"me",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};A(Ae=>({...Ae,[ie]:[...Ae[ie]||[],le]}))},Ne=()=>{if(!n)return null;switch(B){case"Movies":return _.jsx(rw,{allMovies:o,onCardClick:tt,user:n,onEditClick:Gt,onDeleteClick:tn,onToggleMyList:en,myList:ae});case"My List":return _.jsx(lw,{myList:ae,watchedList:he,onCardClick:tt,user:n,onEditClick:Gt,onDeleteClick:tn,onToggleMyList:en});case"Downloads":return _.jsx(WC,{downloadingMovies:Object.values(C),downloadedMovies:Ye,downloadStorage:re,onSetDownloadStorage:me,isMobile:je,hasSdCard:W,onCardClick:tt,user:n,myList:ae,onToggleMyList:en,onEditClick:Gt,onDeleteClick:tn});case"Chat":return _.jsx($C,{currentUser:n,messages:x[n.email]||[],onSendMessage:ie=>lr(n.email,ie),onSendAttachment:ie=>te(n.email,ie)});case"Request Movie":return _.jsx(uw,{});case"Rate Us":return M?_.jsx("div",{className:"container mx-auto px-6 py-8 flex justify-center text-center",children:_.jsxs("div",{className:"w-full max-w-2xl thank-you-animation",children:[_.jsx("h1",{className:"text-5xl font-bold mb-4",children:"Thank You!"}),_.jsx("p",{className:"text-zinc-300 text-lg",children:"Your feedback helps us make Thelden even better."})]})}):_.jsx(hw,{onRateSubmit:()=>V(!0)});case"Admin":return(n==null?void 0:n.role)==="admin"?_.jsx(GC,{onAddMovie:rs,onUpdateMovie:dt,allMovies:o,initialMovieToEdit:ge,onEditDone:()=>Ie(null),categories:f.map(ie=>ie.title)}):_.jsx("p",{children:"Access Denied"});case"Profile":return _.jsx(YC,{user:n,onUpdateProfile:Dt,onLogout:Ee,onRequestClick:()=>H("Request Movie"),onRateUsClick:()=>H("Rate Us"),onAdminClick:()=>H("Admin"),onChatClick:()=>H("Chat")});case"Home":default:return _.jsx(sw,{carousels:p,recentlyViewed:he,onCardClick:tt,user:n,onEditClick:Gt,onDeleteClick:tn,onToggleMyList:en,myList:ae})}};return s!=="mainApp"?_.jsxs(_.Fragment,{children:[_.jsx(Ab,{phase:s,user:n}),s==="auth"&&_.jsx(D0,{onAuthSuccess:Oe})]}):n?ne.status!=="idle"&&ne.movie?_.jsx(QC,{status:ne.status,percentage:ne.percentage,movie:ne.movie,onComplete:yt,onCancel:En}):_.jsxs("div",{className:"min-h-screen text-white selection:bg-red-700/50",children:[_.jsx(nw,{user:n,onSearchClick:()=>Q(!0),onProfileClick:()=>H("Profile")}),_.jsx("main",{className:"pt-24 pb-32",children:Ne()}),_.jsx(tw,{user:n,activeTab:B,onTabClick:H,onSearchClick:()=>Q(!0)}),F&&_.jsx(Qb,{allMovies:o,onClose:()=>Q(!1),onCardClick:tt,user:n,onEditClick:Gt,onDeleteClick:tn,myList:ae,onToggleMyList:en}),y&&!S&&_.jsx(xb,{movie:y,onClose:Fe,onPlay:Hn,onToggleMyList:en,isInMyList:!!ae.find(ie=>ie.id===y.id),onDownload:Ft,downloadingMovies:C,downloadedMovies:Ye}),S&&y&&_.jsx(Bb,{movie:y,allMovies:o,onSelectEpisode:tt,onClose:qn}),I&&_.jsx(iw,{movie:I,onConfirm:Mt,onCancel:Di})]}):_.jsx(D0,{onAuthSuccess:Oe})},UE=document.getElementById("root");if(!UE)throw new Error("Could not find root element to mount to");const tN=wb.createRoot(UE);tN.render(_.jsx(gb.StrictMode,{children:_.jsx(eN,{})}));
